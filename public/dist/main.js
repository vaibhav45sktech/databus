/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
/******/ (() => { // webpackBootstrap
/******/ 	var __webpack_modules__ = ({

/***/ "./js/angular-application.js":
/*!***********************************!*\
  !*** ./js/angular-application.js ***!
  \***********************************/
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {

eval("const AccountPageController = __webpack_require__(/*! ./page-controller/account-controller */ \"./js/page-controller/account-controller.js\");\r\nconst ArtifactPageController = __webpack_require__(/*! ./page-controller/artifact-controller */ \"./js/page-controller/artifact-controller.js\");\r\nconst FrontPageController = __webpack_require__(/*! ./page-controller/frontpage-controller */ \"./js/page-controller/frontpage-controller.js\");\r\nconst HeaderController = __webpack_require__(/*! ./page-controller/header-controller */ \"./js/page-controller/header-controller.js\");\r\nconst CollectionController = __webpack_require__(/*! ./page-controller/collection-controller */ \"./js/page-controller/collection-controller.js\");\r\nconst CollectionsEditorController = __webpack_require__(/*! ./page-controller/collections-editor-controller */ \"./js/page-controller/collections-editor-controller.js\");\r\nconst GroupPageController = __webpack_require__(/*! ./page-controller/group-controller */ \"./js/page-controller/group-controller.js\");\r\nconst ProfileController = __webpack_require__(/*! ./page-controller/profile-controller */ \"./js/page-controller/profile-controller.js\");\r\nconst PublishWizardController = __webpack_require__(/*! ./page-controller/publish-wizard-controller */ \"./js/page-controller/publish-wizard-controller.js\");\r\nconst VersionPageController = __webpack_require__(/*! ./page-controller/version-controller */ \"./js/page-controller/version-controller.js\");\r\nconst UserSettingsController = __webpack_require__(/*! ./page-controller/user-settings-controller */ \"./js/page-controller/user-settings-controller.js\");\r\nconst DatabusCollectionManager = __webpack_require__(/*! ./collections/databus-collection-manager */ \"./js/collections/databus-collection-manager.js\");\r\nconst SearchManager = __webpack_require__(/*! ./search/search-manager */ \"./js/search/search-manager.js\");\r\nconst SearchController = __webpack_require__(/*! ./components/search/search-controller */ \"./js/components/search/search-controller.js\");\r\nconst DatabusAlertController = __webpack_require__(/*! ./components/databus-alert/databus-alert-controller */ \"./js/components/databus-alert/databus-alert-controller.js\");\r\nconst EntityCardController = __webpack_require__(/*! ./components/entity-card/entity-card */ \"./js/components/entity-card/entity-card.js\");\r\nconst OverrideCheckboxController = __webpack_require__(/*! ./components/override-checkbox/override-checkbox */ \"./js/components/override-checkbox/override-checkbox.js\");\r\nconst AutofillDropdownController = __webpack_require__(/*! ./components/autofill-dropdown/autofill-dropdown */ \"./js/components/autofill-dropdown/autofill-dropdown.js\");\r\nconst DatabusIconController = __webpack_require__(/*! ./components/databus-icon/databus-icon */ \"./js/components/databus-icon/databus-icon.js\");\r\nconst TypeTagController = __webpack_require__(/*! ./components/type-tag/type-tag */ \"./js/components/type-tag/type-tag.js\");\r\nconst CollectionEditorWidgetController = __webpack_require__(/*! ./components/collection-editor-widget/collection-editor-widget */ \"./js/components/collection-editor-widget/collection-editor-widget.js\");\r\nconst CollectionHierarchyControllerTwo = __webpack_require__(/*! ./components/collection-hierarchy-two/collection-hierarchy */ \"./js/components/collection-hierarchy-two/collection-hierarchy.js\");\r\nconst UriBreadcrumbsController = __webpack_require__(/*! ./components/uri-breadcrumbs/uri-breadcrumbs */ \"./js/components/uri-breadcrumbs/uri-breadcrumbs.js\");\r\nconst TableEditorController = __webpack_require__(/*! ./components/table-editor/table-editor */ \"./js/components/table-editor/table-editor.js\");\r\nconst MultiselectDropdownController = __webpack_require__(/*! ./components/multiselect-dropdown/multiselect-dropdown */ \"./js/components/multiselect-dropdown/multiselect-dropdown.js\");\r\nconst FileBrowserController = __webpack_require__(/*! ./components/file-browser/file-browser */ \"./js/components/file-browser/file-browser.js\");\r\nconst FacetsViewController = __webpack_require__(/*! ./components/facets-view/facets-view */ \"./js/components/facets-view/facets-view.js\");\r\nconst ExpandableArrowController = __webpack_require__(/*! ./components/expandable-arrow/expandable-arrow */ \"./js/components/expandable-arrow/expandable-arrow.js\");\r\nconst YasqeTextController = __webpack_require__(/*! ./components/yasqe-text/yasqe-text */ \"./js/components/yasqe-text/yasqe-text.js\");\r\nconst YasrViewController = __webpack_require__(/*! ./components/yasr-view/yasr-view */ \"./js/components/yasr-view/yasr-view.js\");\r\nconst CollectionStatisticsController = __webpack_require__(/*! ./components/collection-statistics/collection-statistics */ \"./js/components/collection-statistics/collection-statistics.js\");\r\nconst CollectionNodeController = __webpack_require__(/*! ./components/collection-node/collection-node */ \"./js/components/collection-node/collection-node.js\");\r\nconst CollectionSearchController = __webpack_require__(/*! ./components/collection-search/collection-search */ \"./js/components/collection-search/collection-search.js\");\r\nconst CollectionStatusController = __webpack_require__(/*! ./components/collection-status/collection-status */ \"./js/components/collection-status/collection-status.js\");\r\nconst CollectionDataTableController = __webpack_require__(/*! ./components/collection-data-table/collection-data-table */ \"./js/components/collection-data-table/collection-data-table.js\");\r\nconst AccountHistoryController = __webpack_require__(/*! ./components/account-history/account-history */ \"./js/components/account-history/account-history.js\");\r\nconst SparqlEditorController = __webpack_require__(/*! ./page-controller/sparql-editor-controller */ \"./js/page-controller/sparql-editor-controller.js\");\r\nconst BetterDropdownController = __webpack_require__(/*! ./components/better-dropdown/better-dropdown */ \"./js/components/better-dropdown/better-dropdown.js\");\r\nconst NavSearchController = __webpack_require__(/*! ./components/nav-search/nav-search-controller */ \"./js/components/nav-search/nav-search-controller.js\");\r\nconst EntityDropdownController = __webpack_require__(/*! ./components/entity-dropdown/entity-dropdown */ \"./js/components/entity-dropdown/entity-dropdown.js\");\r\nconst EntityApiViewController = __webpack_require__(/*! ./components/entity-api-view/entity-api-view */ \"./js/components/entity-api-view/entity-api-view.js\");\r\nconst ErrorNotificationController = __webpack_require__(/*! ./components/error-notification/error-notifcation */ \"./js/components/error-notification/error-notifcation.js\");\r\n\r\nvar databusApplication = angular.module(\"databusApplication\", [])\r\n  .controller(\"HeaderController\", [\"$scope\", \"$http\", \"collectionManager\", HeaderController])\r\n  .factory('collectionManager', [ \"$interval\", \"$http\", function ($interval, $http) { return new DatabusCollectionManager($http, $interval, 'databus_collections'); }])\r\n  .factory('searchManager', [ \"$interval\", \"$http\", function ($interval, $http) { return new SearchManager($http, $interval); }])\r\n  .factory('focus', [\"$timeout\", \"$window\", function ($timeout, $window) {\r\n    return function (id) {\r\n      $timeout(function () {\r\n        var element = $window.document.getElementById(id);\r\n        if (element)\r\n          element.focus();\r\n      });\r\n    };\r\n  }])\r\n  .controller(\"UserSettingsController\", [ \"$scope\", \"$http\", \"$sce\", \"$location\", UserSettingsController])\r\n  .controller(\"HeaderController\", [\"$scope\", \"$http\", \"collectionManager\", \"searchManager\", HeaderController])\r\n  .controller(\"AccountPageController\", [\"$scope\", \"$http\", \"$location\", \"collectionManager\", AccountPageController])\r\n  .controller(\"FrontPageController\", [\"$scope\", \"$sce\", \"$http\", FrontPageController])\r\n  .controller(\"ArtifactPageController\", [\"$scope\", \"$http\", \"$sce\", \"$location\", \"collectionManager\", ArtifactPageController])\r\n  .controller(\"CollectionController\", [\"$scope\", \"$sce\", \"$http\", \"collectionManager\", CollectionController])\r\n  .controller(\"CollectionsEditorController\", [\"$scope\", \"$timeout\", \"$http\", \"$location\", \"collectionManager\", CollectionsEditorController])\r\n  .controller(\"GroupPageController\", [\"$scope\", \"$http\", \"$sce\", \"$interval\", \"$location\", \"collectionManager\", GroupPageController])\r\n  .controller(\"ProfileController\", [\"$scope\", \"$http\", ProfileController])\r\n  .controller(\"SparqlEditorController\", [\"$scope\", \"$http\", \"$location\", SparqlEditorController])\r\n  .controller(\"PublishWizardController\", [\"$scope\", \"$http\", \"$interval\", \"focus\", \"$q\", \"$location\", PublishWizardController])\r\n  .controller(\"VersionPageController\", [\"$scope\", \"$http\", \"$sce\", \"$location\", \"collectionManager\", VersionPageController])\r\n  .directive('uploadRanking', function () {\r\n    return {\r\n      restrict: 'E',\r\n      replace: true,\r\n      templateUrl: '/website/templates/upload-ranking.html',\r\n      scope: {\r\n        data: '=data'\r\n      }\r\n    }\r\n  });\r\n \r\nfunction config($locationProvider) {\r\n  $locationProvider.html5Mode({\r\n    enabled: true,\r\n    requireBase: false,\r\n    rewriteLinks: false\r\n  });\r\n};\r\n\r\ndatabusApplication.filter('collectionfilter', function() {\r\n  return function(input, search) {\r\n    if (!input) return input;\r\n    \r\n    var expected = '';\r\n\r\n    if (search != null) {\r\n      expected = ('' + search).toLowerCase();\r\n    }\r\n\r\n    var result = [];\r\n\r\n    angular.forEach(input, function(value, key) {\r\n      if(value.title == undefined) {\r\n        return;\r\n      }\r\n      \r\n      if(value.title.toLowerCase().includes(expected)) {\r\n        result.push(value); \r\n      }\r\n    });\r\n\r\n    return result;\r\n  }\r\n});\r\n\r\ndatabusApplication.config(['$locationProvider', config]);\r\n\r\n// Components\r\ndatabusApplication.component('overrideCheckbox', {\r\n  templateUrl: '/js/components/override-checkbox/override-checkbox.html',\r\n  controller: OverrideCheckboxController,\r\n  bindings: {\r\n    checkValue: '<',\r\n    label: '<',\r\n    id: '<',\r\n    readonly: '<',\r\n    isOverride: '<',\r\n    onChange: '&'\r\n  }\r\n});\r\n\r\ndatabusApplication.component('errorTag', {\r\n  controller: ErrorNotificationController,\r\n  templateUrl: '/js/components/error-notification/error-notification.html',\r\n  bindings: {\r\n    entity: '<',\r\n    key: '@',\r\n    texts: '<'\r\n  }\r\n});\r\n\r\ndatabusApplication.component('entityDropdown', {\r\n  bindings: {\r\n    placeholder: '@',\r\n    items: '<',\r\n    displayProperty: '@',\r\n    loading: '<',\r\n    selected: '<',\r\n    onSelect: '&'\r\n  },\r\n  controller: EntityDropdownController,\r\n  templateUrl: '/js/components/entity-dropdown/entity-dropdown.html'\r\n});\r\n\r\ndatabusApplication.component('entityApiView', {\r\n    bindings: {\r\n      entity: '<',\r\n      apiKeys: '<',\r\n      texts: '<',\r\n      publishLog: '<'\r\n    },\r\n    controller: EntityApiViewController,\r\n    templateUrl: '/js/components/entity-api-view/entity-api-view.html'\r\n  });\r\n\r\n\r\n\r\ndatabusApplication.component('accountHistory', {\r\n  templateUrl: '/js/components/account-history/account-history.html',\r\n  controller: [ '$http', AccountHistoryController ],\r\n  bindings: {\r\n    accountName: '<'\r\n  }\r\n});\r\n\r\n// Components\r\ndatabusApplication.component('databusAlert', {\r\n  templateUrl: '/js/components/databus-alert/databus-alert.html',\r\n  controller: [ '$scope', '$timeout', DatabusAlertController ],\r\n});\r\n\r\ndatabusApplication.component('entityCard', {\r\n  templateUrl: '/js/components/entity-card/entity-card.html',\r\n  controller: ['$sce', EntityCardController ],\r\n  bindings: {\r\n    label: '<',\r\n    uri: '<',\r\n    desc: '<',\r\n    date: '<',\r\n    type: '<',\r\n    imageUrl: '<',\r\n    absolute: '<'\r\n  }\r\n});\r\n\r\ndatabusApplication.component('search', {\r\n  templateUrl: '/js/components/search/search.html',\r\n  controller: ['$http', '$interval', '$sce', 'searchManager', SearchController],\r\n  bindings: {\r\n    searchInput: '=',\r\n    settings: '<',\r\n  }\r\n});\r\n\r\n\r\ndatabusApplication.component('navSearch', {\r\n  templateUrl: '/js/components/nav-search/nav-search.html',\r\n  controller: ['$http', '$interval', '$sce', 'searchManager', NavSearchController],\r\n  bindings: {\r\n    searchInput: '=',\r\n    settings: '<',\r\n  }\r\n});\r\n\r\n/*\r\ndatabusApplication.component('databusSearch', {\r\n  templateUrl: '/js/components/databus-search/databus-search.html',\r\n  controller: ['$http', '$interval', '$sce', DatabusSearchController],\r\n  bindings: {\r\n    filters: '=',\r\n    input: '='\r\n  }\r\n});*/\r\n\r\ndatabusApplication.component('autofillDropdown', {\r\n  templateUrl: '/js/components/autofill-dropdown/autofill-dropdown.html',\r\n  controller: ['$timeout', AutofillDropdownController ],\r\n  bindings: {\r\n    input: '=',\r\n    values: '<',\r\n    isDisabled: '<',\r\n    placeholder: '@',\r\n    onChange: '&'\r\n  }\r\n});\r\n\r\n\r\ndatabusApplication.component('databusIcon', {\r\n  templateUrl: '/js/components/databus-icon/databus-icon.html',\r\n  controller: DatabusIconController,\r\n  bindings: {\r\n    size: '<',\r\n    shape: '<',\r\n    onClick: '&',\r\n    isClickable: '<',\r\n    color: '<'\r\n  }\r\n});\r\n\r\ndatabusApplication.component('typeTag', {\r\n  templateUrl: '/js/components/type-tag/type-tag.html',\r\n  controller: TypeTagController,\r\n  bindings: {\r\n    type: '<',\r\n    height: '<',\r\n    width: '<',\r\n  }\r\n});\r\n\r\n/*\r\n\r\ndatabusApplication.component('collectionEditor', {\r\n  templateUrl: '/js/components/collection-editor/collection-editor.html',\r\n  controller: ['$http', '$location', '$sce', CollectionEditorController],\r\n  bindings: {\r\n    collection: '=',\r\n    readonly: '<',\r\n    onPublish: '&',\r\n    onDelete: '&',\r\n    loggedIn: '<'\r\n  }\r\n});*/\r\n\r\ndatabusApplication.component('collectionEditorWidget', {\r\n  templateUrl: '/js/components/collection-editor-widget/collection-editor-widget.html',\r\n  controller: ['collectionManager', '$scope', CollectionEditorWidgetController ],\r\n  bindings: {\r\n    selection: '<',\r\n    collection: '=',\r\n  }\r\n});\r\n\r\n/*\r\ndatabusApplication.component('collectionHierarchy', {\r\n  templateUrl: '/js/components/collection-hierarchy/collection-hierarchy.html',\r\n  controller: ['$http', '$location', '$sce', CollectionHierarchyController],\r\n  bindings: {\r\n    collection: '=',\r\n    readonly: '<',\r\n    onPublish: '&',\r\n    onDelete: '&',\r\n    loggedIn: '<',\r\n    onChange: '&'\r\n  }\r\n});*/\r\n\r\ndatabusApplication.component('collectionHierarchyTwo', {\r\n  templateUrl: '/js/components/collection-hierarchy-two/collection-hierarchy.html',\r\n  controller: ['$http', '$location', '$sce', '$scope', 'collectionManager', CollectionHierarchyControllerTwo ],\r\n  bindings: {\r\n    collection: '=',\r\n    onChange: '&',\r\n    onAddContent: '&'\r\n  }\r\n});\r\n\r\ndatabusApplication.component('collectionNode', {\r\n  templateUrl: '/js/components/collection-node/collection-node.html',\r\n  controller: CollectionNodeController,\r\n  bindings: {\r\n    node: '<',\r\n    readonly: '<',\r\n    onRemoveNode: '&',\r\n    onClick: '&',\r\n    count: '<',\r\n    isExpandable: '<'\r\n  }\r\n});\r\n\r\ndatabusApplication.component('collectionSearch', {\r\n  templateUrl: '/js/components/collection-search/collection-search.html',\r\n  controller: ['collectionManager', '$http', '$interval', '$sce', CollectionSearchController ],\r\n  bindings: {\r\n    collection: '=',\r\n    targetDatabusUrl: '<',\r\n    onComponentAdded: '&'\r\n  }\r\n});\r\n\r\ndatabusApplication.component('collectionStatistics', {\r\n  templateUrl: '/js/components/collection-statistics/collection-statistics.html',\r\n  controller: ['$http', '$scope', '$location', '$sce', CollectionStatisticsController ],\r\n  bindings: {\r\n    collection: '<'\r\n  }\r\n});\r\n\r\ndatabusApplication.component('collectionStatus', {\r\n  templateUrl: '/js/components/collection-status/collection-status.html',\r\n  controller: ['$http', '$location', '$sce', CollectionStatusController ],\r\n  bindings: {\r\n    hasLocalChanges: '<',\r\n    isPublished: '<',\r\n    isDraft: '<',\r\n  }\r\n});\r\n\r\n/*\r\n\r\ndatabusApplication.component('editLabel', {\r\n  templateUrl: '/js/components/edit-label/edit-label.html',\r\n  controller: ['$element', EditLabelController],\r\n  bindings: {\r\n    text: '=',\r\n    singleLine: '<',\r\n    onBlur: '&',\r\n    onChange: '&'\r\n  }\r\n});*/\r\n\r\ndatabusApplication.component('expandableArrow', {\r\n  templateUrl: '/js/components/expandable-arrow/expandable-arrow.html',\r\n  controller: ExpandableArrowController,\r\n  bindings: {\r\n    expanded: '=',\r\n    onChange: '&',\r\n    isReadonly: '<'\r\n  }\r\n});\r\n\r\ndatabusApplication.component('facetsView', {\r\n  templateUrl: '/js/components/facets-view/facets-view.html',\r\n  controller: ['$http', '$scope', FacetsViewController ],\r\n  bindings: {\r\n    node: '=',\r\n    readonly: '<',\r\n    resourceType: '@',\r\n    onChange: '&',\r\n    onLoaded: '&'\r\n  }\r\n});\r\n\r\ndatabusApplication.component('facetsViewHorizontal', {\r\n  templateUrl: '/js/components/facets-view/facets-view-horizontal.html',\r\n  controller: ['$http', '$scope', FacetsViewController ],\r\n  bindings: {\r\n    node: '=',\r\n    readonly: '<',\r\n    resourceType: '@',\r\n    onChange: '&',\r\n    onLoaded: '&'\r\n  }\r\n});\r\n\r\ndatabusApplication.component('fileBrowser', {\r\n  templateUrl: '/js/components/file-browser/file-browser.html',\r\n  controller: ['$http', '$scope', FileBrowserController ],\r\n  bindings: {\r\n    resourceUri: '<',\r\n    resourceType: '@',\r\n    node: '<',\r\n    facetSettings: '<',\r\n    parentFacetSettings: '<',\r\n    query: '<',\r\n    fullQuery: '<',\r\n    config: '<'\r\n  }\r\n});\r\n\r\n/*\r\n\r\ndatabusApplication.component('multiselectArtifactDropdown', {\r\n  templateUrl: '/js/components/multiselect-artifact-dropdown/multiselect-artifact-dropdown.html',\r\n  controller: ['$timeout', '$sce', MultiselectArtifactDropdownController],\r\n  bindings: {\r\n    data: '<',\r\n    node: '<',\r\n    values: '<',\r\n    isDisabled: '<',\r\n    icon: '<',\r\n    onChange: '&'\r\n  }\r\n});*/\r\n\r\ndatabusApplication.component('multiselectDropdown', {\r\n  templateUrl: '/js/components/multiselect-dropdown/multiselect-dropdown.html',\r\n  controller: ['$timeout', '$sce', MultiselectDropdownController],\r\n  bindings: {\r\n    parentInput: '<',\r\n    input: '=',\r\n    values: '<',\r\n    isDisabled: '<',\r\n    placeholder: '@',\r\n    onChange: '&'\r\n  }\r\n});\r\n\r\ndatabusApplication.component('tableEditor', {\r\n  templateUrl: '/js/components/table-editor/table-editor.html',\r\n  controller: TableEditorController,\r\n  bindings: {\r\n    model: '=',\r\n    onRemoveFile: '&',\r\n    onEditContentVariant: '&',\r\n    onAnalyzeFile: '&',\r\n    analysisProcesses: '<'\r\n  }\r\n});\r\n\r\ndatabusApplication.component('uriBreadcrumbs', {\r\n  templateUrl: '/js/components/uri-breadcrumbs/uri-breadcrumbs.html',\r\n  controller: UriBreadcrumbsController,\r\n  bindings: {\r\n    uri: '<',\r\n    absolute: '<'\r\n  }\r\n});\r\n\r\n\r\ndatabusApplication.component('yasqeText', {\r\n  templateUrl: '/js/components/yasqe-text/yasqe-text.html',\r\n  controller: ['$scope', '$element', YasqeTextController ],\r\n  bindings: {\r\n    query: '=',\r\n    autoSize: '<',\r\n    readOnly: '<',\r\n    onChange: '&',\r\n    onSend: '&',\r\n    hasSend: '<'\r\n  }\r\n});\r\n\r\ndatabusApplication.component('betterDropdown', {\r\n  templateUrl: '/js/components/better-dropdown/better-dropdown.html',\r\n  controller: ['$scope', '$interval', '$element', BetterDropdownController ],\r\n  bindings: {\r\n    rootNode: '=',\r\n    onNodeClicked: '&',\r\n    icon: '<',\r\n    label: '<'\r\n  }\r\n});\r\n\r\n\r\ndatabusApplication.component('yasrView', {\r\n  templateUrl: '/js/components/yasr-view/yasr-view.html',\r\n  controller: ['$scope', '$element', YasrViewController ],\r\n  bindings: {\r\n    data: '=',\r\n    autoSize: '<',\r\n    readOnly: '<',\r\n    onChange: '&'\r\n  }\r\n});\r\n\r\ndatabusApplication.component('collectionDataTable', {\r\n  templateUrl: '/js/components/collection-data-table/collection-data-table.html',\r\n  controller: ['$http', '$scope', '$location', '$sce', CollectionDataTableController],\r\n  bindings: {\r\n    collection: '<'\r\n  }\r\n});\r\n\r\n\r\ndatabusApplication.directive('selectOnClick', ['$window', function ($window) {\r\n  return {\r\n    restrict: 'A',\r\n    link: function (scope, element, attrs) {\r\n      element.on('click', function () {\r\n        if (!$window.getSelection().toString() && this.readonly == false) {\r\n          // Required for mobile Safari\r\n          this.setSelectionRange(0, this.value.length)\r\n        }\r\n      });\r\n    }\r\n  };\r\n}]);\r\n\r\ndatabusApplication.directive('focusMe', ['$timeout', '$parse', function ($timeout, $parse) {\r\n  return {\r\n    //scope: true,   // optionally create a child scope\r\n    link: function (scope, element, attrs) {\r\n      var model = $parse(attrs.focusMe);\r\n      scope.$watch(model, function (value) {\r\n        if (value === true) {\r\n          $timeout(function () {\r\n            element[0].focus();\r\n          });\r\n        }\r\n      });\r\n    }\r\n  };\r\n}]);\r\n\r\ndatabusApplication.directive('eventFocus', function (focus) {\r\n  return function (scope, elem, attr) {\r\n    elem.on(attr.eventFocus, function () {\r\n      focus(attr.eventFocusId);\r\n    });\r\n\r\n    // Removes bound events in the element itself\r\n    // when the scope is destroyed\r\n    scope.$on('$destroy', function () {\r\n      elem.off(attr.eventFocus);\r\n    });\r\n  };\r\n});\r\n\r\n\r\n\r\ndatabusApplication.directive('uploaderRanking', function () {\r\n  return {\r\n    restrict: 'E',\r\n    replace: true,\r\n    template: '<div><table class=\"table is-size-6 is-fullwidth\"><thead><tr><th>User</th><th>Uploads</th><th>Derived Data</th></tr></thead><tbody><tr ng-repeat=\"row in data\"><td><a href=\"{{ row.accountUri }}\">{{ row.account }}</a></td><td>{{ row.numUploads }}</td><td>{{ row.uploadSize }}</td></tr></tbody></table></div>',\r\n    scope: {\r\n      data: '=data',\r\n    }\r\n  }\r\n});\r\n\r\n\r\ndatabusApplication.directive('groupsTable', function () {\r\n  return {\r\n    restrict: 'E',\r\n    replace: true,\r\n    template: '<div><table class=\"table is-size-6 is-fullwidth\"><thead><tr><th>Group Id</th><th># Artifacts</th></tr></thead><tbody><tr ng-repeat=\"row in data\"><td><a href=\"{{ row.uri }}\">{{ row.label }}</a></td><td>{{ row.artifactCount }}</td></tr></tbody></table></div>',\r\n    scope: {\r\n      data: '=data',\r\n    }\r\n  }\r\n});\r\n\r\n\r\ndatabusApplication.directive('activityChart', function () {\r\n  return {\r\n    restrict: 'E',\r\n    replace: true,\r\n    template: '<svg class=\"chart\"></svg>',\r\n    scope: {\r\n      data: '=data',\r\n      height: '=height'\r\n    },\r\n    link: function (scope, element, attrs) {\r\n\r\n      var svgHeight = scope.height;\r\n\r\n      for (d in scope.data) {\r\n        scope.data[d].date = new Date(scope.data[d].date);\r\n      }\r\n\r\n      var svg = d3.select(element[0])\r\n        .attr(\"id\", \"graph\")\r\n        .attr(\"width\", \"107%\")\r\n        .attr(\"height\", svgHeight);\r\n\r\n      var bounds = svg.node().getBoundingClientRect();\r\n      var svgWidth = bounds.width;\r\n\r\n      var margin = { top: 20, right: 50, bottom: 60, left: 50 };\r\n      var width = svgWidth - margin.left - margin.right;\r\n      var height = svgHeight - margin.top - margin.bottom;\r\n\r\n      var g = svg.append(\"g\")\r\n        .attr(\"transform\",\r\n          \"translate(\" + margin.left + \",\" + margin.top + \")\"\r\n        );\r\n\r\n      var x = d3.scaleTime().rangeRound([0, width]);\r\n      var y = d3.scaleLinear().rangeRound([height, 0]);\r\n\r\n      var line = d3.line()\r\n        .x(function (d) { return x(d.date) })\r\n        .y(function (d) { return y(d.value) })\r\n\r\n      x.domain(d3.extent(scope.data, function (d) { return d.date }));\r\n      y.domain(d3.extent(scope.data, function (d) { return d.value }));\r\n\r\n      g.append(\"g\")\r\n        .attr(\"transform\", \"translate(0,\" + height + \")\")\r\n        .call(d3.axisBottom(x))\r\n        .selectAll(\"text\")\r\n        .attr(\"y\", 0)\r\n        .attr(\"x\", 9)\r\n        .attr(\"dy\", \".35em\")\r\n        .attr(\"transform\", \"rotate(90)\")\r\n        .style(\"text-anchor\", \"start\");\r\n\r\n      g.append(\"g\")\r\n        .call(d3.axisLeft(y))\r\n        .append(\"text\")\r\n        .attr(\"fill\", \"#000\")\r\n        .attr(\"transform\", \"rotate(-90)\")\r\n        .attr(\"y\", 6)\r\n        .attr(\"dy\", \"1em\")\r\n        .attr(\"font-size\", \"1.1em\")\r\n        .attr(\"text-anchor\", \"end\")\r\n        .text(\"Uploaded Data (GByte)\");\r\n\r\n      var path = g.append(\"path\")\r\n        .datum(scope.data)\r\n        .attr(\"fill\", \"none\")\r\n        .attr(\"stroke\", \"steelblue\")\r\n        .attr(\"stroke-linejoin\", \"round\")\r\n        .attr(\"stroke-linecap\", \"round\")\r\n        .attr(\"stroke-width\", 2)\r\n        .attr(\"d\", line);\r\n    }\r\n  }\r\n});\r\n\r\ndatabusApplication.directive('onFinishRender', ['$timeout', '$parse', function ($timeout, $parse) {\r\n  return {\r\n    restrict: 'A',\r\n    link: function (scope, element, attr) {\r\n      if (scope.$last === true) {\r\n        $timeout(function () {\r\n          scope.$emit('ngRepeatFinished');\r\n          if (!!attr.onFinishRender) {\r\n            $parse(attr.onFinishRender)(scope);\r\n          }\r\n        });\r\n      }\r\n    }\r\n  }\r\n}]);\r\n\r\ndatabusApplication.directive('clickOutside', [\r\n  '$document', '$parse', '$timeout',\r\n  clickOutside\r\n]);\r\n\r\n/**\r\n     * @ngdoc directive\r\n     * @name angular-click-outside.directive:clickOutside\r\n     * @description Directive to add click outside capabilities to DOM elements\r\n     * @requires $document\r\n     * @requires $parse\r\n     * @requires $timeout\r\n     **/\r\n function clickOutside($document, $parse, $timeout) {\r\n  return {\r\n      restrict: 'A',\r\n      link: function($scope, elem, attr) {\r\n\r\n          // postpone linking to next digest to allow for unique id generation\r\n          $timeout(function() {\r\n              var classList = (attr.outsideIfNot !== undefined) ? attr.outsideIfNot.split(/[ ,]+/) : [],\r\n                  fn;\r\n\r\n              function eventHandler(e) {\r\n                  var i,\r\n                      element,\r\n                      r,\r\n                      id,\r\n                      classNames,\r\n                      l;\r\n\r\n                  // check if our element already hidden and abort if so\r\n                  if (angular.element(elem).hasClass(\"ng-hide\")) {\r\n                      return;\r\n                  }\r\n\r\n                  // if there is no click target, no point going on\r\n                  if (!e || !e.target) {\r\n                      return;\r\n                  }\r\n\r\n                  // loop through the available elements, looking for classes in the class list that might match and so will eat\r\n                  for (element = e.target; element; element = element.parentNode) {\r\n                      // check if the element is the same element the directive is attached to and exit if so (props @CosticaPuntaru)\r\n                      if (element === elem[0]) {\r\n                          return;\r\n                      }\r\n                      \r\n                      // now we have done the initial checks, start gathering id's and classes\r\n                      id = element.id,\r\n                      classNames = element.className,\r\n                      l = classList.length;\r\n\r\n                      // Unwrap SVGAnimatedString classes\r\n                      if (classNames && classNames.baseVal !== undefined) {\r\n                          classNames = classNames.baseVal;\r\n                      }\r\n\r\n                      // if there are no class names on the element clicked, skip the check\r\n                      if (classNames || id) {\r\n\r\n                          // loop through the elements id's and classnames looking for exceptions\r\n                          for (i = 0; i < l; i++) {\r\n                              //prepare regex for class word matching\r\n                              r = new RegExp('\\\\b' + classList[i] + '\\\\b');\r\n\r\n                              // check for exact matches on id's or classes, but only if they exist in the first place\r\n                              if ((id !== undefined && id === classList[i]) || (classNames && r.test(classNames))) {\r\n                                  // now let's exit out as it is an element that has been defined as being ignored for clicking outside\r\n                                  return;\r\n                              }\r\n                          }\r\n                      }\r\n                  }\r\n\r\n                  // if we have got this far, then we are good to go with processing the command passed in via the click-outside attribute\r\n                  $timeout(function() {\r\n                      fn = $parse(attr['clickOutside']);\r\n                      fn($scope, { event: e });\r\n                  });\r\n              }\r\n\r\n              // if the devices has a touchscreen, listen for this event\r\n              if (_hasTouch()) {\r\n                  $document.on('touchstart', eventHandler);\r\n              }\r\n\r\n              // still listen for the click event even if there is touch to cater for touchscreen laptops\r\n              $document.on('click', eventHandler);\r\n\r\n              // when the scope is destroyed, clean up the documents event handlers as we don't want it hanging around\r\n              $scope.$on('$destroy', function() {\r\n                  if (_hasTouch()) {\r\n                      $document.off('touchstart', eventHandler);\r\n                  }\r\n\r\n                  $document.off('click', eventHandler);\r\n              });\r\n\r\n              /**\r\n               * @description Private function to attempt to figure out if we are on a touch device\r\n               * @private\r\n               **/\r\n              function _hasTouch() {\r\n                  // works on most browsers, IE10/11 and Surface\r\n                  return 'ontouchstart' in window || navigator.maxTouchPoints;\r\n              };\r\n          });\r\n      }\r\n  };\r\n}\r\n\n\n//# sourceURL=webpack://databus-webapp/./js/angular-application.js?");

/***/ }),

/***/ "./js/collections/databus-collection-manager.js":
/*!******************************************************!*\
  !*** ./js/collections/databus-collection-manager.js ***!
  \******************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("const AppJsonFormatter = __webpack_require__(/*! ../utils/app-json-formatter */ \"./js/utils/app-json-formatter.js\");\r\nconst DatabusUris = __webpack_require__(/*! ../utils/databus-uris */ \"./js/utils/databus-uris.js\");\r\nconst DatabusUtils = __webpack_require__(/*! ../utils/databus-utils */ \"./js/utils/databus-utils.js\");\r\nconst DatabusCollectionUtils = __webpack_require__(/*! ./databus-collection-utils */ \"./js/collections/databus-collection-utils.js\");\r\nconst DatabusCollectionWrapper = __webpack_require__(/*! ./databus-collection-wrapper */ \"./js/collections/databus-collection-wrapper.js\");\r\n\r\nclass DatabusCollectionManager {\r\n\r\n  // Daten die wir haben:\r\n\r\n  // Liste von Remote Collections (ungeladen) { uri: databus.org/asdf, label: asdffasd }\r\n  // Liste von Working Copies in der Local Storage\r\n  // Beispiel:\r\n  // [0] : { uri: databus.org/asdf, label: asdffasd, content: { ... }, ... }\r\n  // [1] : { uri: databus.org/asdsdff, label: asdasdfffasd }\r\n\r\n\r\n\r\n  // On Initizialze:\r\n  // Fuer alle remove collections -> finde lokale Kopie / erzeuge lokale Kopie\r\n\r\n  // On Select / On Set Active\r\n  // 1: Ist es ein Draft -> uri ist undefined\r\n  // Ja? -> Collection direkt als Draft Anzeigen\r\n  // Nein? -> Ist Collection schon geladen? content ist nicht undefined\r\n  //          Ja? -> Lade async, uberschreibe remote entry\r\n  //          Nein? -> Lade async, setze remote und local entry\r\n\r\n  constructor($http, $interval, storageKey) {\r\n\r\n    try {\r\n      this.storageKeyPrefix = `${encodeURI(DATABUS_RESOURCE_BASE_URL)}`;\r\n      // window.sessionStorage.removeItem(`${this.storageKeyPrefix}_session`);\r\n\r\n      this.sessionInfo = JSON.parse(window.sessionStorage.getItem(`${this.storageKeyPrefix}_session`));\r\n\r\n      if (this.sessionInfo == undefined) {\r\n        this.sessionInfo = {};\r\n      }\r\n\r\n      window.sessionStorage.setItem(`${this.storageKeyPrefix}_session`, JSON.stringify(this.sessionInfo));\r\n      this.storageKey = `${this.storageKeyPrefix}__collections`;\r\n      this.local = this.loadCollectionsFromStorage(true);\r\n      this.remote = {};\r\n\r\n    } catch (err) {\r\n      this.sessionInfo = {};\r\n    }\r\n\r\n\r\n    this.http = $http;\r\n    this.interval = $interval;\r\n  }\r\n\r\n  clearSession() {\r\n    this.sessionInfo = {};\r\n    window.sessionStorage.setItem(`${this.storageKeyPrefix}_session`, JSON.stringify(this.sessionInfo));\r\n  }\r\n\r\n  get accountName() {\r\n    return this.sessionInfo != undefined ? this.sessionInfo.accountName : undefined;\r\n  }\r\n\r\n  getLocalCollectionByUri(uri) {\r\n    for (let guid in this.local) {\r\n      let localCollection = this.local[guid];\r\n\r\n      if (localCollection.uri == uri) {\r\n        return localCollection;\r\n      }\r\n    }\r\n\r\n    return undefined;\r\n  }\r\n\r\n  /**\r\n   * Set up the collection mananger for a specific account.\r\n   * 1) Load ALL the collections of this account from the remote\r\n   * 2) Save to remote map\r\n   * 3) Create local working copies if local has no entry for remote collection\r\n   * @param {*} accountName \r\n   * @returns \r\n   */\r\n  async tryInitialize(accountName) {\r\n\r\n    // Needs an account name to set up\r\n    if (accountName == undefined) {\r\n      return;\r\n    }\r\n\r\n    // this.remote = this.loadCollectionsFromStorage(false);\r\n    this.sessionInfo.accountName = accountName;\r\n\r\n\r\n    let collectionListResponse = await this.http.get(`/app/account/collections?account=${encodeURIComponent(accountName)}`);\r\n    let remoteCollections = collectionListResponse.data;\r\n\r\n    for (let collectionUri in remoteCollections) {\r\n      let remoteCollection = remoteCollections[collectionUri];\r\n      let localCollection = this.getLocalCollectionByUri(collectionUri);\r\n\r\n      // Create local copy if not exist\r\n      if(localCollection == undefined) {\r\n        localCollection = JSON.parse(JSON.stringify(remoteCollection));\r\n        localCollection.uuid = DatabusCollectionUtils.uuidv4();\r\n        this.local[localCollection.uuid] = localCollection;\r\n      }\r\n      \r\n      this.remote[localCollection.uuid] = remoteCollection;\r\n      this.remote[localCollection.uuid].isHidden = this.remote[localCollection.uuid].issued == undefined;\r\n\r\n    }\r\n\r\n/*\r\n    try {\r\n\r\n      for (let guid in this.local) {\r\n        let localCollection = this.local[guid];\r\n\r\n        if (localCollection.accountName == undefined) {\r\n          // Delete from local\r\n        }\r\n\r\n        // Ignore local collections not related to this account\r\n        if (localCollection.accountName != accountName) {\r\n          continue;\r\n        }\r\n\r\n        // Unpublished local collections remain unpublished local collections\r\n        if (localCollection.uri == undefined) {\r\n          continue;\r\n        }\r\n\r\n        var res = await this.http.get(localCollection.uri, {\r\n          headers: {\r\n            \"Accept\": \"application/ld+json\",\r\n            \"X-Jsonld-Formatting\": \"flatten\"\r\n          }\r\n        });\r\n\r\n        let collectionData = AppJsonFormatter.formatCollectionData(res.data);\r\n        this.remote[guid] = collectionData;\r\n\r\n        this.local[guid].issued = this.remote[guid].issued;\r\n\r\n        //this.initialize(res.data);\r\n\r\n      }\r\n\r\n    } catch (e) {\r\n      console.log(`Failed to initialze collection manager.`);\r\n      console.log(e);\r\n    } */\r\n\r\n\r\n    this.findActive();\r\n\r\n    /*\r\n\r\n    if (loadFromServer) {\r\n      try {\r\n        var res = await this.http.get(`/app/account/collections?account=${accountName}`);\r\n        this.initialize(res.data);\r\n\r\n      } catch (e) {\r\n        console.log(`Failed to initialze collection manager.`);\r\n        console.log(e);\r\n      }\r\n    }\r\n    */\r\n\r\n    var self = this;\r\n\r\n    this.interval(function () {\r\n      var storageHash = window.localStorage.getItem(`${self.storageKey}_hash`);\r\n\r\n      if (storageHash != self.currentHash) {\r\n        self.local = JSON.parse(window.localStorage.getItem(self.storageKey));\r\n        self.currentHash = storageHash;\r\n\r\n        for (let identifier in self.local) {\r\n          if (identifier === undefined || identifier === \"undefined\") {\r\n            delete (self.local[identifier]);\r\n          } else {\r\n            //enable Collection Utils for all collections in local storage\r\n            self.local[identifier] = new DatabusCollectionWrapper(self.local[identifier]);\r\n          }\r\n        }\r\n\r\n        if (self.onCollectionChangedInDifferentTab != null) {\r\n          self.onCollectionChangedInDifferentTab();\r\n        }\r\n      }\r\n    }, 300);\r\n  }\r\n\r\n  get isInitialized() {\r\n    return this.accountName != null;\r\n  }\r\n\r\n  // Setze das remote array und update local array\r\n  initialize(remoteCollections) {\r\n    // We keep remote entries and local entries separately to detect diffs\r\n    this.remote = {};\r\n\r\n    // Load everyting from the local browser storage. All entries in the local browser\r\n    // storage are indexed with a UUID identifier.\r\n    // Remote collections that are pulled to the local browser storage will\r\n    // also be given such an identifier\r\n    // this.local = this.loadCollectionsFromLocalStorage();\r\n\r\n    // This map will keep track of all local entries that already claim to have a remote counterpart\r\n    let localPublished = {};\r\n\r\n    for (let identifier in this.local) {\r\n      if (!identifier.startsWith('___')) {\r\n        delete this.local[identifier];\r\n        continue;\r\n      }\r\n\r\n      if (identifier !== this.local[identifier].uuid) {\r\n        delete this.local[identifier];\r\n        continue;\r\n      }\r\n\r\n      let localCollection = this.local[identifier];\r\n\r\n      if (localCollection.uri !== undefined && remoteCollections !== undefined) {\r\n        let uri = localCollection.uri;\r\n        // The local collection already has a URI\r\n        if (remoteCollections[uri] === undefined) {\r\n          // There is no remote collection with that URI - delete it! Keep the collection as a draft\r\n          delete (this.local[identifier].uri);\r\n          delete (this.local[identifier].issued);\r\n          delete (this.local[identifier].created);\r\n        } else {\r\n          // Remember that the collection with uri already has a working copy\r\n          localPublished[uri] = true;\r\n          // Also remember the remote entry as an entry with a local working copy\r\n          this.remote[identifier] = remoteCollections[uri];\r\n          // Make sure the unchangeable values are set to the remote entry\r\n          this.local[identifier].publisher = remoteCollections[uri].publisher;\r\n          this.local[identifier].issued = remoteCollections[uri].issued;\r\n          this.local[identifier].created = remoteCollections[uri].created;\r\n          this.local[identifier].files = remoteCollections[uri].files;\r\n        }\r\n      }\r\n    }\r\n\r\n    for (let uri in remoteCollections) {\r\n      if (localPublished[uri] === undefined) {\r\n        // We don't have a working copy in our local storage yet, time to create an identifier!\r\n        let identifier = DatabusCollectionUtils.uuidv4();\r\n        remoteCollections[uri].uuid = identifier;\r\n        remoteCollections[uri].isHidden = remoteCollections[uri].issued == undefined;\r\n        // Create two entries, one in the local map, one in the remote map\r\n        this.local[identifier] = DatabusCollectionUtils.createCleanCopy(remoteCollections[uri]);\r\n        this.remote[identifier] = DatabusCollectionUtils.createCleanCopy(remoteCollections[uri]);\r\n      }\r\n    }\r\n\r\n    for (let identifier in this.local) {\r\n      // The local collection is now either a draft or a working copy of the remote - wrap it.\r\n      this.local[identifier] = new DatabusCollectionWrapper(this.local[identifier]);\r\n      // Sanitize content\r\n      if (!(this.local[identifier].content instanceof Object)) {\r\n        this.local[identifier].content = { groups: [], customQueries: [] };\r\n      }\r\n    }\r\n\r\n    /*\r\n    let activeIdentifier = this.activeCollectionIdentifier;\r\n    // Set first collection as active\r\n\r\n    if (this.local[activeIdentifier] !== undefined) {\r\n      this.activeCollectionIdentifier = activeIdentifier;\r\n    }\r\n    */\r\n\r\n\r\n\r\n    // QueryNode.assignParents(this.activeCollection.content.root);\r\n\r\n    // Save locally in case we created any local working copies\r\n\r\n    this.saveLocally();\r\n\r\n    // Call this always in header-controller.js\r\n    if (this.activeCollection == null) {\r\n      // select first or create a new draft if we don't have any local drafts yet\r\n      this.selectFirstOrCreate();\r\n    }\r\n\r\n  }\r\n\r\n\r\n\r\n  findActive() {\r\n    if (!this.isInitialized) throw \"Databus-Collection-Manager is not initialized1.\";\r\n    if (this.activeCollection == undefined) {\r\n      this.selectFirstOrCreate();\r\n    }\r\n  }\r\n\r\n\r\n  loadCollectionsFromStorage(local = true) {\r\n    let collections;\r\n\r\n    if (local) {\r\n      collections = JSON.parse(window.localStorage.getItem(this.storageKey));\r\n    } else {\r\n      collections = JSON.parse(window.sessionStorage.getItem(this.storageKey));\r\n    }\r\n\r\n    if (collections == null) {\r\n      collections = {};\r\n    }\r\n\r\n    for (let identifier in collections) {\r\n      if (identifier === undefined || identifier === \"undefined\") {\r\n        delete (collections[identifier]);\r\n      } else if(collections[identifier].accountName == null) {\r\n        delete (collections[identifier]);\r\n      } else {\r\n        //enable Collection Utils for all collections in local storage\r\n        collections[identifier] = new DatabusCollectionWrapper(collections[identifier]);\r\n      }\r\n    }\r\n\r\n    return collections;\r\n  }\r\n\r\n  /**\r\n   * Selects the first collection in the local list or creates a new draft\r\n   */\r\n  selectFirstOrCreate(accountName) {\r\n\r\n    for (let identifier in this.local) {\r\n      this.setActive(identifier);\r\n      break;\r\n    }\r\n\r\n    // Create new collection if current is null\r\n    if (this.activeCollection == null) {\r\n      this.createNew(accountName, \"Unnamed Collection\", \"\", function (response) { });\r\n    }\r\n  }\r\n\r\n  setActive(uuid) {\r\n    if (!this.isInitialized) throw \"Databus-Collection-Manager is not initialized1.\";\r\n\r\n    this.convertCollectionContentToTree(uuid);\r\n\r\n    let collection = this.local[uuid];\r\n    // QueryNode.assignParents(collection.content.root);\r\n\r\n    this.sessionInfo.activeCollectionIdentifier = uuid;\r\n    window.sessionStorage.setItem(`${this.storageKeyPrefix}_session`, JSON.stringify(this.sessionInfo));\r\n\r\n  }\r\n\r\n  get activeCollectionIdentifier() {\r\n    return this.sessionInfo != null ? this.sessionInfo.activeCollectionIdentifier : null;\r\n  }\r\n\r\n  get activeCollection() {\r\n    if (this.activeCollectionIdentifier == null) {\r\n      return null;\r\n    }\r\n\r\n    if (this.local == null) {\r\n      return null;\r\n    }\r\n\r\n    return this.local[this.activeCollectionIdentifier];\r\n  }\r\n\r\n  convertCollectionContentToTree(uuid) {\r\n    let collection = this.local[uuid];\r\n\r\n    if (collection.content.root !== undefined) {\r\n      return;\r\n    }\r\n\r\n    collection.content.root = new QueryNode(null, null);\r\n\r\n    for (var g in collection.content.groups) {\r\n      var group = collection.content.groups[g];\r\n      var groupNode = new QueryNode(group.uri, 'databus:group');\r\n\r\n      // add group facets\r\n      for (var s in group.settings) {\r\n        var setting = group.settings[s];\r\n\r\n        if (setting.value === 'SYSTEM_LATEST_ARTIFACT_VERSION' || setting.value === 'SYSTEM_LATEST_GROUP_VERSION') {\r\n          setting.value = '$latest';\r\n        }\r\n\r\n        groupNode.setFacet(setting.facet, setting.value, setting.checked);\r\n      }\r\n\r\n      collection.content.root.addChild(groupNode);\r\n\r\n\r\n      for (var a in group.artifacts) {\r\n        var artifact = group.artifacts[a];\r\n\r\n        var artifactNode = new QueryNode(artifact.uri, 'databus:artifact');\r\n\r\n        // add artifact facets\r\n\r\n        groupNode.addChild(artifactNode);\r\n      }\r\n    }\r\n\r\n  }\r\n\r\n  createSnapshot(source) { // convert each version=\"latest\" to actual latest version\r\n    if (!this.isInitialized) throw \"Databus-Collection-Manager is not initialized.\";\r\n\r\n    let collection = DatabusCollectionWrapper.createNew();\r\n    collection.accountName = this.accountName;\r\n    collection.content = DatabusCollectionUtils.createCleanCopy(source.content);\r\n\r\n    let root = collection.content.root;\r\n    for (var g in root.childNodes) {\r\n      var graph = root.childNodes[g];\r\n\r\n      for (var s in graph.facetSettings) {\r\n        if (graph.facetSettings[s][0].value === '$latest') {\r\n          this.http.get('/app/utils/facets', {\r\n            params: { uri: artifact.uri, type: 'group' }\r\n          }).then(function (result) {\r\n            let versions = result.data[\"http://purl.org/dc/terms/hasVersion\"].values;\r\n            let latestVersion = versions.reduce(function (a, b) { return a > b ? a : b; });\r\n            artifact.facetSettings[s][0].value = latestVersion;\r\n          });\r\n        }\r\n      }\r\n\r\n      for (var a in graph.childNodes) {\r\n        var artifact = graph.childNodes[a];\r\n\r\n        for (var s in artifact.facetSettings) {\r\n          if (artifact.facetSettings[s][0].value === '$latest') {\r\n            this.http.get('/app/utils/facets', {\r\n              params: { uri: artifact.uri, type: 'artifact' }\r\n            }).then(function (result) {\r\n              let versions = result.data[\"http://purl.org/dc/terms/hasVersion\"].values;\r\n              let latestVersion = versions.reduce(function (a, b) { return a > b ? a : b; });\r\n              artifact.facetSettings[s][0].value = latestVersion;\r\n            });\r\n          }\r\n        }\r\n\r\n      }\r\n\r\n    }\r\n\r\n\r\n    collection.title = `Snapshot of ${source.title}`;\r\n    collection.description = source.description;\r\n\r\n    this.local[collection.uuid] = new DatabusCollectionWrapper(collection);\r\n    this.saveLocally();\r\n    this.setActive(collection.uuid);\r\n\r\n    return collection;\r\n  }\r\n\r\n  saveLocally() {\r\n    if (!this.isInitialized) throw \"Databus-Collection-Manager is not initialized.\";\r\n\r\n    if (this.activeCollection != null) {\r\n      this.activeCollection.hasLocalChanges = this.hasLocalChanges(this.activeCollection);\r\n    }\r\n\r\n    var hash = DatabusCollectionUtils.cyrb53Hash(DatabusCollectionUtils.serialize(this.local));\r\n    this.currentHash = hash;\r\n\r\n    window.localStorage.setItem(`${this.storageKey}_hash`, hash);\r\n\r\n    for (let identifier in this.local) {\r\n     if(this.local[identifier].accountName == null) {\r\n        delete (this.local[identifier]);\r\n      } \r\n    }\r\n\r\n\r\n    try {\r\n      //write local collections to local storage\r\n      window.localStorage.setItem(this.storageKey, DatabusCollectionUtils.serialize(this.local));\r\n      //write remote collections to session storage\r\n      window.sessionStorage.setItem(this.storageKey, DatabusCollectionUtils.serialize(this.remote));\r\n    } catch (e) {\r\n      console.log(e);\r\n    }\r\n  }\r\n\r\n  hasLocalChanges(localCollection) {\r\n    if (this.remote[localCollection.uuid] === undefined) {\r\n      return true;\r\n    }\r\n\r\n    let remoteCollection = this.remote[localCollection.uuid];\r\n\r\n    if (remoteCollection.isHidden != localCollection.isHidden) {\r\n      return true;\r\n    }\r\n\r\n    if (localCollection.title !== remoteCollection.title) {\r\n      return true;\r\n    }\r\n\r\n    if (localCollection.description !== remoteCollection.description) {\r\n      return true;\r\n    }\r\n\r\n    let serializedRemoteContent = DatabusCollectionUtils.serialize(remoteCollection.content);\r\n    let serializedLocalContent = DatabusCollectionUtils.serialize(localCollection.content);\r\n\r\n    return serializedLocalContent !== serializedRemoteContent;\r\n  }\r\n\r\n  discardLocalChanges() {\r\n\r\n    if (!this.isInitialized) throw \"Databus-Collection-Manager is not initialized.\";\r\n\r\n    let uuid = this.activeCollection.uuid;\r\n\r\n    if (this.remote[uuid] === undefined) {\r\n      return;\r\n    }\r\n\r\n    let uri = this.activeCollection.uri;\r\n\r\n    if (uri == undefined) {\r\n      return;\r\n    }\r\n\r\n    this.local[uuid].title = this.remote[uuid].title;\r\n    this.local[uuid].abstract = this.remote[uuid].abstract;\r\n    this.local[uuid].description = this.remote[uuid].description;\r\n    this.local[uuid].content = DatabusCollectionUtils.createCleanCopy(this.remote[uuid].content);\r\n    this.local[uuid].hasLocalChanges = this.hasLocalChanges(this.local[uuid]);\r\n\r\n    this.saveLocally();\r\n  }\r\n\r\n  addElement(elementQuery) {\r\n    this.current.addElement(elementQuery);\r\n    this.saveLocally();\r\n\r\n    if (this.onActiveCollectionChanged != null) {\r\n      this.onActiveCollectionChanged(this.current);\r\n    }\r\n  }\r\n\r\n  removeElement(elementGuid) {\r\n    this.current.removeElement(elementGuid);\r\n    this.saveLocally();\r\n\r\n    if (this.onActiveCollectionChanged != null) {\r\n      this.onActiveCollectionChanged(this.current);\r\n    }\r\n  }\r\n\r\n\r\n\r\n  createNew(accountName, title, description, callback) {\r\n    if (!this.isInitialized) throw \"Databus-Collection-Manager is not initialized.\";\r\n\r\n    let reg = /^\\w+[\\w\\s]*$/;\r\n\r\n    if (title === undefined || !reg.test(title)) {\r\n      callback(false);\r\n      return;\r\n    }\r\n\r\n    let collection = DatabusCollectionWrapper.createNew(title, description, DATABUS_RESOURCE_BASE_URL, accountName);\r\n\r\n    this.local[collection.uuid] = new DatabusCollectionWrapper(collection);\r\n    this.setActive(collection.uuid);\r\n    this.saveLocally();\r\n\r\n    callback(collection);\r\n  }\r\n\r\n  createDraft(callback) {\r\n    if (!this.isInitialized) {\r\n      return;\r\n    }\r\n\r\n    let collection = DatabusCollectionWrapper.createNew('', '');\r\n    this.local[collection.uuid] = new DatabusCollectionWrapper(collection);\r\n    this.setActive(collection.uuid);\r\n    this.saveLocally()\r\n\r\n    callback(DatabusResponse.COLLECTION_DRAFT_CREATED);\r\n  }\r\n\r\n  createCopy(source) {\r\n    if (!this.isInitialized) throw \"Databus-Collection-Manager is not initialized.\";\r\n\r\n    let collection = DatabusCollectionWrapper.createNew();\r\n    collection.content = DatabusCollectionUtils.createCleanCopy(source.content);\r\n    collection.title = `Copy of ${source.title}`;\r\n    collection.abstract = source.abstract;\r\n    collection.description = source.description;\r\n    collection.accountName = this.accountName;\r\n\r\n    this.local[collection.uuid] = new DatabusCollectionWrapper(collection);\r\n    this.saveLocally();\r\n    this.setActive(collection.uuid);\r\n\r\n    return collection;\r\n  }\r\n\r\n\r\n\r\n  deleteLocally() {\r\n    delete this.local[this.activeCollection.uuid];\r\n    this.saveLocally();\r\n  }\r\n\r\n  /**\r\n   * Returns the collection or null\r\n   * @param  {[type]} uri [description]\r\n   * @return {[type]}      [description]\r\n   */\r\n  getCollectionByUri(uri) {\r\n    if (uri == null)\r\n      return null;\r\n\r\n    for (let identifier in this.local) {\r\n      if (uri === this.local[identifier].uri) {\r\n        return this.local[identifier];\r\n      }\r\n    }\r\n    return null;\r\n  }\r\n\r\n  /**\r\n   * Returns the first collection or null\r\n   * @return {[type]} [description]\r\n   */\r\n  getFirstCollection() {\r\n    if (this.local.length === 0) {\r\n      return null;\r\n    }\r\n    return this.local[0];\r\n  }\r\n\r\n\r\n  async changeCollection(username, collectionUri) {\r\n    try {\r\n      if (!this.isInitialized) throw \"Databus-Collection-Manager is not initialized.\";\r\n\r\n      this.saveLocally();\r\n\r\n      // Keep the identifier of the collection we want to push\r\n      var pushIdentifier = this.activeCollection.uuid;\r\n      var publisherUri = `${DATABUS_RESOURCE_BASE_URL}/${username}#this`;\r\n\r\n      var ignoreKeys = [\r\n        'parent',\r\n        '$$hashKey',\r\n        'expanded',\r\n        'files',\r\n        'eventListeners',\r\n        'hasLocalChanges',\r\n        'published',\r\n        'uuid',\r\n      ];\r\n\r\n      var contentString = encodeURIComponent(DatabusCollectionUtils.serialize(this.activeCollection.content, ignoreKeys));\r\n\r\n      // Format collection as json-ld\r\n      let collectionJsonLd = {\r\n        \"@context\": DATABUS_CONTEXT[DatabusUris.JSONLD_CONTEXT],\r\n        \"@graph\": [\r\n          {\r\n            \"@id\": collectionUri,\r\n            \"@type\": \"Collection\",\r\n            \"publisher\": publisherUri,\r\n            \"title\": this.activeCollection.title,\r\n            \"abstract\": this.activeCollection.abstract,\r\n            \"description\": this.activeCollection.description,\r\n            \"databus:collectionContent\": contentString,\r\n          }\r\n        ]\r\n      };\r\n\r\n      if (!this.activeCollection.isHidden) {\r\n        collectionJsonLd[\"@graph\"][0].issued = DatabusUtils.timeStringNow();\r\n      }\r\n\r\n      var response = null;\r\n\r\n      try {\r\n\r\n        // var relativeUri = new URL(collectionUri).pathname;\r\n        // response = await this.http.put(relativeUri, collectionJsonLd);\r\n\r\n        response = await this.http.post('/api/register', collectionJsonLd);\r\n\r\n      } catch (errResponse) {\r\n        console.log(errResponse);\r\n        throw { code: errResponse.data.code };\r\n      }\r\n\r\n      try {\r\n        var relativeUri = new URL(collectionUri).pathname;\r\n\r\n        var response = await this.http({\r\n          method: 'GET',\r\n          url: relativeUri,\r\n          headers: {\r\n            'Accept': 'application/ld+json',\r\n            'X-Jsonld-Formatting': 'compact'\r\n          }\r\n        });\r\n\r\n\r\n      } catch (errResponse) {\r\n        console.log(errResponse);\r\n        throw { code: errResponse.data.code };\r\n      }\r\n\r\n      // Get the remotely saved collection from the payload\r\n      var remoteGraph = response.data;\r\n\r\n      // If the user changed the active collection in the meantime throw an error. This\r\n      // should be prevented by a loading dialog\r\n      if (this.activeCollection.uuid != pushIdentifier) {\r\n        throw { code: DatabusResponse.COLLECTION_INVALID_ARGUMENT };\r\n      }\r\n\r\n      this.local[pushIdentifier].uri = remoteGraph['@id'];\r\n      this.local[pushIdentifier].hasLocalChanges = false;\r\n      this.local[pushIdentifier].modified = remoteGraph.modified;\r\n      this.local[pushIdentifier].issued = remoteGraph.issued;\r\n      this.local[pushIdentifier].isHidden = remoteGraph.issued == null;\r\n      // this.local[pushIdentifier].created = remoteGraph.created;\r\n\r\n      //Update remote data\r\n      this.remote[pushIdentifier] = JSON.parse(DatabusCollectionUtils.serialize(this.activeCollection));\r\n\r\n      // Update the local data\r\n      // this.local[pushIdentifier].uri = remoteGraph['@id'];\r\n      //this.local[pushIdentifier].hasLocalChanges = this.hasLocalChanges(this.local[pushIdentifier]);\r\n      //this.local[pushIdentifier].modified = this.activeCollection.modified;\r\n      //this.local[pushIdentifier].issued = this.activeCollection.issued;\r\n      //this.local[pushIdentifier].created = this.activeCollection.created;\r\n\r\n      this.saveLocally();\r\n\r\n      return response.data;\r\n\r\n    } catch (err) {\r\n\r\n      console.log(err);\r\n      throw {\r\n        code: err.data !== undefined && err.data.code !== undefined ? err.data.code :\r\n          DatabusResponse.COLLECTION_UPDATE_ERROR\r\n      };\r\n    }\r\n  }\r\n\r\n  async updateCollection(username, collectionTag) {\r\n\r\n    if (this.activeCollection.uri != null) {\r\n      return await this.changeCollection(username, this.activeCollection.uri);\r\n    } else {\r\n      var collectionUri = `${DATABUS_RESOURCE_BASE_URL}/${username}/collections/${collectionTag}`;\r\n\r\n      for (var uuid in this.local) {\r\n        if (this.local[uuid].uri == collectionUri) {\r\n          throw \"A collection with the specifed URI already exists.\";\r\n        }\r\n      }\r\n\r\n      return await this.changeCollection(username, collectionUri);\r\n    }\r\n  }\r\n\r\n\r\n  /**\r\n   * Fetches the remote data of the current collection and assigns the field values to the local copy\r\n   */\r\n  async fetchCollection(uri) {\r\n    try {\r\n      if (!this.isInitialized) throw \"Databus-Collection-Manager is not initialized.\";\r\n\r\n      var req = {\r\n        method: 'GET',\r\n        url: uri,\r\n        headers: { 'Accept': 'application/json' }\r\n      };\r\n\r\n      var getResponse = await this.http(req);\r\n      var collection = getCollectionByUri(uri);\r\n\r\n      this.local[collection.uuid].content = getResponse.data.content;\r\n      this.local[collection.uuid].created = getResponse.data.created;\r\n      this.local[collection.uuid].issued = getResponse.data.issued;\r\n      this.local[collection.uuid].title = getResponse.data.title;\r\n      this.local[collection.uuid].description = getResponse.data.description;\r\n      this.local[collection.uuid].files = getResponse.data.files;\r\n    } catch (errResponse) {\r\n      console.log(errResponse);\r\n      return errResponse.data;\r\n    }\r\n  }\r\n\r\n  async deleteCollection(username, collectionTag) {\r\n    try {\r\n      if (!this.isInitialized) throw \"Databus-Collection-Manager is not initialized.\";\r\n\r\n\r\n\r\n      // Keep the identifier of the collection we want to push\r\n      let deleteIdentifier = this.activeCollection.uuid;\r\n\r\n      if (this.activeCollection.isDraft) {\r\n        delete this.local[deleteIdentifier];\r\n        this.saveLocally();\r\n        return { code: DatabusResponse.COLLECTION_DELETED };\r\n      }\r\n\r\n      var targetUri = `/${username}/collections/${collectionTag}`;\r\n\r\n      let deleteResponse = await this.http.delete(targetUri);\r\n\r\n      delete this.remote[deleteIdentifier];\r\n      delete this.local[deleteIdentifier];\r\n\r\n      return deleteResponse.data;\r\n    } catch (errResponse) {\r\n      console.log(errResponse);\r\n      return errResponse.data;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Deletes the active collection from the server but keeps the local storage entry\r\n   */\r\n  async unpublishActiveCollection() {\r\n\r\n    if (!this.isInitialized) throw \"Databus-Collection-Manager is not initialized.\";\r\n\r\n    if (this.activeCollection.isDraft) {\r\n      throw \"Cannot unpublish an unpublished draft\";\r\n    }\r\n\r\n    // Keep the identifier of the collection we want to push\r\n    let uuid = this.activeCollection.uuid;\r\n    let identifier = DatabusUtils.uriToName(this.activeCollection.uri);\r\n\r\n    var targetUri = `/${this.accountName}/collections/${identifier}`;\r\n    await this.http.delete(targetUri);\r\n\r\n    delete this.remote[uuid];\r\n    delete this.local[uuid].uri;\r\n    delete this.local[uuid].issued;\r\n    this.saveLocally();\r\n  }\r\n}\r\n\r\n\r\nmodule.exports = DatabusCollectionManager;\n\n//# sourceURL=webpack://databus-webapp/./js/collections/databus-collection-manager.js?");

/***/ }),

/***/ "./js/collections/databus-collection-utils.js":
/*!****************************************************!*\
  !*** ./js/collections/databus-collection-utils.js ***!
  \****************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("const QueryBuilder = __webpack_require__(/*! ../query-builder/query-builder */ \"./js/query-builder/query-builder.js\");\nconst QueryTemplates = __webpack_require__(/*! ../query-builder/query-templates */ \"./js/query-builder/query-templates.js\");\nconst DatabusConstants = __webpack_require__(/*! ../utils/databus-constants */ \"./js/utils/databus-constants.js\");\nconst DatabusMessages = __webpack_require__(/*! ../utils/databus-messages */ \"./js/utils/databus-messages.js\");\nconst DatabusUtils = __webpack_require__(/*! ../utils/databus-utils */ \"./js/utils/databus-utils.js\");\n\nclass DatabusCollectionUtils {\n\n  static CEDIT_IDENTIFIER_REGEX = /^[a-z0-9_-]{3,50}$/;\n  static CEDIT_TITLE_REGEX = /^[A-Za-z0-9\\s_()\\.\\,\\-]{3,200}$/;\n  static CEDIT_ABSTRACT_REGEX = /^[\\x00-\\xFF\\n]{10,}$/;\n  static CEDIT_DESCRIPTION_REGEX = /^[\\x00-\\xFF\\n]{10,}$/;\n\n  static formatMessageWithRegex(message, regex) {\n    var regexString = regex.source;\n    return message.replace(\"#REGEX#\", regexString);\n  }\n\n  static checkCollectionForm(form, collection) {\n\n    var hasError = false;\n\n    form.identifier.error = null;\n    form.title.error = null;\n    form.abstract.error = null;\n    form.description.error = null;\n\n    if (collection.isDraft) {\n\n      // Check the identifier\n      if (!this.CEDIT_IDENTIFIER_REGEX.test(form.identifier.value)) {\n        hasError = true;\n        form.identifier.error = this.formatMessageWithRegex(\n          DatabusMessages.CEDIT_INVALID_IDENTIFIER,\n          this.CEDIT_IDENTIFIER_REGEX\n        );\n      }\n    }\n\n    // Check the title\n    if (!this.CEDIT_TITLE_REGEX.test(collection.title)) {\n      hasError = true;\n      form.title.error = this.formatMessageWithRegex(\n        DatabusMessages.CEDIT_INVALID_TITLE,\n        this.CEDIT_TITLE_REGEX\n      );\n    }\n\n    // Check the abstract\n    if (!this.CEDIT_ABSTRACT_REGEX.test(collection.abstract)) {\n      hasError = true;\n      form.abstract.error = this.formatMessageWithRegex(\n        DatabusMessages.CEDIT_INVALID_ABSTRACT,\n        this.CEDIT_ABSTRACT_REGEX\n      );\n    }\n\n    // Check the description\n    if (!this.CEDIT_DESCRIPTION_REGEX.test(collection.description)) {\n      hasError = true;\n      form.description.error = this.formatMessageWithRegex(\n        DatabusMessages.CEDIT_INVALID_DESCRIPTION,\n        this.CEDIT_DESCRIPTION_REGEX\n      );\n    }\n\n    return !hasError;\n  }\n\n\n\n\n  static checkIdentifier(identifier) {\n    var identifierRegex = /^[a-z0-9_-]{3, 50}$/;\n    return this.checkField(identifier, identifierRegex, 3, 50);\n  }\n\n  static checkText(value, min, max) {\n    var textRegex = /^[\\x00-\\xFF\\n]*$/;\n    return this.checkField(value, textRegex, min, max);\n  }\n\n  static checkLabel(value, min, max) {\n    var labelRegex = /^[A-Za-z0-9\\s_()\\.\\,\\-]*$/;\n    return this.checkField(value, labelRegex, min, max);\n  }\n\n  static checkField(value, regex, min, max) {\n    if (value == undefined) {\n      return false;\n    }\n\n    if (max > 0 && value.length > max) {\n      return false;\n    }\n\n    if (value.length < min) {\n      return false;\n    }\n\n    return regex.test(value);\n  }\n\n\n  // Checks whether a collection can be saved\n  static checkCollectionTexts(collection) {\n    var labelReg = /^[\\x00-\\x7F]*$/;\n    var textReg = /^[\\x00-\\x7F\\n]*$/;\n\n    if (collection.label == undefined || collection.label == \"\") {\n      return DatabusResponse.COLLECTION_MISSING_LABEL;\n    }\n\n    if (!labelReg.test(collection.label) || collection.label.length > 200) {\n      return DatabusResponse.COLLECTION_INVALID_LABEL;\n    }\n\n    if (collection.description == undefined || collection.description == \"\") {\n      return DatabusResponse.COLLECTION_MISSING_DESCRIPTION;\n    }\n\n    if (!textReg.test(collection.description) || description.description.length < 50) {\n      return DatabusResponse.COLLECTION_INVALID_DESCRIPTION;\n    }\n\n    return 0;\n  }\n\n\n  // Creates a v4 uuid\n  static uuidv4() {\n    return '___xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n      var r = Math.random() * 16 | 0, v = c == 'x' ? r : (r & 0x3 | 0x8);\n      return v.toString(16);\n    });\n  }\n\n  static createQueryString(collection) {\n    var wrapper = new DatabusCollectionWrapper(collection);\n    return wrapper.createQuery();\n  }\n\n  static reduceBinding(binding) {\n    for (var key in binding) {\n      binding[key] = binding[key].value;\n    }\n\n    return binding;\n  }\n\n\n  static formatQuery(query, placeholderMappings) {\n\n    if (placeholderMappings == undefined) {\n      return query;\n    }\n\n    for (var placeholder in placeholderMappings) {\n      var re = new RegExp('%' + placeholder + '%', \"g\");\n      query = query.replace(re, placeholderMappings[placeholder]);\n    }\n\n    return query;\n  }\n\n  static async getCollectionStatistics($http, collection) {\n\n    var query = QueryBuilder.build({\n      node: collection.content.root,\n      resourceBaseUrl: DATABUS_RESOURCE_BASE_URL,\n      template: QueryTemplates.COLLECTION_STATISTICS_TEMPLATE\n    });\n\n    if (query == null) return null;\n\n    var req = {\n      method: 'POST',\n      url: DatabusConstants.DATABUS_SPARQL_ENDPOINT_URL,\n      data: \"format=json&timeout=1000000&query=\" + encodeURIComponent(query),\n      headers: {\n        \"Content-type\": \"application/x-www-form-urlencoded\"\n      },\n    }\n\n    var response = await $http(req);\n    var entries = response.data.results.bindings;\n\n    entries = entries.filter(function (e) {\n      return e.file != undefined;\n    });\n\n    if (entries.length === 0) {\n      return null;\n    }\n\n\n    let result = {\n      fileCount: entries.length,\n      licenses: [],\n      files: [],\n      size: 0\n    };\n\n    for (let i in entries) {\n      let element = DatabusCollectionUtils.reduceBinding(entries[i]);\n\n      result.size += parseInt(element.size);\n      result.licenses.push(element.license);\n      result.files.push(element);\n    }\n\n    result.licenses = result.licenses.filter(function (item, pos, self) {\n      return self.indexOf(item) === pos;\n    });\n\n    return result;\n  }\n\n  static async getCollectionFiles($http, collection) {\n\n    if (!collection.hasContent) {\n      return [];\n    }\n\n    let query = QueryBuilder.build({\n      node: collection.content.root,\n      resourceBaseUrl: DATABUS_RESOURCE_BASE_URL,\n      template: QueryTemplates.DISTRIBUTIONS_TEMPLATE\n    });\n\n    var req = {\n      method: 'POST',\n      url: DatabusConstants.DATABUS_SPARQL_ENDPOINT_URL,\n      data: \"format=json&query=\" + encodeURIComponent(query),\n      headers: {\n        \"Content-type\": \"application/x-www-form-urlencoded\"\n      },\n    }\n\n    var response = await $http(req);\n    var entries = response.data.results.bindings;\n\n    if (entries.length === 0) {\n      return null;\n    }\n\n    var distributions = {};\n    var bindings = [];\n\n    for (var entry of entries) {\n      var uri = entry.distribution.value;\n      var databusUri = DatabusCollectionUtils.navigateUp(uri, 4);\n\n      if (distributions[databusUri] == null) {\n        distributions[databusUri] = [];\n      }\n\n      distributions[databusUri].push(`<${uri}>`);\n    }\n\n    for (var databusUri in distributions) {\n\n      var distributionsString = distributions[databusUri].join('\\n');\n\n      var params = {};\n      params.DISTRIBUTIONS = distributionsString;\n\n      let fileQuery = DatabusCollectionUtils.formatQuery(QueryTemplates.COLLECTION_TABLE_QUERY, params);\n\n      var req = {\n        method: 'POST',\n        url: `${databusUri}${DatabusConstants.DATABUS_SPARQL_ENDPOINT_URL}`,\n        data: \"format=json&query=\" + encodeURIComponent(fileQuery),\n        headers: {\n          \"Content-type\": \"application/x-www-form-urlencoded\"\n        },\n      }\n\n      response = await $http(req);\n\n      for (var binding of response.data.results.bindings) {\n        binding.databus = databusUri;\n        bindings.push(binding);\n      }\n    }\n\n    // Postproccess\n    let result = [];\n\n    for (var binding of bindings) {\n      binding = DatabusCollectionUtils.reduceBinding(binding);\n\n      var variant = binding.variant;\n\n      if(variant != undefined) {\n        var variants = variant.split(',');\n\n        var cleanedVariants = [];\n\n        for (var v of variants) {\n          if (v != \"\" && v != \" \") {\n            cleanedVariants.push(v);\n          }\n        }\n\n        binding.variant = cleanedVariants.join(\",\");\n      }\n\n      result.push(binding);\n    }\n\n\n    /*\n    for (var entry of entries) {\n\n      try {\n        console.log(entry.distribution.value);\n\n        var params = {};\n        params.DISTRIBUTION = entry.distribution.value;\n\n        let fileQuery = DatabusUtils.formatQuery(QueryTemplates.COLLECTION_TABLE_ROW_QUERY, params);\n\n        var req = {\n          method: 'POST',\n          url: DatabusConstants.DATABUS_SPARQL_ENDPOINT_URL,\n          data: \"format=json&query=\" + encodeURIComponent(fileQuery),\n          headers: {\n            \"Content-type\": \"application/x-www-form-urlencoded\"\n          },\n        }\n\n        response = await $http(req);\n\n        if (response.data.results.bindings.length === 0) {\n          continue;\n        }\n\n        result.push(DatabusCollectionUtils.reduceBinding(response.data.results.bindings[0]));\n\n      } catch(err) {\n        console.log(err);\n      }\n    }\n\n    // Postprocess:\n\n\n\n    for (let i in entries) {\n      let element = DatabusCollectionUtils.reduceBinding(entries[i]);\n      result.push(element);\n    }\n    */\n\n    return result;\n  }\n\n\n\n  static navigateUp(uri, steps) {\n\n    if (steps == undefined) {\n      steps = 1;\n    }\n\n    for (var i = 0; i < steps; i++) {\n      uri = uri.substr(0, uri.lastIndexOf('/'));\n    }\n\n    if (uri.includes('#')) {\n      uri = uri.substr(0, uri.lastIndexOf('#'));\n    }\n\n    return uri;\n  }\n\n  static async getCollectionFileURLs($http, collection) {\n\n    let query = QueryBuilder.build({\n      node: collection.content.root,\n      resourceBaseUrl: DATABUS_RESOURCE_BASE_URL,\n      template: QueryTemplates.DEFAULT_FILE_TEMPLATE\n    });\n\n    var req = {\n      method: 'POST',\n      url: DatabusConstants.DATABUS_SPARQL_ENDPOINT_URL,\n      data: \"format=json&query=\" + encodeURIComponent(query),\n      headers: {\n        \"Content-type\": \"application/x-www-form-urlencoded\"\n      },\n    }\n\n    var response = await $http(req);\n    var entries = response.data.results.bindings;\n\n    if (entries.length === 0) {\n      return null;\n    }\n\n    let result = \"\";\n\n    for (let i in entries) {\n      let element = DatabusCollectionUtils.reduceBinding(entries[i]);\n      result += element.file + '\\n';\n    }\n\n    return result;\n  }\n\n  /*\n  static copyData(data) {\n    return JSON.parse(JSON.stringify(data));\n  }*/\n\n  static serialize(collectionObject, ignoreKeys) {\n\n    if (ignoreKeys == undefined) {\n      ignoreKeys = [\n        'parent',\n        '$$hashKey',\n        'expanded',\n        'files',\n        'eventListeners',\n        'hasLocalChanges',\n        'published'\n      ];\n    }\n\n    return JSON.stringify(collectionObject, function (key, value) {\n      if (ignoreKeys.includes(key)) {\n        return undefined;\n      }\n\n      return value;\n    });\n  }\n\n  static cyrb53Hash(str, seed = 0) {\n    let h1 = 0xdeadbeef ^ seed,\n      h2 = 0x41c6ce57 ^ seed;\n    for (let i = 0, ch; i < str.length; i++) {\n      ch = str.charCodeAt(i);\n      h1 = Math.imul(h1 ^ ch, 2654435761);\n      h2 = Math.imul(h2 ^ ch, 1597334677);\n    }\n\n    h1 = Math.imul(h1 ^ (h1 >>> 16), 2246822507) ^ Math.imul(h2 ^ (h2 >>> 13), 3266489909);\n    h2 = Math.imul(h2 ^ (h2 >>> 16), 2246822507) ^ Math.imul(h1 ^ (h1 >>> 13), 3266489909);\n\n    return 4294967296 * (2097151 & h2) + (h1 >>> 0);\n  };\n\n  static createCleanCopy(jsonData) {\n\n    var data = JSON.parse(DatabusCollectionUtils.serialize(jsonData));\n    return data;\n  }\n\n  static exportToJsonFile(jsonData) {\n\n    var ignoreKeys = [\n      'parent',\n      '$$hashKey',\n      'expanded',\n      'files',\n      'eventListeners',\n      'hasLocalChanges',\n      'published',\n      'uuid'\n    ];\n\n    let dataStr = DatabusCollectionUtils.serialize(jsonData, ignoreKeys);\n    let dataUri = 'data:application/json;charset=utf-8,' + encodeURIComponent(dataStr);\n\n    let exportFileDefaultName = 'data.json';\n\n    let linkElement = document.createElement('a');\n    linkElement.setAttribute('href', dataUri);\n    linkElement.setAttribute('download', exportFileDefaultName);\n    linkElement.click();\n  }\n\n}\n\nmodule.exports = DatabusCollectionUtils;\n\n\n//# sourceURL=webpack://databus-webapp/./js/collections/databus-collection-utils.js?");

/***/ }),

/***/ "./js/collections/databus-collection-wrapper.js":
/*!******************************************************!*\
  !*** ./js/collections/databus-collection-wrapper.js ***!
  \******************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("const QueryBuilder = __webpack_require__(/*! ../query-builder/query-builder */ \"./js/query-builder/query-builder.js\");\r\nconst QueryNode = __webpack_require__(/*! ../query-builder/query-node */ \"./js/query-builder/query-node.js\");\r\nconst QueryTemplates = __webpack_require__(/*! ../query-builder/query-templates */ \"./js/query-builder/query-templates.js\");\r\nconst DatabusUtils = __webpack_require__(/*! ../utils/databus-utils */ \"./js/utils/databus-utils.js\");\r\n\r\nclass DatabusCollectionWrapper {\r\n\r\n  /**\r\n   * Creates a new DatabusCollection from an already existing\r\n   * @param {[type]} data [description]\r\n   */\r\n  constructor(data) {\r\n    Object.assign(this, data);\r\n    this.eventListeners = {};\r\n  }\r\n\r\n  addEventListener(name, callback) {\r\n    if(this.eventListeners[name] == undefined) {\r\n      this.eventListeners[name] = [];\r\n    }\r\n\r\n    this.eventListeners[name].push(callback);\r\n  }\r\n\r\n  isPublisher(username) {\r\n    return this.uri != undefined && this.uri.startsWith('https://databus.dbpedia.org/' + username);\r\n  }\r\n\r\n  get isPublished() {\r\n    return this.issued != undefined;\r\n  }\r\n\r\n  get displayLabelHtml() {\r\n    var l = '';\r\n    if(this.isDraft) {\r\n      l += '<span style=\"color: #8a8cb3; margin-right:4px\">DRAFT:</span>';\r\n    }\r\n    l += (this.label != undefined && this.label.length > 0) ? this.label : 'Untitled Collection';\r\n    return l;\r\n  }\r\n\r\n  get isDraft() {\r\n    return this.uri === undefined;\r\n  }\r\n\r\n  get hasContent() {\r\n\r\n    if(this.content.root.childNodes.length == 0) {\r\n      return false;\r\n    }\r\n\r\n    for(var childNode of this.content.root.childNodes) {\r\n      if(childNode.childNodes.length > 0) {\r\n        return true;\r\n      }\r\n    }\r\n\r\n    return false;\r\n  }\r\n\r\n  fireEvent(name) {\r\n    if(this.eventListeners[name] == undefined) {\r\n      return;\r\n    }\r\n\r\n    for(var c in this.eventListeners[name]) {\r\n      var callback = this.eventListeners[name][c];\r\n      callback();\r\n    }\r\n  }\r\n\r\n\r\n  static createNew(title, description, source, accountName) {\r\n    var data = {};\r\n    data.uuid = DatabusUtils.uuidv4();\r\n    data.title = title;\r\n    data.description = description;\r\n    data.accountName = accountName;\r\n    data.abstract = description;\r\n    data.content = {};\r\n    data.content.root = new QueryNode(null, null);\r\n    data.content.root.addChild(new QueryNode(source, null));\r\n\r\n    return data;\r\n  }\r\n\r\n  /**\r\n   * Builds a composed query from all elements\r\n   * @return {[type]} [description]\r\n   */\r\n  createQuery() {\r\n\r\n    if(this.content.root == undefined) {\r\n      return null;\r\n    }\r\n\r\n    return QueryBuilder.build({\r\n      template : QueryTemplates.DEFAULT_FILE_TEMPLATE,\r\n      resourceBaseUrl : DATABUS_RESOURCE_BASE_URL,\r\n      node: this.content.root\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Downloads the entire collection object as json\r\n   * @return {[type]} [description]\r\n   */\r\n  downloadAsJson(){\r\n    var dataStr = \"data:text/json;charset=utf-8,\" + encodeURIComponent(angular.toJson(this));\r\n    var downloadAnchorNode = document.createElement('a');\r\n    downloadAnchorNode.setAttribute(\"href\",     dataStr);\r\n    downloadAnchorNode.setAttribute(\"download\", this.title + \".json\");\r\n    document.body.appendChild(downloadAnchorNode); // required for firefox\r\n    downloadAnchorNode.click();\r\n    downloadAnchorNode.remove();\r\n  }\r\n\r\n  removeCustomQueryNode(node) {\r\n    this.content.customQueries = this.content.customQueries.filter(function(n){\r\n      return node.guid != n.guid;\r\n    });\r\n  }\r\n\r\n  removeNodeByUri(uri) {\r\n    QueryNode.removeChildByUri(this.content.root, uri);\r\n  }\r\n\r\n  getParentNode(node) {\r\n    return QueryNode.findParentNodeRecursive(this.content.root, node);\r\n  }\r\n\r\n  removeGroupNode(groupNode) {\r\n    this.content.groups = this.content.groups.filter(function(a){\r\n      return groupNode.uri != a.uri;\r\n    });\r\n  }\r\n\r\n  addCustomQueryNode(label, query) {\r\n    this.content.customQueries.push({\r\n      guid : DatabusUtils.uuidv4(),\r\n      label : label,\r\n      query : query,\r\n    });\r\n  }\r\n\r\n  hasGroup(groupUri) {\r\n    var group = this.findGroup(groupUri);\r\n    return group != undefined;\r\n  }\r\n\r\n  hasArtifact(artifactUri) {\r\n    var groupUri = DatabusUtils.navigateUp(artifactUri);\r\n\r\n    var group = this.findGroup(groupUri);\r\n\r\n    if(group == undefined) {\r\n      return false;\r\n    }\r\n\r\n    var artifact = this.findArtifact(group, artifactUri);\r\n    return artifact != undefined;\r\n  }\r\n\r\n  /**\r\n   * Adds a new group node with label, uri and settings\r\n   * @param {[type]} groupUri   [description]\r\n   * @param {[type]} groupLabel [description]\r\n   * @param {[type]} settings   [description]\r\n   */\r\n  addGroupNode(groupUri, settings) {\r\n\r\n    var group = this.findGroup(groupUri);\r\n\r\n    if(group == undefined) {\r\n\r\n      var publisherUri = DatabusUtils.navigateUp(groupUri);\r\n\r\n      var groupLabel = DatabusUtils.uriToName(groupUri);\r\n      var publisherLabel = DatabusUtils.uriToName(publisherUri);\r\n\r\n      group = {};\r\n      group.uri = groupUri;\r\n      group.artifacts = [];\r\n      group.label = publisherLabel + \"  \" + groupLabel;\r\n      group.settings = settings;\r\n      group.expanded = true;\r\n\r\n      this.content.groups.push(group);\r\n\r\n      this.fireEvent(\"onGroupAdded\");\r\n    }\r\n\r\n    return group;\r\n  }\r\n\r\n  /**\r\n   * Adds a new artifact node with label uri and settings\r\n   * This will fail if the appropriate group node has not been\r\n   * added previously\r\n   * @param {[type]} artifactUri   [description]\r\n   * @param {[type]} artifactLabel [description]\r\n   * @param {[type]} settings      [description]\r\n   */\r\n  addArtifactNode(artifactUri, artifactLabel, settings) {\r\n\r\n    var groupUri = DatabusUtils.navigateUp(artifactUri);\r\n    var group = this.addGroupNode(groupUri, [ \r\n      {\r\n        facet: \"http://purl.org/dc/terms/hasVersion\",\r\n        value: \"SYSTEM_LATEST_ARTIFACT_VERSION\",\r\n        checked: true\r\n      }]);\r\n\r\n    var artifact = this.findArtifact(group, artifactUri);\r\n\r\n    if(artifact == undefined) {\r\n      artifact = {};\r\n      artifact.uri = artifactUri;\r\n      artifact.label = artifactLabel;\r\n      artifact.settings = settings;\r\n\r\n      group.artifacts.push(artifact);\r\n      \r\n      // TODO: merge facets\r\n    \r\n\r\n      this.fireEvent(\"onArtifactAdded\");\r\n    }\r\n  }\r\n\r\n  findGroup(groupUri) {\r\n    for(var g in this.content.groups) {\r\n      var group = this.content.groups[g];\r\n\r\n      if(group.uri == groupUri) {\r\n        return group;\r\n      }\r\n    }\r\n\r\n    return null;\r\n  }\r\n\r\n  findArtifact(group, artifactUri) {\r\n    for(var a in group.artifacts) {\r\n      var artifact = group.artifacts[a];\r\n\r\n      if(artifact.uri == artifactUri) {\r\n        return artifact;\r\n      }\r\n    }\r\n\r\n    return null;\r\n  }\r\n}\r\n\r\nmodule.exports = DatabusCollectionWrapper;\n\n//# sourceURL=webpack://databus-webapp/./js/collections/databus-collection-wrapper.js?");

/***/ }),

/***/ "./js/components/account-history/account-history.js":
/*!**********************************************************!*\
  !*** ./js/components/account-history/account-history.js ***!
  \**********************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("const DatabusWebappUtils = __webpack_require__(/*! ../../utils/databus-webapp-utils */ \"./js/utils/databus-webapp-utils.js\");\n\n// hinzufgen eines Controllers zum Modul\nfunction AccountHistoryController($http) {\n\n  var ctrl = this;\n  ctrl.utils = new DatabusWebappUtils(null, null);\n\n  \n  ctrl.$onInit = async function() {\n\n    var result = await $http.get(`/app/account/history?accountName=${ctrl.accountName}`);\n\n    ctrl.results = result.data;\n  }\n}\n\n\nmodule.exports = AccountHistoryController;\n\n//# sourceURL=webpack://databus-webapp/./js/components/account-history/account-history.js?");

/***/ }),

/***/ "./js/components/autofill-dropdown/autofill-dropdown.js":
/*!**************************************************************!*\
  !*** ./js/components/autofill-dropdown/autofill-dropdown.js ***!
  \**************************************************************/
/***/ ((module) => {

eval("// hinzufgen eines Controllers zum Modul\nfunction AutofillDropdownController($timeout) {\n\n  var ctrl = this;\n\n  ctrl.$onInit = function () {\n    ctrl.displayValues = [];\n  }\n\n  ctrl.showAll = function() {\n    ctrl.showDrop = true;\n    ctrl.displayValues = ctrl.values;\n  }\n\n  ctrl.handleKey = function (e) {\n\n    if (e.which === 9 || e.which === 13) {\n\n      ctrl.showDrop = false;\n\n      if(ctrl.displayValues.length > 0 && ctrl.input != ctrl.displayValues[0]) {\n        e.preventDefault();\n        ctrl.input = ctrl.displayValues[0];\n        ctrl.change();\n      }\n    }\n  }\n\n  ctrl.hideDropDelayed = function () {\n    $timeout(function () {\n      ctrl.showDrop = false;\n    }, 120);\n  }\n\n  ctrl.autoComplete = function () {\n\n    ctrl.showDrop = true;\n    if (ctrl.input == \"\" || ctrl.input == undefined) {\n      ctrl.displayValues = ctrl.values;\n      return;\n    }\n\n    ctrl.displayValues = [];\n\n    for (var value of ctrl.values) {\n      if (value.includes(ctrl.input) && value != ctrl.input) {\n        ctrl.displayValues.push(value);\n      }\n    }\n\n    if(ctrl.displayValues.length == 0) {\n      ctrl.showDrop = false;\n    }\n  }\n\n  ctrl.change = function () {\n\n    ctrl.autoComplete();\n\n    $timeout(function () {\n      ctrl.onChange();\n    }, 50);;\n  }\n}\n\nmodule.exports = AutofillDropdownController;\n\n\n\n//# sourceURL=webpack://databus-webapp/./js/components/autofill-dropdown/autofill-dropdown.js?");

/***/ }),

/***/ "./js/components/better-dropdown/better-dropdown.js":
/*!**********************************************************!*\
  !*** ./js/components/better-dropdown/better-dropdown.js ***!
  \**********************************************************/
/***/ ((module) => {

eval("\n// hinzufgen eines Controllers zum Modul\nfunction BetterDropdownController($scope, $timeout, $element) {\n\n\n  const ctrl = this;\n  ctrl.isActive = false;\n\n  ctrl.closeAll = function() {\n    ctrl.rootNode.isActive = false;\n    ctrl.setChildrenActiveState(ctrl.rootNode, false);\n  }\n\n  ctrl.activateNode = function(parent, node) {\n    for(var sibling of parent.children) {\n      sibling.isActive = false;\n      ctrl.setChildrenActiveState(sibling, false);\n    }\n\n    node.isActive = true;\n  }\n\n  ctrl.setChildrenActiveState = function(node, value) {\n    if(node.children == null) {\n      return;\n    }\n\n    for(var child of node.children) {\n      child.isActive = value;\n      ctrl.setChildrenActiveState(child, value);\n    }\n  }\n\n  ctrl.toggleNode = function(node) {\n    node.isActive = !node.isActive;\n\n    if(!node.isActive) {\n      ctrl.setChildrenActiveState(node, false);\n    }\n  }\n\n  ctrl.toggleDropdown = function () {\n    ctrl.isActive = !ctrl.isActive;\n  };\n  ctrl.showDropdown = function () {\n    ctrl.isActive = true;\n  };\n  ctrl.hideDropdown = function () {\n    ctrl.isActive = false;\n  };\n\n  ctrl.showNested = function (parent, node) {\n    if (node.children) {\n      ctrl.cancelShowNested();\n      ctrl.currentTimeout = $timeout(function () {\n        ctrl.activateNode(parent, node);\n      }, 200);\n    }\n  };\n\n  ctrl.cancelShowNested = function() {\n    if(ctrl.currentTimeout != null) {\n      $timeout.cancel(ctrl.currentTimeout);\n      ctrl.currentTimeout = null;\n    }\n  }\n\n  ctrl.toggleNestedDropdown = function (node) {\n    node.showChildren = !node.showChildren;\n  };\n  ctrl.selectNode = function (node) {\n    // Handle the selected node here\n    ctrl.onNodeClicked({ node : node });\n  };\n\n\n\n}\n\n\nmodule.exports = BetterDropdownController;\n\n\n//# sourceURL=webpack://databus-webapp/./js/components/better-dropdown/better-dropdown.js?");

/***/ }),

/***/ "./js/components/collection-data-table/collection-data-table.js":
/*!**********************************************************************!*\
  !*** ./js/components/collection-data-table/collection-data-table.js ***!
  \**********************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("const DatabusCollectionUtils = __webpack_require__(/*! ../../collections/databus-collection-utils */ \"./js/collections/databus-collection-utils.js\");\nconst DatabusUtils = __webpack_require__(/*! ../../utils/databus-utils */ \"./js/utils/databus-utils.js\");\n\n\n// hinzufgen eines Controllers zum Modul\nfunction CollectionDataTableController($http, $scope, $location, $sce) {\n\n  var ctrl = this;\n  ctrl.$http = $http;\n\n\n  ctrl.$onInit = function() {\n\n\n    ctrl.isLoading = true;\n    DatabusCollectionUtils.getCollectionFiles(ctrl.$http, ctrl.collection).then(function(result) {\n      ctrl.files = result;\n      ctrl.isLoading = false;\n      $scope.$apply();\n    }, function(err) {\n      ctrl.statistics = null;\n      ctrl.isLoading = false;\n    });\n\n\n    if(ctrl.files == null) {\n      return;\n    }\n\n    ctrl.groupedFiles = ctrl.groupBy(ctrl.files, 'version');\n  }\n\n  ctrl.getRowspan = function(file) {\n\n    return file.distributions.length * 2; \n    /*\n    var span = file.distributions.length * 2;\n    if(!file.distributions[file.distributions.length - 1].expanded) {\n      span--;\n    }\n\n    return span;*/\n  }\n\n  ctrl.groupBy = function(list, key) {\n\n    var result = {};\n\n    for(var i in list) {\n      var element = list[i];\n      var keyVal = element[key];\n\n      if(result[keyVal] == undefined) {\n        result[keyVal] = {}\n        result[keyVal].value = keyVal;\n        result[keyVal].title = element.title;\n        result[keyVal].uri = keyVal;\n        result[keyVal].distributions = [];\n        result[keyVal].license = element.license;\n      }\n\n      result[keyVal].distributions.push(element);\n    }\n    \n    return result;\n  }\n\n  ctrl.calculateRowSpan = function(file) {\n    var rowspan = 0;\n\n    for(var d in file.distributions) {\n      rowspan += 1; //(file.distributions[d].expanded ? 2 : 1);\n    }\n\n    return rowspan;\n  }\n\n  ctrl.createRelativeUri = function(url) {\n    var u = new URL(url);\n    return u.pathname;\n  }\n\n  ctrl.$doCheck = function() {\n\n    if(ctrl.files == null) {\n      return;\n    }\n\n    if(ctrl.previousFileCount != ctrl.files.length) {\n      ctrl.previousFileCount = ctrl.files.length;\n      ctrl.groupedFiles = ctrl.groupBy(ctrl.files, 'version');\n    }  \n  }\n\n  ctrl.uriToName = function(uri) {\n    return DatabusUtils.uriToName(uri);\n  }\n\n  ctrl.formatUploadSize = function(size) {\n    if(size < 1024) return size + \" B\";\n    else if (size < 1048576) return Math.round(size / 1024) + \" KB\";\n    else if (size < 1073741824) return (Math.round(10 * size / 1048576) / 10) + \" MB\";\n    else return (Math.round(100 * size / 1073741824) / 100) + \" GB\";\n  }\n}\n\n\nmodule.exports = CollectionDataTableController;\n\n//# sourceURL=webpack://databus-webapp/./js/components/collection-data-table/collection-data-table.js?");

/***/ }),

/***/ "./js/components/collection-editor-widget/collection-editor-widget.js":
/*!****************************************************************************!*\
  !*** ./js/components/collection-editor-widget/collection-editor-widget.js ***!
  \****************************************************************************/
/***/ ((module) => {

eval("\n// hinzufgen eines Controllers zum Modul\nfunction CollectionEditorWidgetController(collectionManager, $scope) {\n\n  var ctrl = this;\n  ctrl.$scope = $scope;\n  ctrl.collectionManager = collectionManager;\n\n  ctrl.$onInit = function () {\n\n    // TODO: Change this hacky BS!\n    setTimeout(function () {\n      $(\".dropdown-item\").click(function (e) {\n        var dropdown = $(this).closest(\".dropdown\");\n        $(dropdown).removeClass(\"is-active\");\n        e.stopPropagation();\n      });\n\n\n      $(\"body\").click(function () {\n        $(\".dropdown\").removeClass(\"is-active\");\n      });\n\n      $(\".dropdown\").click(function (e) {\n        $(\".dropdown\").removeClass(\"is-active\");\n        $(this).addClass(\"is-active\");\n        e.stopPropagation();\n      });\n    }, 500);\n\n  }\n\n  ctrl.goToEditor = function () {\n    window.location.href = '/app/collection-editor';\n  }\n\n  ctrl.addSelectionToCollection = function (uuid) {\n    var selection = ctrl.selection;\n\n    ctrl.collectionManager.setActive(uuid);\n    var collection = ctrl.collectionManager.activeCollection;\n\n    // Get local bus node\n    var databusNode = QueryNode.findChildByUri(collection.content.root, DATABUS_RESOURCE_BASE_URL);\n\n    if (databusNode == undefined) {\n      databusNode = new QueryNode(DATABUS_RESOURCE_BASE_URL, null);\n      collection.content.root.childNodes.push(databusNode);\n    }\n\n    QueryNode.mergeAddChild(databusNode, selection);\n\n    ctrl.collectionManager.activeCollection.hasLocalChanges\n      = ctrl.collectionManager.hasLocalChanges(ctrl.collectionManager.activeCollection);\n    ctrl.collectionManager.saveLocally();\n  }\n\n}\n\n\nmodule.exports = CollectionEditorWidgetController;\n\n\n//# sourceURL=webpack://databus-webapp/./js/components/collection-editor-widget/collection-editor-widget.js?");

/***/ }),

/***/ "./js/components/collection-hierarchy-two/collection-hierarchy.js":
/*!************************************************************************!*\
  !*** ./js/components/collection-hierarchy-two/collection-hierarchy.js ***!
  \************************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("const DatabusCollectionWrapper = __webpack_require__(/*! ../../collections/databus-collection-wrapper */ \"./js/collections/databus-collection-wrapper.js\");\nconst QueryBuilder = __webpack_require__(/*! ../../query-builder/query-builder */ \"./js/query-builder/query-builder.js\");\nconst QueryNode = __webpack_require__(/*! ../../query-builder/query-node */ \"./js/query-builder/query-node.js\");\nconst QueryTemplates = __webpack_require__(/*! ../../query-builder/query-templates */ \"./js/query-builder/query-templates.js\");\nconst DatabusConstants = __webpack_require__(/*! ../../utils/databus-constants */ \"./js/utils/databus-constants.js\");\nconst DatabusFacetsCache = __webpack_require__(/*! ../../utils/databus-facets-cache */ \"./js/utils/databus-facets-cache.js\");\nconst DatabusUris = __webpack_require__(/*! ../../utils/databus-uris */ \"./js/utils/databus-uris.js\");\nconst DatabusUtils = __webpack_require__(/*! ../../utils/databus-utils */ \"./js/utils/databus-utils.js\");\nconst DatabusWebappUtils = __webpack_require__(/*! ../../utils/databus-webapp-utils */ \"./js/utils/databus-webapp-utils.js\");\n\n// hinzufgen eines Controllers zum Modul\nfunction CollectionHierarchyControllerTwo($http, $location, $sce, $scope, collectionManager) {\n\n  var ctrl = this;\n\n  ctrl.viewMode = -1;\n  ctrl.$http = $http;\n  ctrl.$scope = $scope;\n  ctrl.facets = new DatabusFacetsCache($http);\n  ctrl.utils = new DatabusWebappUtils($scope, $sce);\n  ctrl.$sce = $sce;\n\n  collectionManager.onCollectionChangedInDifferentTab = function () {\n    ctrl.previousCollectionId = null;\n  }\n\n  ctrl.defaultQuery = `PREFIX databus: <https://dataid.dbpedia.org/databus#>\nPREFIX dcv:    <https://dataid.dbpedia.org/databus-cv#>\nPREFIX dct:    <http://purl.org/dc/terms/>\nPREFIX dcat:   <http://www.w3.org/ns/dcat#>\nPREFIX rdf:    <http://www.w3.org/1999/02/22-rdf-syntax-ns#>\nPREFIX rdfs:   <http://www.w3.org/2000/01/rdf-schema#>\nSELECT ?file WHERE {\n  # Replace this with your custom query:\n  ?file <matches> <condition> .\n} LIMIT 0`;\n  const DATAID_ARTIFACT_PROPERTY = 'databus:artifact';\n  const DATAID_GROUP_PROPERTY = 'databus:group';\n  const KEY_LATEST_VERSION = \"$latest\";\n\n\n  ctrl.$onInit = function () {\n\n    ctrl.viewMode = -1;\n\n    if (ctrl.collection == null) {\n      return;\n    }\n  }\n\n  ctrl.onAddContentClicked = function (sourceNode) {\n    ctrl.onAddContent({ source: sourceNode.uri });\n\n    ctrl.onChange();\n    ctrl.updateViewModel();\n  }\n\n\n  ctrl.onAddCustomQueryClicked = function (sourceNode) {\n    var node = QueryNode.createFrom(sourceNode);\n    node.addChild(new QueryNode(DatabusUtils.uuidv4(), null));\n    ctrl.onChange();\n  }\n\n  ctrl.toggleCollapsed = function (node, view) {\n    view.collapsed = !view.collapsed;\n\n    if (!view.collapsed) {\n      ctrl.query(node);\n    }\n  }\n\n  ctrl.isDatabus = async function (uri) {\n    var req = {\n      method: 'GET',\n      url: uri,\n      headers: {\n        'Accept': 'application/rdf+turtle'\n      }\n    }\n\n    var res = await ctrl.$http(req);\n    var manifest = await DatabusUtils.parseDatabusManifest(res.data);\n    var expectedUri = new URL(uri);\n\n    if (manifest == undefined || manifest.uri != expectedUri.origin) {\n      return false;\n    }\n\n    return true;\n  }\n\n  ctrl.getDatabusUri = async function (uri) {\n\n    var url = new URL(uri);\n    var segments = url.pathname.split('/');\n    var base = url.origin;\n    var currentUrl = base;\n\n    var isDatabus = await ctrl.isDatabus(currentUrl);\n\n    if (isDatabus) {\n      return currentUrl;\n    }\n\n    for (var i = 0; segments.length; i++) {\n\n      currentUrl += `/${segments[i]}`;\n      var isDatabus = await ctrl.isDatabus(currentUrl);\n\n      if (isDatabus) {\n        return currentUrl;\n      }\n    }\n\n  }\n\n  ctrl.onAddResource = async function (uri) {\n\n    if (uri.endsWith('/')) {\n      uri = uri.substr(0, uri.length - 1);\n    }\n\n    let node = QueryNode.findChildByUri(ctrl.root, uri);\n\n    // Resource already in collection\n    if (node != undefined) {\n      return;\n    }\n\n    var databusUri = await ctrl.getDatabusUri(uri);\n\n\n    var databusUriLength = DatabusUtils.getResourcePathLength(databusUri);\n    var resourceUriLength = DatabusUtils.getResourcePathLength(uri);\n    var diff = resourceUriLength - databusUriLength;\n\n    if (diff < 0 && diff > 3 || diff == 1) {\n      return;\n    }\n\n    if (diff == 0) {\n      ctrl.addDatabus(uri);\n    }\n\n    if (diff == 2) {\n      ctrl.addDatabus(databusUri);\n      let databusNode = QueryNode.findChildByUri(ctrl.root, databusUri);\n      ctrl.addGroup(databusNode, uri);\n    }\n\n    if (diff == 3) {\n      ctrl.addDatabus(databusUri);\n      let databusNode = QueryNode.findChildByUri(ctrl.root, databusUri);\n      let groupUri = DatabusUtils.navigateUp(uri);\n      ctrl.addGroup(databusNode, groupUri);\n      let groupNode = QueryNode.findChildByUri(ctrl.root, groupUri);\n      ctrl.addArtifact(groupNode, uri);\n    }\n\n    ctrl.onChange();\n    ctrl.updateViewModel();\n    ctrl.$scope.$apply();\n  }\n\n  ctrl.addDatabus = function (uri) {\n    let node = QueryNode.findChildByUri(ctrl.root, uri);\n\n    if (node == null) {\n      ctrl.root.childNodes.push(new QueryNode(uri, null));\n    }\n  }\n\n  ctrl.addGroup = function (databusNode, uri) {\n    let node = QueryNode.findChildByUri(ctrl.root, uri);\n\n    if (node == null) {\n      databusNode.childNodes.push(new QueryNode(uri, DATAID_GROUP_PROPERTY));\n    }\n  }\n\n  ctrl.addArtifact = function (groupNode, uri) {\n    let node = QueryNode.findChildByUri(ctrl.root, uri);\n\n    if (node == null) {\n      groupNode.childNodes.push(new QueryNode(uri, DATAID_ARTIFACT_PROPERTY));\n    }\n  }\n\n  ctrl.addToCollection = function (source, view, result) {\n\n    if (ctrl.isInCollection(result)) {\n      QueryNode.removeChildByUri(ctrl.root, result.id[0].value);\n    }\n    else {\n      if (result.typeName[0].value == 'Group') {\n        let node = new QueryNode(result.id[0].value, DATAID_GROUP_PROPERTY);\n\n        source.childNodes.push(node);\n      }\n\n      if (result.typeName[0].value == 'Artifact') {\n\n        var artifactUri = result.id[0].value;\n        let groupUri = DatabusUtils.navigateUp(artifactUri);\n        let groupNode = QueryNode.findChildByUri(ctrl.root, groupUri);\n\n        if (groupNode == null) {\n          groupNode = new QueryNode(groupUri, DATAID_GROUP_PROPERTY);\n          source.childNodes.push(groupNode);\n        }\n\n        let node = new QueryNode(artifactUri, DATAID_ARTIFACT_PROPERTY);\n        groupNode.addChild(node);\n      }\n    }\n\n    for (var res of view.searchResults) {\n      res.inCollection = ctrl.isInCollection(res);\n    }\n\n    ctrl.onChange();\n    ctrl.updateViewModel();\n  }\n\n  ctrl.isLastChild = function (group, artifact) {\n\n    if (group.childNodes == undefined || group.childNodes.length == 0) {\n      return false;\n    }\n\n    return group.childNodes[group.childNodes.length - 1].uri == artifact.uri;\n  }\n\n  ctrl.toggleExpand = function (node) {\n    node.expanded = !node.expanded;\n    ctrl.onChange();\n  }\n\n  ctrl.mergeFacets = function (node, facets) {\n\n    if (node.facets == undefined) {\n      node.facets = JSON.parse(JSON.stringify(facets));\n      return;\n    }\n\n    for (var f in facets) {\n\n      if (node.facets[f] == undefined) {\n        node.facets[f] = JSON.parse(JSON.stringify(facets[f]));\n        continue;\n      }\n\n      for (var value of facets[f].values) {\n        if (!node.facets[f].values.includes(value)) {\n          node.facets[f].values.push(value);\n        }\n      }\n    }\n\n    node.facetLabels = null;\n  }\n\n  ctrl.getAllFilters = function (groupNode, artifactNode) {\n\n    if (artifactNode == null) {\n      var result = Object.keys(groupNode.facetSettings)\n      return DatabusUtils.uniqueList(result);\n    }\n\n    var result = Object.keys(groupNode.facetSettings).concat(Object.keys(artifactNode.facetSettings));\n    return DatabusUtils.uniqueList(result);\n  }\n\n  ctrl.$doCheck = function () {\n\n    if (ctrl.collection == null) {\n      ctrl.previousCollectionId = null;\n      return;\n    }\n\n    if (ctrl.previousCollectionId != ctrl.collection.uuid) {\n      ctrl.previousCollectionId = ctrl.collection.uuid;\n\n      ctrl.activeNode = null;\n      ctrl.viewMode = -1;\n      ctrl.updateViewModel();\n    }\n  }\n\n  ctrl.handleKey = function (e, nodeView) {\n    if (e.which === 9) {\n      nodeView.showSearchResults = false;\n    }\n  }\n\n  ctrl.isInCollection = function (result) {\n    let uri = result.id[0].value;\n    let node = QueryNode.findChildByUri(ctrl.root, uri);\n    return node != null;\n  }\n\n  ctrl.updateSearchResults = function (view) {\n\n    if (view == null || view.searchResults == null) {\n      return;\n    }\n\n    for (var res of view.searchResults) {\n      res.inCollection = ctrl.isInCollection(res);\n    }\n  }\n\n  ctrl.searchNode = function (node, nodeView) {\n\n    var baseUrl = new URL(node.uri).origin;\n    var typeFilters = `typeName=Artifact Group`;\n\n    if (node.property == DATAID_GROUP_PROPERTY) {\n      var groupName = DatabusUtils.uriToResourceName(node.uri);\n      var accountName = DatabusUtils.uriToResourceName(DatabusUtils.navigateUp(node.uri));\n      typeFilters = `typeName=Artifact&publisher=${accountName}&group=${groupName}`;\n    }\n\n    var url = `${baseUrl}/api/search?${typeFilters}&typeNameWeight=0&format=JSON_FULL&minRelevance=15&maxResults=10&query=${nodeView.search}`;\n\n    try {\n      $http({ method: 'GET', url: url }).then(function successCallback(response) {\n\n        nodeView.searchResults = [];\n\n        for (var doc of response.data.docs) {\n          doc.inCollection = ctrl.isInCollection(doc);\n          nodeView.searchResults.push(doc);\n        }\n\n      }, function errorCallback(response) {\n        console.log(response);\n      });\n    } catch (err) {\n\n    }\n\n  };\n\n  ctrl.toggleExpand = function (view) {\n    view.expanded = !view.expanded;\n  }\n\n\n  ctrl.isValidHttpUrl = function (url) {\n    return DatabusUtils.isValidHttpUrl(url);\n  }\n\n\n  ctrl.updateViewModel = function () {\n    ctrl.collectionWrapper = new DatabusCollectionWrapper(ctrl.collection);\n    ctrl.root = ctrl.collection.content.root;\n\n    ctrl.view = {};\n    ctrl.view.groups = {};\n    ctrl.view.artifacts = {};\n    ctrl.view.sources = {};\n\n    for (var s in ctrl.root.childNodes) {\n\n      var sourceNode = ctrl.root.childNodes[s];\n\n      if (ctrl.view.sources[sourceNode.uri] == undefined) {\n        ctrl.view.sources[sourceNode.uri] = {};\n        ctrl.view.sources[sourceNode.uri].uri = sourceNode.uri;\n        ctrl.view.sources[sourceNode.uri].expanded = true;\n        ctrl.view.sources[sourceNode.uri].addMode = 'artifact';\n        ctrl.view.sources[sourceNode.uri].customQueryLabel = `New Custom Query`;\n        ctrl.view.sources[sourceNode.uri].customQueryInput = ctrl.defaultQuery;\n      }\n\n      for (var g in sourceNode.childNodes) {\n\n        var groupNode = sourceNode.childNodes[g];\n        groupNode.expanded = true;\n\n\n        ctrl.view.groups[groupNode.uri] = {};\n\n        if (DatabusUtils.isValidHttpUrl(groupNode.uri)) {\n\n          ctrl.facets.get(groupNode.uri).then(function (res) {\n            delete res.facets[DatabusUris.DATABUS_ARTIFACT_PROPERTY];\n            ctrl.view.groups[res.uri].facets = res.facets;\n\n            var hasVersionFacets = ctrl.view.groups[res.uri].facets[DatabusUris.DCT_HAS_VERSION];\n\n            if (hasVersionFacets != null && !hasVersionFacets.values.includes(KEY_LATEST_VERSION)) {\n              hasVersionFacets.values.unshift(KEY_LATEST_VERSION);\n            }\n\n            $scope.$apply();\n          });\n\n          ctrl.query(groupNode);\n\n          for (var a in groupNode.childNodes) {\n\n            var artifactNode = groupNode.childNodes[a];\n\n            ctrl.view.artifacts[artifactNode.uri] = {};\n            ctrl.view.artifacts[artifactNode.uri].expanded = false;\n            ctrl.view.artifacts[artifactNode.uri].collapsed = true;\n\n            ctrl.facets.get(artifactNode.uri).then(function (res) {\n              ctrl.view.artifacts[res.uri].facets = res.facets;\n\n              var hasVersionFacets = ctrl.view.artifacts[res.uri].facets[DatabusUris.DCT_HAS_VERSION];\n\n              if (hasVersionFacets != null && !hasVersionFacets.values.includes(KEY_LATEST_VERSION)) {\n                hasVersionFacets.values.unshift(KEY_LATEST_VERSION);\n              }\n\n              $scope.$apply();\n              //var groupUri = DatabusUtils.navigateUp(artifactNode.uri);\n              //ctrl.view.artifacts[artifactNode.uri].facets = result.data;\n              //ctrl.mergeFacets(ctrl.view.groups[groupUri], result.data);\n            });\n\n\n\n            /*en(function(result) {\n\n               = result['http://purl.org/dc/terms/hasVersion'].values.unshift(\"$latest\");\n\n\n              var groupUri = DatabusUtils.navigateUp(artifactNode.uri);\n              ctrl.view.artifacts[artifactNode.uri].facets = result.data;\n              ctrl.mergeFacets(ctrl.view.groups[groupUri], result.data);\n\n            });\n\n\n          \n            */\n          }\n        }\n      }\n    }\n  }\n\n\n\n  ctrl.onArtifactDropdownChanged = function (groupNode) {\n    ctrl.onChange();\n    ctrl.query(groupNode);\n  }\n\n  ctrl.selectAddFilterValue = function (viewNode, value) {\n    viewNode.addFilterValueInput = value;\n    viewNode.showValueDrop = false;\n\n    ctrl.onAddFilterValueInputChanged(viewNode);\n  }\n\n  ctrl.selectAddFilterFacet = function (viewNode, value) {\n    viewNode.addFilterFacetInput = value;\n    viewNode.showFacetDrop = false;\n\n    ctrl.onAddFilterFacetInputChanged(viewNode);\n  }\n\n  ctrl.onAddFilterValueInputChanged = function (viewNode) {\n\n    for (var value of viewNode.facets[viewNode.addFilterFacet].values) {\n\n      if (viewNode.addFilterValueInput == value) {\n        viewNode.addFilterValue = value;\n        return;\n      }\n    }\n\n    viewNode.addFilterValue = null;\n  }\n\n  ctrl.onAddFilterFacetInputChanged = function (viewNode) {\n\n    for (var facet in viewNode.facets) {\n\n      if (viewNode.addFilterFacetInput == viewNode.facets[facet].label) {\n\n        if (viewNode.addFilterFacet != facet) {\n          viewNode.addFilterFacet = facet;\n          viewNode.addFilterValue = [];\n        }\n\n        return;\n      }\n    }\n\n    viewNode.addFilterFacet = null;\n    viewNode.addFilterValue = [];\n  }\n\n  ctrl.includesValue = function (objs, value) {\n    if (objs == undefined) {\n      return false;\n    }\n\n    for (var obj of objs) {\n      if (obj.value == value) {\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n  ctrl.isLocalDatabusNode = function (node) {\n    return node.uri == DATABUS_RESOURCE_BASE_URL;\n  }\n  ctrl.addFilter = function (node, facet, values, checked) {\n\n    if (values == null) {\n      return;\n    }\n\n    if (node.facetSettings[facet] == undefined) {\n      node.facetSettings[facet] = [];\n    }\n\n    for (var value of values) {\n\n      if (!ctrl.includesValue(node.facetSettings[facet], value.value)) {\n        node.facetSettings[facet].push(value);\n      }\n    }\n\n    ctrl.onChange();\n    ctrl.query(node);\n  }\n\n  ctrl.query = function (node) {\n\n    if (node.childNodes != undefined && node.childNodes.length > 0) {\n\n      node.files = null;\n      for (var child of node.childNodes) {\n        ctrl.query(child);\n      }\n\n      return;\n    }\n\n    var queryNode = QueryNode.createSubTree(node);\n\n    var fullQuery = QueryBuilder.build({\n      node: queryNode,\n      template: QueryTemplates.NODE_FILE_TEMPLATE,\n      resourceBaseUrl: DATABUS_RESOURCE_BASE_URL,\n      root: ctrl.root\n    });\n\n    this.querySparql(fullQuery).then(function (result) {\n      node.files = result;\n      ctrl.$scope.$apply();\n\n    });\n  }\n\n  ctrl.removeFilter = function (node, facet) {\n\n    if (node.facetSettings[facet] == undefined) {\n      return;\n    }\n\n    delete node.facetSettings[facet];\n\n    ctrl.onChange();\n\n    ctrl.query(node);\n  }\n\n  ctrl.onActiveFilterChanged = function (node) {\n    ctrl.onChange();\n    ctrl.query(node);\n  }\n\n  ctrl.getFacetLabels = function (viewNode) {\n\n    if (viewNode.facetLabels != undefined) {\n      return viewNode.facetLabels;\n    }\n    var result = [];\n\n    for (var f in viewNode.facets) {\n      result.push(viewNode.facets[f].label);\n    }\n\n    viewNode.facetLabels = result;\n    return result;\n  }\n\n\n  ctrl.sortBy = function (property) {\n\n    if (ctrl.sortProperty == property) {\n      ctrl.sortReverse = !ctrl.sortReverse;\n    }\n    ctrl.sortProperty = property;\n  }\n\n  ctrl.formatFileSize = function (size) {\n    return DatabusUtils.formatFileSize(size);\n  };\n\n  ctrl.toHTML = function (html) {\n    return $sce.trustAsHtml(html);\n  };\n\n  ctrl.onComponentAdded = function () {\n\n  }\n\n  ctrl.customExpanded = function () {\n    return ctrl.customNode.expanded && ctrl.collection.content.customQueries.length > 0;\n  }\n\n  ctrl.generatedExpanded = function () {\n    return ctrl.generatedNode.expanded && ctrl.collection.content.groups.length > 0;\n  }\n\n  ctrl.publishCollection = function () {\n    ctrl.onPublish();\n  }\n\n  ctrl.delete = function () {\n    ctrl.onDelete();\n  }\n\n  ctrl.goToResource = function (node) {\n    window.location = node.uri;\n  }\n\n  ctrl.formatGroupPrefix = function (uri) {\n    return DatabusUtils.uriToName(DatabusUtils.navigateUp(uri));\n  }\n\n  ctrl.formatArtifactPrefix = function (uri) {\n    var nav = DatabusUtils.navigateUp(uri);\n    var groupName = DatabusUtils.uriToName(nav);\n    var userName = DatabusUtils.uriToName(DatabusUtils.navigateUp(nav));\n\n    return userName + '/' + groupName;\n  }\n\n  ctrl.uriToName = function (uri) {\n    return DatabusUtils.uriToName(uri);\n  }\n\n  ctrl.objSize = function (obj) {\n    return DatabusUtils.objSize(obj);\n  }\n\n  ctrl.showCollectionSearch = function () {\n    ctrl.open = false;\n    ctrl.viewMode = 0;\n    ctrl.activeNode = ctrl.rootNode;\n\n    $location.hash('search');\n  }\n\n  // ctrl.printJSON = function() {\n  //   console.log(JSON.stringify(ctrl.collection));\n  // }\n\n  // SHOW NODES\n  ctrl.showGroupNode = function (groupNode) {\n    ctrl.open = true;\n    ctrl.viewMode = 3;\n    ctrl.activeNode = QueryNode.createFrom(groupNode);\n\n    this.updateQuery();\n  }\n\n  ctrl.showArtifactNode = function (artifactNode, groupNode) {\n\n    ctrl.open = true;\n    ctrl.viewMode = 1;\n    ctrl.activeNode = QueryNode.createFrom(artifactNode);\n\n    this.updateQuery();\n  }\n\n  ctrl.querySparql = async function (query) {\n\n\n    try {\n\n      var req = {\n        method: 'POST',\n        url: DatabusConstants.DATABUS_SPARQL_ENDPOINT_URL,\n        data: \"format=json&query=\" + encodeURIComponent(query),\n        headers: {\n          \"Content-type\": \"application/x-www-form-urlencoded\"\n        },\n      }\n\n      var updateResponse = await ctrl.$http(req);\n\n      var data = updateResponse.data;\n      var bindings = data.results.bindings;\n\n      for (var b in bindings) {\n        ctrl.reduceBinding(bindings[b]);\n      }\n\n      return bindings;\n\n\n    } catch (e) {\n      console.log(e);\n    }\n  }\n\n  ctrl.reduceBinding = function (binding) {\n    for (var key in binding) {\n      binding[key] = binding[key].value;\n    }\n\n    return binding;\n  }\n\n\n\n  ctrl.updateQuery = function () {\n    var queryNode = QueryNode.createSubTree(ctrl.activeNode);\n\n    ctrl.activeFileQuery = QueryBuilder.build({\n      node: queryNode,\n      template: QueryTemplates.DEFAULT_FILE_TEMPLATE,\n      resourceBaseUrl: DATABUS_RESOURCE_BASE_URL\n    });\n\n    ctrl.activeFullQuery = QueryBuilder.build({\n      node: queryNode,\n      template: QueryTemplates.NODE_FILE_TEMPLATE,\n      resourceBaseUrl: DATABUS_RESOURCE_BASE_URL\n    });\n  }\n\n  ctrl.onActiveNodeChanged = function () {\n    this.updateQuery();\n\n    ctrl.onChange();\n  }\n\n  ctrl.addCustomNode = function (sourceNode, label, desc, query) {\n\n    var node = new QueryNode(label, query);\n    sourceNode.childNodes.push(node);\n\n\n    ctrl.updateViewModel();\n    ctrl.onChange();\n  }\n\n  ctrl.removeNode = function (node) {\n\n    var parent = ctrl.collectionWrapper.getParentNode(node);\n    ctrl.collectionWrapper.removeNodeByUri(node.uri);\n\n    if (parent != null) {\n      ctrl.query(parent);\n    }\n\n    ctrl.onChange();\n  }\n\n  ctrl.showCustomQueryNode = function (customQueryNode) {\n    ctrl.open = true;\n    ctrl.viewMode = 2;\n    ctrl.activeNode = customQueryNode;\n  }\n\n  ctrl.list = function (setting) {\n\n    var allEntries = Object.keys(setting).map(function (key, index) {\n\n      var label = undefined;\n      var entry = setting[key];\n\n      if (entry.value == '') {\n        label = '<i style=\"color: #a3a3a3;\">None</i>';\n      } else if (entry.value == '$latest') {\n        label = 'Latest Version';\n      } else {\n        label = entry.value;\n      }\n\n      if (entry.checked) {\n        return label;\n      } else {\n        return `<s>${label}</s>`;\n      }\n    });\n\n\n    var list = [];\n    var maxLength = 50;\n    var length = 0;\n    var hasOverflow = false;\n\n    for (var entry of allEntries) {\n      if (entry.length + length > maxLength) {\n        hasOverflow = true;\n        break;\n      }\n\n      length += entry.length;\n      list.push(entry);\n    }\n\n    if (hasOverflow) {\n      list.push('...');\n    }\n\n    return ctrl.$sce.trustAsHtml(list.join(', '));\n    // return setting.map(function (v) { return v.value }).join(', ');\n  }\n}\n\n\nmodule.exports = CollectionHierarchyControllerTwo;\n\n//# sourceURL=webpack://databus-webapp/./js/components/collection-hierarchy-two/collection-hierarchy.js?");

/***/ }),

/***/ "./js/components/collection-node/collection-node.js":
/*!**********************************************************!*\
  !*** ./js/components/collection-node/collection-node.js ***!
  \**********************************************************/
/***/ ((module) => {

eval("// TODO Fabian evtl bug\n\n// hinzufgen eines Controllers zum Modul\nfunction CollectionNodeController() {\n\n  var ctrl = this;\n\n  ctrl.$onInit = function() {\n\n  }\n\n  ctrl.removeNode = function() {\n    ctrl.onRemoveNode();\n  }\n\n  ctrl.click = function() {\n    ctrl.onClick();\n  }\n}\n\nmodule.exports = CollectionNodeController;\n\n//# sourceURL=webpack://databus-webapp/./js/components/collection-node/collection-node.js?");

/***/ }),

/***/ "./js/components/collection-search/collection-search.js":
/*!**************************************************************!*\
  !*** ./js/components/collection-search/collection-search.js ***!
  \**************************************************************/
/***/ ((module) => {

eval("// hinzufgen eines Controllers zum Modul\nfunction CollectionSearchController(collectionManager, $http, $interval, $sce) {\n\n  var ctrl = this;\n\n  ctrl.results = [];\n  ctrl.collectionManager = collectionManager;\n\n\n\n  \n\n\n\n  ctrl.formatResult = function (result) {\n    return $sce.trustAsHtml(result);\n  }\n\n  ctrl.getDatabusUrls = function () {\n\n    if (ctrl.databusUrls != undefined) {\n      return ctrl.databusUrls;\n    }\n\n    ctrl.databusUrls = [];\n    var root = ctrl.collection.content.root;\n\n    for (var sourceNode of root.childNodes) {\n      ctrl.databusUrls.push(sourceNode.uri);\n    }\n\n    return ctrl.databusUrls;\n  }\n\n  ctrl.$onInit = function () {\n\n    ctrl.searchInput = '';\n    ctrl.filters = {};\n    ctrl.filters.filterArtifact = false;\n    ctrl.filters.filterGroup = false;\n    ctrl.searchCooldown = 1000;\n\n    ctrl.root = QueryNode.createFrom(ctrl.collection.content.root);\n\n    ctrl.collectionWrapper = new DatabusCollectionWrapper(ctrl.collection);\n    ctrl.autoFocus = true;\n  }\n\n  // TODO Fabian\n  ctrl.isInCollection = function (result) {\n    let uri = result.id[0].value;\n    let node = QueryNode.findChildByUri(ctrl.root, uri);\n\n    return node != null;\n  }\n\n\n  ctrl.addToCollection = function (result) {\n\n    var currentSource = ctrl.targetDatabusUrl;\n    var sourceNode = QueryNode.findChildByUri(ctrl.root, currentSource);\n\n    if (result.inCollection) {\n      QueryNode.removeChildByUri(ctrl.root, result.id[0].value);\n    }\n    else {\n      if (result.typeName[0].value == 'Group') {\n        let node = new QueryNode(result.id[0].value, 'databus:group');\n\n        sourceNode.addChild(node);\n        ctrl.onComponentAdded();\n      }\n\n      if (result.typeName[0].value == 'Artifact') {\n\n        var artifactUri = result.id[0].value;\n        let groupUri = DatabusUtils.navigateUp(artifactUri);\n        let groupNode = QueryNode.findChildByUri(ctrl.root, groupUri);\n\n        if (groupNode == null) {\n          groupNode = new QueryNode(groupUri, 'databus:group');\n          sourceNode.addChild(groupNode);\n        }\n\n        let node = new QueryNode(artifactUri, 'databus:artifact');\n        groupNode.addChild(node);\n\n        ctrl.onComponentAdded();\n      }\n    }\n\n    for (let r in ctrl.results) {\n      ctrl.results[r].inCollection = ctrl.isInCollection(ctrl.results[r]);\n    }\n\n    ctrl.collectionManager.saveLocally();\n\n    console.log(ctrl.root);\n  }\n\n  $interval(function () {\n\n    if (ctrl.searchChanged) {\n\n      if (!DatabusUtils.isValidHttpUrl(ctrl.targetDatabusUrl)) {\n        return;\n      }\n\n      var typeFilters = '?typeName=Artifact Group';\n\n      if (ctrl.filters.filterArtifact || ctrl.filters.filterGroup) {\n\n        typeFilters = '?typeName='\n        if (ctrl.filters.filterArtifact) {\n          typeFilters += 'Artifact ';\n        }\n        if (ctrl.filters.filterGroup) {\n          typeFilters += 'Group ';\n        }\n      }\n\n      ctrl.lastQuery = ctrl.searchInput;\n\n      try {\n\n        $http({\n          method: 'GET',\n          url: ctrl.targetDatabusUrl + '/api/search' + typeFilters + '&format=JSON_FULL&minRelevance=10&maxResults=10&query='\n            + ctrl.searchInput,\n        }).then(function successCallback(response) {\n\n          if (ctrl.lastQuery != response.data.query) {\n            return;\n          }\n\n          ctrl.results = response.data.docs;\n\n          for (var r in ctrl.results) {\n            ctrl.results[r].inCollection = ctrl.isInCollection(ctrl.results[r]);\n          }\n\n        }, function errorCallback(response) {\n        });\n      } catch (err) {\n\n      }\n\n      ctrl.searchChanged = false;\n    };\n  }, ctrl.searchCooldown);\n\n  ctrl.search = function () {\n    ctrl.searchChanged = true;\n  };\n}\n\n\nmodule.exports = CollectionSearchController;\n\n//# sourceURL=webpack://databus-webapp/./js/components/collection-search/collection-search.js?");

/***/ }),

/***/ "./js/components/collection-statistics/collection-statistics.js":
/*!**********************************************************************!*\
  !*** ./js/components/collection-statistics/collection-statistics.js ***!
  \**********************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("const DatabusCollectionUtils = __webpack_require__(/*! ../../collections/databus-collection-utils */ \"./js/collections/databus-collection-utils.js\");\nconst DatabusUtils = __webpack_require__(/*! ../../utils/databus-utils */ \"./js/utils/databus-utils.js\");\nconst DatabusWebappUtils = __webpack_require__(/*! ../../utils/databus-webapp-utils */ \"./js/utils/databus-webapp-utils.js\");\n\n// hinzufgen eines Controllers zum Modul\nfunction CollectionStatisticsController($http, $scope, $location, $sce) {\n\n  var ctrl = this;\n  ctrl.$http = $http;\n  ctrl.utils = new DatabusWebappUtils($scope, $sce);\n\n\n  ctrl.$onInit = function() {\n    ctrl.isLoading = true;\n    DatabusCollectionUtils.getCollectionStatistics(ctrl.$http, ctrl.collection).then(function(result) {\n      ctrl.statistics = result;\n      ctrl.isLoading = false;\n      $scope.$apply();\n    }, function(err) {\n      ctrl.statistics = null;\n      ctrl.isLoading = false;\n    });\n  }\n\n  ctrl.markdownToHtml = function(markdown) {\n    return ctrl.utils.markdownToHtml(markdown);\n  };\n\n  ctrl.formatUploadSize = function(size) {\n    return DatabusUtils.formatFileSize(size);\n  };\n}\n\nmodule.exports = CollectionStatisticsController;\n\n\n\n//# sourceURL=webpack://databus-webapp/./js/components/collection-statistics/collection-statistics.js?");

/***/ }),

/***/ "./js/components/collection-status/collection-status.js":
/*!**************************************************************!*\
  !*** ./js/components/collection-status/collection-status.js ***!
  \**************************************************************/
/***/ ((module) => {

eval("\n\n// hinzufgen eines Controllers zum Modul\nfunction CollectionStatusController($http, $location, $sce) {\n\n  var ctrl = this;\n\n  ctrl.$onInit = function() {\n\n    ctrl.colors = [];\n    ctrl.colors.push('#b54c4c');\n    ctrl.colors.push('#aaa');\n    ctrl.colors.push('#aaa');\n    ctrl.colors.push('#e8ca5f');\n    ctrl.colors.push('#3a3');\n\n    ctrl.labels = [];\n    ctrl.labels.push('Draft');\n    ctrl.labels.push('Hidden, Uncommitted Changes');\n    ctrl.labels.push('Hidden');\n    ctrl.labels.push('Visible, Uncommitted Changes');\n    ctrl.labels.push('Visible');\n  }\n\n  ctrl.$doCheck = function() {\n    if(ctrl.isDraft) {\n      ctrl.status = 0;\n      return;\n    }\n\n    if(ctrl.isPublished) {\n      ctrl.status = ctrl.hasLocalChanges ? 3 : 4;\n    } else {\n      ctrl.status = ctrl.hasLocalChanges ? 1 : 2;\n    }\n  }\n}\n\nmodule.exports = CollectionStatusController;\n\n\n//# sourceURL=webpack://databus-webapp/./js/components/collection-status/collection-status.js?");

/***/ }),

/***/ "./js/components/databus-alert/databus-alert-controller.js":
/*!*****************************************************************!*\
  !*** ./js/components/databus-alert/databus-alert-controller.js ***!
  \*****************************************************************/
/***/ ((module) => {

eval("\n// hinzufgen eines Controllers zum Modul\nfunction DatabusAlertController($scope, $timeout) {\n\n  var ctrl = this;\n\n  $scope.$on('onDatabusAlert', function(e, data) {\n    ctrl.isSuccess = data.isSuccess;\n    ctrl.message = data.message;\n    ctrl.isVisible = false;\n\n    if(ctrl.hidePromise != null) {\n      $timeout.cancel(ctrl.hidePromise);\n    }\n\n    $timeout(function() {\n      ctrl.isVisible = true;\n    }, 0);\n\n    ctrl.hidePromise = $timeout(function() {\n      ctrl.isVisible = false;\n    }, data.ms);\n  });\n\n  ctrl.$onInit = function() {\n\n  }\n\n  ctrl.isSuccess = function() {\n    return ctrl.isSuccess;\n  }\n\n  ctrl.$doCheck = function() {\n    \n  }\n}\n\nmodule.exports = DatabusAlertController;\n\n\n//# sourceURL=webpack://databus-webapp/./js/components/databus-alert/databus-alert-controller.js?");

/***/ }),

/***/ "./js/components/databus-alert/databus-alert.js":
/*!******************************************************!*\
  !*** ./js/components/databus-alert/databus-alert.js ***!
  \******************************************************/
/***/ ((module) => {

eval("\nclass DatabusAlert {\n  static alert($scope, isSuccess, message, ms) {\n    if(ms == undefined) {\n      ms = 3000; \n    }\n    $scope.$broadcast('onDatabusAlert', { isSuccess: isSuccess, message: message, ms: ms});\n  }\n\n  static alertCode($scope, code, ms) {\n    if(ms == undefined) {\n      ms = 3000; \n    }\n\n    var isSuccess = code >= 200 && code < 400;\n    $scope.$broadcast('onDatabusAlert', { isSuccess: isSuccess, message: message, ms: ms});\n  }\n}\n\n\nmodule.exports = DatabusAlert;\n\n\n//# sourceURL=webpack://databus-webapp/./js/components/databus-alert/databus-alert.js?");

/***/ }),

/***/ "./js/components/databus-icon/databus-icon.js":
/*!****************************************************!*\
  !*** ./js/components/databus-icon/databus-icon.js ***!
  \****************************************************/
/***/ ((module) => {

eval("// hinzufgen eines Controllers zum Modul\r\nfunction DatabusIconController() {\r\n\r\n  var ctrl = this;\r\n\r\n  ctrl.iconMap = {};\r\n  ctrl.iconMap['databus'] = \"m 1.8847 0.3851 v 2.6248 l 14.6656 -0.0005 l 3.1363 4.4338 l -0.001 16.0412 l 2.3606 -0.001 V 0.3851 Z m 9.2176 4.1976 l -2.8418 0.003 l 3.5989 5.2742 l -0.002 13.6233 l 2.352 -0.001 l 0.0083 -14.3005 z m -4.7365 0.001 l -4.4826 0.001 l 0.002 18.898 l 8.3978 -0.002 l 0.0005 -13.1455 z m 6.6256 0 l 2.7991 4.1094 l -0.0198 14.7881 l 2.3515 -0.001 l 0.003 -15.5479 l -2.2793 -3.347 z\";\r\n  ctrl.iconMap['add'] = \"M 11 11 M 2 12 L 11 12 L 11 21 L 12 21 L 12 12 L 21 12 L 21 11 L 12 11 L 12 2 L 11 2 L 11 11 L 2 11 L 2 12\";\r\n  ctrl.iconMap['remove'] = \"M 11 11 M 2 12 L 21 12 L 21 11 L 2 11 L 2 12\";\r\n  ctrl.iconMap['add-thick'] = \"m11 11h-7.25c-.414 0-.75.336-.75.75s.336.75.75.75h7.25v7.25c0 .414.336.75.75.75s.75-.336.75-.75v-7.25h7.25c.414 0 .75-.336.75-.75s-.336-.75-.75-.75h-7.25v-7.25c0-.414-.336-.75-.75-.75s-.75.336-.75.75z\";\r\n  ctrl.iconMap['close'] = \"m12 10.93 5.719-5.72c.146-.146.339-.219.531-.219.404 0 .75.324.75.749 0 .193-.073.385-.219.532l-5.72 5.719 5.719 5.719c.147.147.22.339.22.531 0 .427-.349.75-.75.75-.192 0-.385-.073-.531-.219l-5.719-5.719-5.719 5.719c-.146.146-.339.219-.531.219-.401 0-.75-.323-.75-.75 0-.192.073-.384.22-.531l5.719-5.719-5.72-5.719c-.146-.147-.219-.339-.219-.532 0-.425.346-.749.75-.749.192 0 .385.073.531.219z\";\r\n  ctrl.iconMap['delete'] = \"M9 3h6v-1.75c0-.066-.026-.13-.073-.177-.047-.047-.111-.073-.177-.073h-5.5c-.066 0-.13.026-.177.073-.047.047-.073.111-.073.177v1.75zm11 1h-16v18c0 .552.448 1 1 1h14c.552 0 1-.448 1-1v-18zm-10 3.5c0-.276-.224-.5-.5-.5s-.5.224-.5.5v12c0 .276.224.5.5.5s.5-.224.5-.5v-12zm5 0c0-.276-.224-.5-.5-.5s-.5.224-.5.5v12c0 .276.224.5.5.5s.5-.224.5-.5v-12zm8-4.5v1h-2v18c0 1.105-.895 2-2 2h-14c-1.105 0-2-.895-2-2v-18h-2v-1h7v-2c0-.552.448-1 1-1h6c.552 0 1 .448 1 1v2h7z\";\r\n  ctrl.iconMap['goto'] = \"M21.883 12l-7.527 6.235.644.765 9-7.521-9-7.479-.645.764 7.529 6.236h-21.884v1h21.883z\";\r\n  ctrl.iconMap['edit'] = \"M8.071 21.586l-7.071 1.414 1.414-7.071 14.929-14.929 5.657 5.657-14.929 14.929zm-.493-.921l-4.243-4.243-1.06 5.303 5.303-1.06zm9.765-18.251l-13.3 13.301 4.242 4.242 13.301-13.3-4.243-4.243z\";\r\n  ctrl.iconMap['edit-thick'] = \"M7.127 22.564l-7.126 1.436 1.438-7.125 5.688 5.689zm-4.274-7.104l5.688 5.689 15.46-15.46-5.689-5.689-15.459 15.46z\";\r\n  ctrl.iconMap['goback'] = \"M2.117 12l7.527 6.235-.644.765-9-7.521 9-7.479.645.764-7.529 6.236h21.884v1h-21.883z\";\r\n  ctrl.iconMap['right'] = \"M4 .755l14.374 11.245-14.374 11.219.619.781 15.381-12-15.391-12-.609.755z\";\r\n  ctrl.iconMap['left'] = \"M20 .755l-14.374 11.245 14.374 11.219-.619.781-15.381-12 15.391-12 .609.755z\";\r\n  ctrl.iconMap['down'] = \"M23.245 4l-11.245 14.374-11.219-14.374-.781.619 12 15.381 12-15.391-.755-.609z\";\r\n  ctrl.iconMap['left-thick'] = \"M16.67 0l2.83 2.829-9.339 9.175 9.339 9.167-2.83 2.829-12.17-11.996z\";\r\n  ctrl.iconMap['help'] = \"M12 0c6.623 0 12 5.377 12 12s-5.377 12-12 12-12-5.377-12-12 5.377-12 12-12zm0 1c6.071 0 11 4.929 11 11s-4.929 11-11 11-11-4.929-11-11 4.929-11 11-11zm.053 17c.466 0 .844-.378.844-.845 0-.466-.378-.844-.844-.844-.466 0-.845.378-.845.844 0 .467.379.845.845.845zm.468-2.822h-.998c-.035-1.162.182-2.054.939-2.943.491-.57 1.607-1.479 1.945-2.058.722-1.229.077-3.177-2.271-3.177-1.439 0-2.615.877-2.928 2.507l-1.018-.102c.28-2.236 1.958-3.405 3.922-3.405 1.964 0 3.615 1.25 3.615 3.22 0 1.806-1.826 2.782-2.638 3.868-.422.563-.555 1.377-.568 2.09z\";\r\n  ctrl.iconMap['max'] = \"M24 22h-24v-20h24v20zm-7-1v-15h-16v15h16zm1 0h5v-18h-22v2h17v16zm-6-6h-1v-3.241l-7.241 7.241-.759-.759 7.241-7.241h-3.241v-1h5v5z\";\r\n  ctrl.iconMap['min'] = \"M24 22h-24v-20h24v20zm-23-9v8h10v-8h-10zm22 8v-18h-22v9h11v9h11zm-4-9h-5v-5h1v3.241l5.241-5.241.759.759-5.241 5.241h3.241v1z\";\r\n  ctrl.iconMap['error'] = \"M24 23h-24l12-22 12 22zm-22.315-1h20.63l-10.315-18.912-10.315 18.912zm10.315-2c.466 0 .845-.378.845-.845 0-.466-.379-.844-.845-.844-.466 0-.845.378-.845.844 0 .467.379.845.845.845zm.5-11v8h-1v-8h1z\";\r\n  ctrl.iconMap['info'] = \"M12 0c6.623 0 12 5.377 12 12s-5.377 12-12 12-12-5.377-12-12 5.377-12 12-12zm0 1c6.071 0 11 4.929 11 11s-4.929 11-11 11-11-4.929-11-11 4.929-11 11-11zm.5 17h-1v-9h1v9zm-.5-12c.466 0 .845.378.845.845 0 .466-.379.844-.845.844-.466 0-.845-.378-.845-.844 0-.467.379-.845.845-.845z\";\r\n  ctrl.iconMap['eye'] = \"M12.01 20c-5.065 0-9.586-4.211-12.01-8.424 2.418-4.103 6.943-7.576 12.01-7.576 5.135 0 9.635 3.453 11.999 7.564-2.241 4.43-6.726 8.436-11.999 8.436zm-10.842-8.416c.843 1.331 5.018 7.416 10.842 7.416 6.305 0 10.112-6.103 10.851-7.405-.772-1.198-4.606-6.595-10.851-6.595-6.116 0-10.025 5.355-10.842 6.584zm10.832-4.584c2.76 0 5 2.24 5 5s-2.24 5-5 5-5-2.24-5-5 2.24-5 5-5zm0 1c2.208 0 4 1.792 4 4s-1.792 4-4 4-4-1.792-4-4 1.792-4 4-4z\";\r\n  ctrl.iconMap['add-artifact'] = \"M 12 0 M 12.016 1.424 L 21.756 12.053 L 12.016 22.563 L 2.204 12.005 L 3.396 10.721 L 2.774 10.058 L 1 12 L 12 24 L 23 12 L 12 0 L 10.153 2.078 L 10.837 2.741 Z M 6 6 L 6 2 L 7 2 L 7 6 L 11 6 L 11 7 L 7 7 L 7 11 L 6 11 L 6 7 L 2 7 L 2 6 L 6 6\";\r\n  ctrl.iconMap['add-button'] = \"M24 10h-10v-10h-4v10h-10v4h10v10h4v-10h10z\";\r\n  ctrl.iconMap['collections'] = \"M11.499 12.03v11.971l-10.5-5.603v-11.835l10.5 5.467zm11.501 6.368l-10.501 5.602v-11.968l10.501-5.404v11.77zm-16.889-15.186l10.609 5.524-4.719 2.428-10.473-5.453 4.583-2.499zm16.362 2.563l-4.664 2.4-10.641-5.54 4.831-2.635 10.474 5.775z\";\r\n  ctrl.iconMap['collections-thin'] = \"M23 6.066v12.065l-11.001 5.869-11-5.869v-12.131l11-6 11.001 6.066zm-21.001 11.465l9.5 5.069v-10.57l-9.5-4.946v10.447zm20.001-10.388l-9.501 4.889v10.568l9.501-5.069v-10.388zm-5.52 1.716l-9.534-4.964-4.349 2.373 9.404 4.896 4.479-2.305zm-8.476-5.541l9.565 4.98 3.832-1.972-9.405-5.185-3.992 2.177z\";\r\n  ctrl.iconMap['content'] = \"M9.484 15.696l-.711-.696-2.552 2.607-1.539-1.452-.698.709 2.25 2.136 3.25-3.304zm0-5l-.711-.696-2.552 2.607-1.539-1.452-.698.709 2.25 2.136 3.25-3.304zm0-5l-.711-.696-2.552 2.607-1.539-1.452-.698.709 2.25 2.136 3.25-3.304zm10.516 11.304h-8v1h8v-1zm0-5h-8v1h8v-1zm0-5h-8v1h8v-1zm4-5h-24v20h24v-20zm-1 19h-22v-18h22v18z\"\r\n  ctrl.iconMap['menu'] = \"M24 18v1h-24v-1h24zm0-6v1h-24v-1h24zm0-6v1h-24v-1h24z\";\r\n  ctrl.iconMap['copy'] = \"M17 7h6v16h-16v-6h-6v-16h16v6zm5 1h-14v14h14v-14zm-6-1v-5h-14v14h5v-9h9z\";\r\n  ctrl.iconMap['upload'] = \"M9 16h-8v6h22v-6h-8v-1h9v8h-24v-8h9v1zm11 2c.552 0 1 .448 1 1s-.448 1-1 1-1-.448-1-1 .448-1 1-1zm-7.5 0h-1v-14.883l-4.735 5.732-.765-.644 6.021-7.205 5.979 7.195-.764.645-4.736-5.724v14.884z\";\r\n  ctrl.iconMap['hide'] = \"M8.137 15.147c-.71-.857-1.146-1.947-1.146-3.147 0-2.76 2.241-5 5-5 1.201 0 2.291.435 3.148 1.145l1.897-1.897c-1.441-.738-3.122-1.248-5.035-1.248-6.115 0-10.025 5.355-10.842 6.584.529.834 2.379 3.527 5.113 5.428l1.865-1.865zm6.294-6.294c-.673-.53-1.515-.853-2.44-.853-2.207 0-4 1.792-4 4 0 .923.324 1.765.854 2.439l5.586-5.586zm7.56-6.146l-19.292 19.293-.708-.707 3.548-3.548c-2.298-1.612-4.234-3.885-5.548-6.169 2.418-4.103 6.943-7.576 12.01-7.576 2.065 0 4.021.566 5.782 1.501l3.501-3.501.707.707zm-2.465 3.879l-.734.734c2.236 1.619 3.628 3.604 4.061 4.274-.739 1.303-4.546 7.406-10.852 7.406-1.425 0-2.749-.368-3.951-.938l-.748.748c1.475.742 3.057 1.19 4.699 1.19 5.274 0 9.758-4.006 11.999-8.436-1.087-1.891-2.63-3.637-4.474-4.978zm-3.535 5.414c0-.554-.113-1.082-.317-1.562l.734-.734c.361.69.583 1.464.583 2.296 0 2.759-2.24 5-5 5-.832 0-1.604-.223-2.295-.583l.734-.735c.48.204 1.007.318 1.561.318 2.208 0 4-1.792 4-4z\";\r\n  ctrl.iconMap['download'] = \"M6 16h-5v6h22v-6h-5v-1h6v8h-24v-8h6v1zm14 2c.552 0 1 .448 1 1s-.448 1-1 1-1-.448-1-1 .448-1 1-1zm-7.5-17v14.884l4.736-5.724.764.645-5.979 7.195-6.021-7.205.765-.644 4.735 5.732v-14.883h1z\";\r\n  ctrl.iconMap['import'] = \"M16.965 2.381c3.593 1.946 6.035 5.749 6.035 10.119 0 6.347-5.153 11.5-11.5 11.5s-11.5-5.153-11.5-11.5c0-4.37 2.442-8.173 6.035-10.119l.608.809c-3.353 1.755-5.643 5.267-5.643 9.31 0 5.795 4.705 10.5 10.5 10.5s10.5-4.705 10.5-10.5c0-4.043-2.29-7.555-5.643-9.31l.608-.809zm-4.965-2.381v14.826l3.747-4.604.753.666-5 6.112-5-6.101.737-.679 3.763 4.608v-14.828h1z\";\r\n  ctrl.iconMap['filter'] = \"M23 0l-9 14.146v7.73l-3.996 2.124v-9.853l-9.004-14.147h22zm-20.249 1l8.253 12.853v8.491l1.996-1.071v-7.419l8.229-12.854h-18.478z\";\r\n  ctrl.iconMap['check'] = \"M9 22l-10-10.598 2.798-2.859 7.149 7.473 13.144-14.016 2.909 2.806z\";\r\n  ctrl.iconMap['settings'] = \"M12 8.666c-1.838 0-3.333 1.496-3.333 3.334s1.495 3.333 3.333 3.333 3.333-1.495 3.333-3.333-1.495-3.334-3.333-3.334m0 7.667c-2.39 0-4.333-1.943-4.333-4.333s1.943-4.334 4.333-4.334 4.333 1.944 4.333 4.334c0 2.39-1.943 4.333-4.333 4.333m-1.193 6.667h2.386c.379-1.104.668-2.451 2.107-3.05 1.496-.617 2.666.196 3.635.672l1.686-1.688c-.508-1.047-1.266-2.199-.669-3.641.567-1.369 1.739-1.663 3.048-2.099v-2.388c-1.235-.421-2.471-.708-3.047-2.098-.572-1.38.057-2.395.669-3.643l-1.687-1.686c-1.117.547-2.221 1.257-3.642.668-1.374-.571-1.656-1.734-2.1-3.047h-2.386c-.424 1.231-.704 2.468-2.099 3.046-.365.153-.718.226-1.077.226-.843 0-1.539-.392-2.566-.893l-1.687 1.686c.574 1.175 1.251 2.237.669 3.643-.571 1.375-1.734 1.654-3.047 2.098v2.388c1.226.418 2.468.705 3.047 2.098.581 1.403-.075 2.432-.669 3.643l1.687 1.687c1.45-.725 2.355-1.204 3.642-.669 1.378.572 1.655 1.738 2.1 3.047m3.094 1h-3.803c-.681-1.918-.785-2.713-1.773-3.123-1.005-.419-1.731.132-3.466.952l-2.689-2.689c.873-1.837 1.367-2.465.953-3.465-.412-.991-1.192-1.087-3.123-1.773v-3.804c1.906-.678 2.712-.782 3.123-1.773.411-.991-.071-1.613-.953-3.466l2.689-2.688c1.741.828 2.466 1.365 3.465.953.992-.412 1.082-1.185 1.775-3.124h3.802c.682 1.918.788 2.714 1.774 3.123 1.001.416 1.709-.119 3.467-.952l2.687 2.688c-.878 1.847-1.361 2.477-.952 3.465.411.992 1.192 1.087 3.123 1.774v3.805c-1.906.677-2.713.782-3.124 1.773-.403.975.044 1.561.954 3.464l-2.688 2.689c-1.728-.82-2.467-1.37-3.456-.955-.988.41-1.08 1.146-1.785 3.126\";\r\n  ctrl.iconMap['clipboard'] = \"M 17 17 L 7 17 L 7 16 L 17 16 L 17 17 Z M 17 14 L 7 14 L 7 13 L 17 13 L 17 14 Z M 17 11 L 7 11 L 7 10 L 17 10 L 17 11 Z M 16 6 L 8 6 L 7 1 L 17 1 L 16 6 Z M 15.7 2 L 8.25 2 L 8.9 5 L 15.1 5 L 15.7 2 Z M 22 23 L 2 23 L 2 3 L 5.5 3 L 5.7 4 L 3 4 L 3 22 L 21 22 L 21 4 L 18.3 4 L 18.5 3 L 22 3 L 22 23 Z\";\r\n  ctrl.iconMap['sort-desc'] = \"M11 21.883l-6.235-7.527-.765.644 7.521 9 7.479-9-.764-.645-6.236 7.529v-21.884h-1v21.883z\";\r\n  ctrl.iconMap['sort-asc'] = \"M11 2.206l-6.235 7.528-.765-.645 7.521-9 7.479 9-.764.646-6.236-7.53v21.884h-1v-21.883z\";\r\n  ctrl.iconMap['key'] = \"M12.451 17.337l-2.451 2.663h-2v2h-2v2h-6v-5l6.865-6.949c1.08 2.424 3.095 4.336 5.586 5.286zm11.549-9.337c0 4.418-3.582 8-8 8s-8-3.582-8-8 3.582-8 8-8 8 3.582 8 8zm-3-3c0-1.104-.896-2-2-2s-2 .896-2 2 .896 2 2 2 2-.896 2-2z\";\r\n  ctrl.iconMap['gears'] = \"M17 10.645v-2.29c-1.17-.417-1.907-.533-2.28-1.431-.373-.9.07-1.512.6-2.625l-1.618-1.619c-1.105.525-1.723.974-2.626.6-.9-.373-1.017-1.116-1.431-2.28h-2.29c-.412 1.158-.53 1.907-1.431 2.28h-.001c-.9.374-1.51-.07-2.625-.6l-1.617 1.619c.527 1.11.973 1.724.6 2.625-.375.901-1.123 1.019-2.281 1.431v2.289c1.155.412 1.907.531 2.28 1.431.376.908-.081 1.534-.6 2.625l1.618 1.619c1.107-.525 1.724-.974 2.625-.6h.001c.9.373 1.018 1.118 1.431 2.28h2.289c.412-1.158.53-1.905 1.437-2.282h.001c.894-.372 1.501.071 2.619.602l1.618-1.619c-.525-1.107-.974-1.723-.601-2.625.374-.899 1.126-1.019 2.282-1.43zm-8.5 1.689c-1.564 0-2.833-1.269-2.833-2.834s1.269-2.834 2.833-2.834 2.833 1.269 2.833 2.834-1.269 2.834-2.833 2.834zm15.5 4.205v-1.077c-.55-.196-.897-.251-1.073-.673-.176-.424.033-.711.282-1.236l-.762-.762c-.52.248-.811.458-1.235.283-.424-.175-.479-.525-.674-1.073h-1.076c-.194.545-.25.897-.674 1.073-.424.176-.711-.033-1.235-.283l-.762.762c.248.523.458.812.282 1.236-.176.424-.528.479-1.073.673v1.077c.544.193.897.25 1.073.673.177.427-.038.722-.282 1.236l.762.762c.521-.248.812-.458 1.235-.283.424.175.479.526.674 1.073h1.076c.194-.545.25-.897.676-1.074h.001c.421-.175.706.034 1.232.284l.762-.762c-.247-.521-.458-.812-.282-1.235s.529-.481 1.073-.674zm-4 .794c-.736 0-1.333-.597-1.333-1.333s.597-1.333 1.333-1.333 1.333.597 1.333 1.333-.597 1.333-1.333 1.333zm-4 3.071v-.808c-.412-.147-.673-.188-.805-.505s.024-.533.212-.927l-.572-.571c-.389.186-.607.344-.926.212s-.359-.394-.506-.805h-.807c-.146.409-.188.673-.506.805-.317.132-.533-.024-.926-.212l-.572.571c.187.393.344.609.212.927-.132.318-.396.359-.805.505v.808c.408.145.673.188.805.505.133.32-.028.542-.212.927l.572.571c.39-.186.608-.344.926-.212.318.132.359.395.506.805h.807c.146-.409.188-.673.507-.805h.001c.315-.131.529.025.924.213l.572-.571c-.186-.391-.344-.609-.212-.927s.397-.361.805-.506zm-3 .596c-.552 0-1-.447-1-1s.448-1 1-1 1 .447 1 1-.448 1-1 1z\";\r\n  ctrl.iconMap['wand'] = \"M4.908 2.081l-2.828 2.828 19.092 19.091 2.828-2.828-19.092-19.091zm2.121 6.363l-3.535-3.535 1.414-1.414 3.535 3.535-1.414 1.414zm1.731-5.845c1.232.376 2.197 1.341 2.572 2.573.377-1.232 1.342-2.197 2.573-2.573-1.231-.376-2.196-1.34-2.573-2.573-.375 1.232-1.34 2.197-2.572 2.573zm-5.348 6.954c-.498 1.635-1.777 2.914-3.412 3.413 1.635.499 2.914 1.777 3.412 3.411.499-1.634 1.778-2.913 3.412-3.411-1.634-.5-2.913-1.778-3.412-3.413zm9.553-3.165c.872.266 1.553.948 1.819 1.82.266-.872.948-1.554 1.819-1.82-.871-.266-1.553-.948-1.819-1.82-.266.871-.948 1.554-1.819 1.82zm4.426-6.388c-.303.994-1.082 1.772-2.075 2.076.995.304 1.772 1.082 2.077 2.077.303-.994 1.082-1.772 2.074-2.077-.992-.303-1.772-1.082-2.076-2.076z\";\r\n  ctrl.iconMap['user'] = \"M19 7.001c0 3.865-3.134 7-7 7s-7-3.135-7-7c0-3.867 3.134-7.001 7-7.001s7 3.134 7 7.001zm-1.598 7.18c-1.506 1.137-3.374 1.82-5.402 1.82-2.03 0-3.899-.685-5.407-1.822-4.072 1.793-6.593 7.376-6.593 9.821h24c0-2.423-2.6-8.006-6.598-9.819z\";  \r\n  ctrl.iconMap['version'] = \"M 14.9 1 L 12.293 1.005 L 16.507 7.18 L 16.5 23.1 L 18.5 23.1 L 18.5 6.4 L 14.9 1 Z M 10.4 1 L 1.581 1.004 L 1.584 23.13 L 15 23.1 L 15 7.7 L 10.4 1 Z M 16.8 1 L 20 5.8 L 20 23.1 L 22 23.1 L 22 4.9 L 19.3 1 L 16.8 1 Z\";\r\n  ctrl.iconMap['group'] = \"M21.698 10.658l2.302 1.342-12.002 7-11.998-7 2.301-1.342 9.697 5.658 9.7-5.658zm-9.7 10.657l-9.697-5.658-2.301 1.343 11.998 7 12.002-7-2.302-1.342-9.7 5.657zm12.002-14.315l-12.002-7-11.998 7 11.998 7 12.002-7z\";\r\n  ctrl.iconMap['artifact'] = \"M12,0 L2,12 L12,24 L22,12 L12,0z\";\r\n  \r\n  ctrl.$onInit = function() {\r\n    ctrl.path = ctrl.iconMap[ctrl.shape];\r\n  }\r\n}\r\n\r\n\r\nmodule.exports = DatabusIconController;\n\n//# sourceURL=webpack://databus-webapp/./js/components/databus-icon/databus-icon.js?");

/***/ }),

/***/ "./js/components/entity-api-view/entity-api-view.js":
/*!**********************************************************!*\
  !*** ./js/components/entity-api-view/entity-api-view.js ***!
  \**********************************************************/
/***/ ((module) => {

eval("function EntityApiViewController() {\r\n  const ctrl = this;\r\n\r\n  ctrl.copyToClipboard = function (text) {\r\n    navigator.clipboard.writeText(text).then(() => {\r\n      console.log(\"Copied to clipboard\");\r\n    });\r\n  };\r\n\r\n  ctrl.register = async function () {\r\n    ctrl.isRegistering = true;\r\n    ctrl.isSuccess = false;\r\n    ctrl.isError = false;\r\n    \r\n    if (ctrl.entity && ctrl.entity.register) {\r\n      try {\r\n        let response = await ctrl.entity.register();\r\n        ctrl.log = response.data.log;\r\n        ctrl.isSuccess = true;\r\n      } catch(err) {\r\n        ctrl.log = err.data.log;\r\n        ctrl.isError = true;\r\n      }\r\n    }\r\n\r\n    ctrl.isRegistering = false;\r\n  };\r\n\r\n  ctrl.setApiKeyName = function (name) {\r\n    if (ctrl.entity && ctrl.entity.setApiKeyName) {\r\n      ctrl.entity.setApiKeyName(name);\r\n    }\r\n  };\r\n}\r\n\r\nmodule.exports = EntityApiViewController;\r\n\n\n//# sourceURL=webpack://databus-webapp/./js/components/entity-api-view/entity-api-view.js?");

/***/ }),

/***/ "./js/components/entity-card/entity-card.js":
/*!**************************************************!*\
  !*** ./js/components/entity-card/entity-card.js ***!
  \**************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("const DatabusUtils = __webpack_require__(/*! ../../utils/databus-utils */ \"./js/utils/databus-utils.js\");\n\n// hinzufgen eines Controllers zum Modul\nfunction EntityCardController($sce) {\n\n  var ctrl = this;\n\n  ctrl.$onInit = function() {\n\n    if(ctrl.label == null || ctrl.label == \"\") {\n      ctrl.label = DatabusUtils.uriToTitle(ctrl.uri);\n    }\n  }\n\n  ctrl.formatResult = function(result) {\n    return $sce.trustAsHtml(result);\n  }\n}\n\n\nmodule.exports = EntityCardController;\n\n//# sourceURL=webpack://databus-webapp/./js/components/entity-card/entity-card.js?");

/***/ }),

/***/ "./js/components/entity-dropdown/entity-dropdown.js":
/*!**********************************************************!*\
  !*** ./js/components/entity-dropdown/entity-dropdown.js ***!
  \**********************************************************/
/***/ ((module) => {

eval("function EntityDropdownController() {\r\n  var ctrl = this;\r\n\r\n  ctrl.showDrop = false;\r\n  ctrl.selectedLabel = '';\r\n  ctrl.searchQuery = '';\r\n  ctrl.filteredItems = [];\r\n\r\n  ctrl.$onInit = function () {\r\n    ctrl.updateFilteredItems();\r\n    ctrl.setSelectedLabel();\r\n  };\r\n\r\n  ctrl.$onChanges = function (changes) {\r\n    if (changes.items || changes.selected) {\r\n      ctrl.updateFilteredItems();\r\n\r\n      if (ctrl.selected &&  Array.isArray(ctrl.items) && !ctrl.items?.some(i => i[ctrl.displayProperty] === ctrl.selected)) {\r\n        ctrl.selected = null;\r\n        ctrl.onSelect({ item: null }); \r\n      }\r\n\r\n      ctrl.setSelectedLabel();\r\n    }\r\n  };\r\n\r\n  ctrl.toggleDropdown = function () {\r\n    if (!ctrl.loading && ctrl.items && ctrl.items.length > 0) {\r\n      ctrl.showDrop = !ctrl.showDrop;\r\n      ctrl.searchQuery = '';\r\n      ctrl.updateFilteredItems();\r\n    }\r\n  };\r\n\r\n  ctrl.selectItem = function (item) {\r\n    ctrl.selectedLabel = item[ctrl.displayProperty];\r\n    ctrl.showDrop = false;\r\n    ctrl.onSelect({ item: item });\r\n  };\r\n\r\n  ctrl.updateFilteredItems = function () {\r\n    if (!ctrl.items || !ctrl.displayProperty) {\r\n      ctrl.filteredItems = [];\r\n      return;\r\n    }\r\n\r\n    ctrl.filteredItems = ctrl.items.filter(function (item) {\r\n      var val = item[ctrl.displayProperty] || '';\r\n      return val.toLowerCase().indexOf(ctrl.searchQuery.toLowerCase()) !== -1;\r\n    });\r\n  };\r\n\r\n  ctrl.setSelectedLabel = function () {\r\n    if (!ctrl.selected || !ctrl.displayProperty) {\r\n      ctrl.selectedLabel = ctrl.placeholder || 'Please select...';\r\n      return;\r\n    }\r\n\r\n    // Attempt to match selected value in the list\r\n    var match = (ctrl.items || []).find(function (item) {\r\n      return item[ctrl.displayProperty] === ctrl.selected;\r\n    });\r\n\r\n    if (match) {\r\n      ctrl.selectedLabel = match[ctrl.displayProperty];\r\n    } else {\r\n      // fallback in case selected value is not in the list\r\n      ctrl.selectedLabel = ctrl.placeholder || 'Please select...';\r\n      // ctrl.onSelect(null);\r\n    }\r\n  };\r\n}\r\n\r\nmodule.exports = EntityDropdownController;\r\n\n\n//# sourceURL=webpack://databus-webapp/./js/components/entity-dropdown/entity-dropdown.js?");

/***/ }),

/***/ "./js/components/error-notification/error-notifcation.js":
/*!***************************************************************!*\
  !*** ./js/components/error-notification/error-notifcation.js ***!
  \***************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("const { DatabusMsg } = __webpack_require__(/*! ../../utils/messages */ \"./js/utils/messages.js\");\r\n\r\nfunction ErrorNotificationController() {\r\n  var ctrl = this;\r\n  ctrl.expanded = false;\r\n\r\n  ctrl.toggleExpand = function () {\r\n    ctrl.expanded = !ctrl.expanded;\r\n  };\r\n\r\n  ctrl.get = function(key) {\r\n    return DatabusMsg.get(key);\r\n  }\r\n}\r\n\r\nmodule.exports = ErrorNotificationController;\r\n\n\n//# sourceURL=webpack://databus-webapp/./js/components/error-notification/error-notifcation.js?");

/***/ }),

/***/ "./js/components/expandable-arrow/expandable-arrow.js":
/*!************************************************************!*\
  !*** ./js/components/expandable-arrow/expandable-arrow.js ***!
  \************************************************************/
/***/ ((module) => {

eval("// hinzufgen eines Controllers zum Modul\nfunction ExpandableArrowController() {\n\n  var ctrl = this;\n\n  ctrl.$onInit = function() {\n    if(ctrl.isReadonly == undefined) {\n      ctrl.isReadonly = false;\n    }\n\n    \n  }\n\n  ctrl.change = function() {\n\n    if(!ctrl.isReadonly) {\n      ctrl.expanded = !ctrl.expanded;\n      ctrl.onChange();\n    }\n  }\n}\n\nmodule.exports = ExpandableArrowController;\n\n\n\n//# sourceURL=webpack://databus-webapp/./js/components/expandable-arrow/expandable-arrow.js?");

/***/ }),

/***/ "./js/components/facets-view/facets-view.js":
/*!**************************************************!*\
  !*** ./js/components/facets-view/facets-view.js ***!
  \**************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("const QueryNode = __webpack_require__(/*! ../../query-builder/query-node */ \"./js/query-builder/query-node.js\");\nconst DatabusConstants = __webpack_require__(/*! ../../utils/databus-constants */ \"./js/utils/databus-constants.js\");\nconst DatabusUris = __webpack_require__(/*! ../../utils/databus-uris */ \"./js/utils/databus-uris.js\");\nconst DatabusUtils = __webpack_require__(/*! ../../utils/databus-utils */ \"./js/utils/databus-utils.js\");\n\n/**\n * Manages an array of facets with respect to a parent facets array.\n * Provides some convenient\\ce methods to write to the facets array and\n * read from the parents facets.\n * DO NOT change the parent facets array in here.\n */\nclass FacetSettings {\n\n  /**\n   * Locally manages a facets array with respect to a parent\n   * facets array\n   * @param {[type]} facets       [description]\n   * @param {[type]} parentFacets [description]\n   */\n  constructor(facets, parentFacets) {\n    this.facets = facets;\n    this.parentFacets = parentFacets;\n  }\n\n  /**\n   * Change a setting (key, value) to a state (bool)\n   * @param  {[type]} key    [description]\n   * @param  {[type]} value    [description]\n   * @param  {[type]} setState [description]\n   * @return {[type]}          [description]\n   */\n  changeSetting(key, value, targetState) {\n    var parentState = this.findParentSettingState(key, value);\n\n    if (parentState != targetState) {\n      this.createOrAddSetting(key, value, targetState);\n    } else {\n      this.removeSetting(key, value);\n    }\n\n    return targetState;\n  }\n\n  /**\n   * Find the checked state specified in the parent setting array (if set)\n   * based on a key and value\n   * @param  {[type]} key [description]\n   * @param  {[type]} value [description]\n   * @return {[type]}       [description]\n   */\n  findParentSettingState(key, value) {\n    if (this.parentFacets == undefined) {\n      return false;\n    }\n\n    for (var p in this.parentFacets) {\n      var setting = this.parentFacets[p];\n      if (setting.key == key && setting.value == value) {\n        return setting.checked;\n      }\n    }\n\n    return false;\n  }\n\n  findOwnSettingState(key, value) {\n    for (var p in this.facets) {\n      var setting = this.facets[p];\n      if (setting.key == key && setting.value == value) {\n        return setting.checked;\n      }\n    }\n\n    return false;\n  }\n\n  isOverride(key, value, state) {\n    var parentState = this.findParentSettingState(key, value);\n    return parentState != state;\n  }\n\n  createOrAddSetting(key, value, state) {\n    for (var p in this.facets) {\n      var setting = this.facets[p];\n      if (p == key && setting.value == value) {\n        setting.checked = state;\n        return;\n      }\n    }\n\n    this.facets[key] = { value: value, checked: state };\n  }\n\n  removeSetting(key, value) {\n    for (var p in this.facets) {\n      var setting = this.facets[p];\n      if (setting.key == key && setting.value == value) {\n        this.facets.splice(p, 1);\n        return;\n      }\n    }\n  }\n\n}\n\nfunction FacetsViewController($http, $scope) {\n\n  var ctrl = this;\n  ctrl.$http = $http;\n  ctrl.maxEntries = 6;\n\n  ctrl.$onInit = function () {\n\n  }\n\n  ctrl.$onChanges = function () {\n    // create the queries...\n    ctrl.isLoading = true;\n\n    // wrap the node in the query node class\n    ctrl.node = QueryNode.createFrom(ctrl.node);\n\n    // Holds the view state as json\n    ctrl.viewModel = {};\n\n    if (ctrl.facets == undefined) {\n      ctrl.facets = [];\n    }\n\n    var queryUri = ctrl.resourceType == 'version' ?\n      ctrl.node.uri + '/' + ctrl.node.facetSettings[DatabusUris.DCT_HAS_VERSION][0].value\n      : ctrl.node.uri;\n\n    // Load the available resource facets\n    // TODO: Remove resource type, can be derived from uri\n    ctrl.$http.get('/app/utils/facets', {\n      params: { uri: queryUri, type: ctrl.resourceType }\n    }).then(function (result) {\n\n      // Facets data has been loaded\n      ctrl.facetsData = result.data;\n\n      // Fix artifact facet values for groups, change URIs into artifact names\n      var artifactFacetData = ctrl.facetsData[DatabusUris.DATABUS_ARTIFACT_PROPERTY];\n\n      if (artifactFacetData != null) {\n        for (var i in artifactFacetData.values) {\n          artifactFacetData.values[i] = DatabusUtils.uriToName(artifactFacetData.values[i]);\n        }\n      }\n\n      // Facet setting in this view is\n\n      // - SETTING\n      // ---- VALUE\n      // ---- IS_CHECKED\n\n      // Prepare visible facet settings and autofill data based on the facet data returned by the API\n      // Create key base entries (unset, not overriden)\n      for (var key in ctrl.facetsData) {\n\n        var facetData = ctrl.facetsData[key];\n\n        // Create a view data object for each facet\n        ctrl.viewModel[key] = {};\n        ctrl.viewModel[key].key = key;\n        ctrl.viewModel[key].label = facetData.label;\n        ctrl.viewModel[key].visibleFacetSettings = [];\n        ctrl.viewModel[key].autofill = {};\n        ctrl.viewModel[key].autofill.values = facetData.values;\n        ctrl.viewModel[key].autofill.selectedValues = [];\n        ctrl.viewModel[key].autofill.input = '';\n\n\n        for (var v in facetData.values) {\n          var value = facetData.values[v];\n          ctrl.viewModel[key].visibleFacetSettings.push({\n            value: value,\n            checked: false,\n            isOverride: false\n          });\n        }\n\n        ctrl.viewModel[key].visibleFacetSettings.sort(function (a, b) {\n          const valueA = a.value.toUpperCase();\n          const valueB = b.value.toUpperCase();\n          if (valueA > valueB) {\n            return 1;\n          }\n          if (valueA < valueB) {\n            return -1;\n          }\n\n          return 0;\n        });\n\n        // Show latest versions first\n        if (key == DatabusUris.DCT_HAS_VERSION) {\n          ctrl.viewModel[key].visibleFacetSettings.reverse();\n        }\n\n        // Only show the top few\n        var length = ctrl.viewModel[key].visibleFacetSettings.length;\n        ctrl.viewModel[key].visibleFacetSettings.length = Math.min(ctrl.maxEntries, length);\n      }\n\n      // If we show the browser for a version, remove the version facet\n      if (ctrl.resourceType == 'version') {\n        delete ctrl.viewModel[DatabusUris.DCT_HAS_VERSION];\n      }\n\n      // Add the \"Latest Version\" facet to the visible settings of the version facet\n      if (ctrl.resourceType != 'version' && ctrl.viewModel[DatabusUris.DCT_HAS_VERSION] != undefined) {\n        ctrl.viewModel[DatabusUris.DCT_HAS_VERSION].visibleFacetSettings.unshift({\n          value: DatabusConstants.FACET_LATEST_VERSION_VALUE,\n          checked: false,\n          isOverride: false\n        });\n\n        // Apply the existing settings to the view model\n        var fullFacets = ctrl.node.createFullFacetSettings();\n\n        for (var key in fullFacets) {\n          var facetSettingList = fullFacets[key];\n\n          for (var i in facetSettingList) {\n            var facetSetting = facetSettingList[i];\n\n            var visibleFacetSetting = ctrl.getOrCreateVisibleFacetSetting(key, facetSetting.value);\n\n            if (visibleFacetSetting != null) {\n              visibleFacetSetting.checked = facetSetting.checked;\n              visibleFacetSetting.isOverride = ctrl.node.isOverride(key, facetSetting.value, facetSetting.checked);\n            }\n          }\n        }\n\n        // If we're a group node, check for artifact nodes and add them as facets\n        if (ctrl.resourceType == 'group') {\n\n          for (var i in ctrl.node.childNodes) {\n            var artifactNode = ctrl.node.childNodes[i];\n            var facetValue = DatabusUtils.uriToName(artifactNode.uri)\n            var visibleFacetSetting =\n              ctrl.getOrCreateVisibleFacetSetting(DatabusUris.DATABUS_ARTIFACT_PROPERTY, facetValue);\n            visibleFacetSetting.checked = true;\n            visibleFacetSetting.isOverride = true;\n          }\n\n          if (ctrl.node.childNodes.length == 0) {\n\n\n            ctrl.updateArtifactFilters(ctrl.node);\n\n            var artifactFacetData = ctrl.facetsData[DatabusUris.DATABUS_ARTIFACT_PROPERTY];\n\n            if (artifactFacetData != null) {\n\n              // Add artifact nodes \n              for (var i in artifactFacetData.values) {\n                artifactFacetData.values[i] = DatabusUtils.uriToName(artifactFacetData.values[i]);\n              }\n            }\n\n            /*\n            // Add artifact nodes per default\n            for (var v of ctrl.viewModel[DatabusUris.DATABUS_ARTIFACT_PROPERTY].visibleFacetSettings) {\n              var childUri = ctrl.node.uri + '/' + v.value;\n              var artifactNode = new QueryNode(childUri, 'databus:artifact');\n              QueryNode.addChild(ctrl.node, artifactNode);\n            }*/\n\n\n          }\n        }\n\n        ctrl.onChange();\n        ctrl.onLoaded();\n      }\n\n      ctrl.isLoading = false;\n    });\n  }\n\n  ctrl.updateArtifactFilters = function (groupNode) {\n\n      // Clear all child nodes\n    groupNode.childNodes.length = 0;\n\n    var hasCheckedArtifactFacets = false;\n\n    for (var setting of ctrl.viewModel[DatabusUris.DATABUS_ARTIFACT_PROPERTY].visibleFacetSettings) {\n      hasCheckedArtifactFacets = hasCheckedArtifactFacets || setting.checked;\n    }\n\n    if (hasCheckedArtifactFacets) {\n\n      for (var setting of ctrl.viewModel[DatabusUris.DATABUS_ARTIFACT_PROPERTY].visibleFacetSettings) {\n        if (setting.checked) {\n          var artifactUri = `${groupNode.uri}/${setting.value}`;\n          if (QueryNode.findChildByUri(groupNode, artifactUri) == null) {\n            var artifactNode = new QueryNode(artifactUri, 'databus:artifact');\n            QueryNode.addChild(groupNode, artifactNode);\n          }\n        }\n      }\n\n    } else {\n\n      var latestVersionSetting = QueryNode.findFacetSetting(groupNode,\n        DatabusUris.DCT_HAS_VERSION,\n        DatabusConstants.FACET_LATEST_VERSION_VALUE);\n\n      if (latestVersionSetting != undefined && latestVersionSetting.checked) {\n\n        var artifactFacetData = ctrl.facetsData[DatabusUris.DATABUS_ARTIFACT_PROPERTY];\n\n        if (artifactFacetData != null) {\n\n          // Add artifact nodes \n          for (var value of artifactFacetData.values) {\n            var artifactUri = `${groupNode.uri}/${value}`;\n            if (QueryNode.findChildByUri(groupNode, artifactUri) == null) {\n              var artifactNode = new QueryNode(artifactUri, 'databus:artifact');\n              QueryNode.addChild(groupNode, artifactNode);\n            }\n          }\n\n        }\n      }\n    }\n\n  }\n\n\n  ctrl.getFacetLabel = function (value) {\n    if (value == DatabusConstants.FACET_LATEST_VERSION_VALUE) {\n      return DatabusConstants.FACET_LATEST_VERSION_LABEL;\n    }\n\n    return value;\n  }\n  /**\n   * Changes the value of a key value (also applies to facets)\n   * @param  {[type]} key [description]\n   * @param  {[type]} value [description]\n   * @param  {[type]} state [description]\n   * @return {[type]}       [description]\n   */\n  ctrl.changeFacetValueState = function (key, value, targetState) {\n\n    if (ctrl.resourceType == 'group' && key == DatabusUris.DATABUS_ARTIFACT_PROPERTY) {\n\n      var visibleSetting = ctrl.getOrCreateVisibleFacetSetting(key, value);\n\n      if (visibleSetting != null) {\n        visibleSetting.checked = targetState;\n        visibleSetting.isOverride = targetState;\n      }\n\n      ctrl.updateArtifactFilters(ctrl.node);\n\n    }\n    else {\n      // apply change to view model\n      ctrl.node.setFacet(key, value, targetState);\n\n      var visibleSetting = ctrl.getOrCreateVisibleFacetSetting(key, value);\n\n      if (visibleSetting != null) {\n        visibleSetting.checked = targetState;\n        visibleSetting.isOverride = ctrl.node.isOverride(key, value, targetState);\n      }\n    }\n\n    if (ctrl.viewModel[key].autofill.selectedValues.length > 0) {\n      ctrl.complete(ctrl.viewModel[key]);\n    }\n\n    ctrl.onChange();\n  }\n\n  /**\n   * Gets or creates a new entry for a key value\n   * for a given key and value\n   * @param  {[type]} key [description]\n   * @param  {[type]} value [description]\n   * @return {[type]}       [description]\n   */\n  ctrl.getOrCreateVisibleFacetSetting = function (key, value) {\n\n    if (ctrl.viewModel[key] == undefined) {\n      // This is a facet that the node does not have, but a parent has\n\n      var label = DatabusUtils.uriToName(key);\n      label = label[0].toUpperCase() + label.slice(1);\n\n      ctrl.viewModel[key] = {};\n      ctrl.viewModel[key].key = key;\n      ctrl.viewModel[key].label = label;\n      ctrl.viewModel[key].visibleFacetSettings = [];\n      ctrl.viewModel[key].autofill = {};\n      ctrl.viewModel[key].autofill.values = [];\n      ctrl.viewModel[key].autofill.selectedValues = [];\n      ctrl.viewModel[key].autofill.input = '';\n    }\n\n    for (var i in ctrl.viewModel[key].visibleFacetSettings) {\n      var facetSetting = ctrl.viewModel[key].visibleFacetSettings[i];\n      if (facetSetting.value == value) {\n        return facetSetting; // ctrl.facetSettings[key];\n      }\n    }\n\n    var visibleSetting = {\n      value: value,\n    };\n\n    ctrl.viewModel[key].visibleFacetSettings.push(visibleSetting);\n    return visibleSetting;\n  }\n\n  // Get all active facets of a certain key\n  ctrl.getActiveFilters = function (key) {\n    var activeFilters = [];\n\n    for (var f in ctrl.facets[key].items) {\n      var filter = ctrl.facets[key].items[f];\n      if (filter.checked) {\n        activeFilters.push(filter);\n      }\n    }\n\n    return activeFilters;\n  }\n\n  // Checks whether any filter for a key is set\n  ctrl.hasActiveFilters = function (key) {\n    for (var f in ctrl.facets[key].items) {\n      var filter = ctrl.facets[key].items[f];\n      if (filter.checked) {\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n  ctrl.complete = function (facetData) {\n    facetData.autofill.selectedValues.length = 0;\n    for (var a in facetData.autofill.values) {\n      var e = facetData.autofill.values[a];\n      if (e.toLowerCase().indexOf(facetData.autofill.input.toLowerCase()) >= 0) {\n\n        var include = true;\n\n        for (var v in facetData.visibleFacetSettings) {\n          var visibleSettings = facetData.visibleFacetSettings[v];\n          if (visibleSettings.value == e.toLowerCase()) {\n            include = false;\n          }\n        }\n\n        if (include) {\n          facetData.autofill.selectedValues.push(e);\n        }\n      }\n    }\n  }\n\n  // Clears the autofill lists\n  ctrl.clearAutofill = function () {\n    var self = ctrl;\n    for (var f in self.viewModel) {\n      var data = self.viewModel[f];\n      data.autofill.selectedValues.length = 0;\n    }\n  }\n}\n\nmodule.exports = FacetsViewController;\n\n\n//# sourceURL=webpack://databus-webapp/./js/components/facets-view/facets-view.js?");

/***/ }),

/***/ "./js/components/file-browser/file-browser.js":
/*!****************************************************!*\
  !*** ./js/components/file-browser/file-browser.js ***!
  \****************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("const DatabusConstants = __webpack_require__(/*! ../../utils/databus-constants */ \"./js/utils/databus-constants.js\");\nconst DatabusUtils = __webpack_require__(/*! ../../utils/databus-utils */ \"./js/utils/databus-utils.js\");\n\n// hinzufgen eines Controllers zum Modul\nfunction FileBrowserController($http, $scope) {\n\n  var ctrl = this;\n\n  ctrl.$http = $http;\n  ctrl.activeTab = 0;\n  ctrl.$scope = $scope;\n\n  ctrl.$onInit = function() {\n\n    ctrl.lastRequestRevision = 0;\n    ctrl.tableLimit = 20;\n    ctrl.sortProperty = 'version.value';\n    ctrl.sortReverse = false;\n    ctrl.isLoading = true;\n    ctrl.queryResult = {};\n  }\n\n  ctrl.sortBy = function(property) {\n\n\n    if(ctrl.sortProperty == property) {\n      ctrl.sortReverse = !ctrl.sortReverse;\n    }\n    ctrl.sortProperty = property;\n  }\n\n  ctrl.getCellValues = function(binding, column) {\n\n    if(binding[column.field] == undefined) {\n      return \"\";\n    }\n    \n    var value = binding[column.field].value;\n\n    if(column.uriToName) {\n      value = DatabusUtils.uriToName(value);\n    }\n\n\n    return value;\n\n  }\n\n  ctrl.formatUploadSize = function(size) {\n    return DatabusUtils.formatFileSize(size);\n  };\n\n  ctrl.createRelativeUri = function(url) {\n    var u = new URL(url);\n    return u.pathname;\n  }\n\n  ctrl.formatVariant = function(value) {\n    var variants = value.split(', ');\n    value = \"\";\n    for(variant of variants) {\n      if(variant != undefined && variant != \"\") {\n        value += variant + \", \";\n      }\n    }\n\n    if(value == \"\") {\n      return \"none\";\n    }\n\n    return value.substr(0, value.length - 2);\n  }\n\n  ctrl.querySparql = async function(query) {\n\n    ctrl.isLoading = true;\n    ctrl.totalSize = 0;\n    ctrl.numFiles = 0;\n\n    try {\n\n      var req = {\n        method: 'POST',\n        url: DatabusConstants.DATABUS_SPARQL_ENDPOINT_URL,\n        data: \"format=json&query=\" + encodeURIComponent(query),\n        headers: {\n          \"Content-type\" : \"application/x-www-form-urlencoded\"\n        },\n      }\n\n      var updateResponse = await ctrl.$http(req); \n\n      var data = updateResponse.data;\n\n      ctrl.isLoading = false;\n\n\n      ctrl.queryResult.bindings = data.results.bindings;\n\n      ctrl.queryResult.uriList = \"\";\n\n      for(var b in ctrl.queryResult.bindings) {\n        var binding = ctrl.queryResult.bindings[b];\n        binding.size.numericalValue = parseInt(binding.size.value);\n        ctrl.queryResult.uriList += binding.file.value + \"\\n\";\n\n        if(binding.variant != undefined) {\n          binding.variant.value = ctrl.formatVariant(binding.variant.value);          \n        }\n        \n     \n\n\n        ctrl.totalSize += binding.size.numericalValue;\n        ctrl.numFiles++;\n      }\n\n      ctrl.totalSize = ctrl.formatUploadSize(ctrl.totalSize);\n      \n      if(!$scope.$root.$$phase) {\n        ctrl.$scope.$apply();\n      }\n\n    } catch(e) {\n      console.log(e);\n    }\n  }\n\n  /**\n   * On each digest, check whether the settings array has changed, if so create new QUERIES\n   * using the query builders\n   * @return {[type]} [description]\n   */\n  ctrl.$doCheck = function() {\n\n    if(ctrl.query != ctrl.fileQuery) {\n      ctrl.fileQuery = ctrl.query;\n      ctrl.querySparql(ctrl.fullQuery);\n    }\n  }\n}\n\n\n\nmodule.exports = FileBrowserController;\n\n//# sourceURL=webpack://databus-webapp/./js/components/file-browser/file-browser.js?");

/***/ }),

/***/ "./js/components/multiselect-dropdown/multiselect-dropdown.js":
/*!********************************************************************!*\
  !*** ./js/components/multiselect-dropdown/multiselect-dropdown.js ***!
  \********************************************************************/
/***/ ((module) => {

eval("// hinzufgen eines Controllers zum Modul\nfunction MultiselectDropdownController($timeout, $sce) {\n\n  var ctrl = this;\n  ctrl.$sce = $sce;\n  ctrl.searchInput = \"\";\n\n\n  ctrl.$onInit = function () {\n\n  }\n\n  ctrl.handleKey = function (e) {\n    if (e.which === 9 || e.which === 13) {\n      ctrl.showDrop = false;\n    }\n  }\n\n  ctrl.getLabel = function (value) {\n\n    if (value == '$latest') {\n      return 'Latest Version';\n    }\n\n    if (value == '') {\n      return 'None';\n    }\n\n    return value;\n  }\n\n  ctrl.hasContent = function () {\n    return !((ctrl.input == undefined || ctrl.input.length == 0) && (ctrl.parentInput == undefined ||\n      ctrl.parentInput.length == 0));\n  }\n\n  ctrl.valueComparator = function(v1, v2) {\n    var isV1Included = ctrl.includesValue(ctrl.input, v1.value) \n      || ctrl.includesValue(ctrl.parentInput, v1.value);\n    var isV2Included = ctrl.includesValue(ctrl.input, v2.value) \n    || ctrl.includesValue(ctrl.parentInput, v2.value);\n\n    if(isV1Included != isV2Included) {\n      return isV1Included ? -1 : 1;\n    }\n\n    if(v1.value == \"None\") {\n      return -1;\n    }\n\n\n    if(v2.value == \"None\") {\n      return 1;\n    }\n\n    return v1.value.localeCompare(v2.value);\n  }\n  \n  \n  ctrl.mergeSettings = function (parentSettings, childSettings) {\n    var mergedSettings = {};\n\n    // Set parent settings state\n    if (parentSettings != undefined) {\n      for (var setting of parentSettings) {\n        mergedSettings[setting.value] = setting.checked;\n      }\n    }\n\n    // Override with child settings\n    for (var s in childSettings) {\n      var setting = childSettings[s];\n      mergedSettings[setting.value] = setting.checked;\n    }\n\n    return mergedSettings;\n  }\n\n  ctrl.list = function () {\n\n    var mergedSettings = ctrl.mergeSettings(ctrl.parentInput, ctrl.input);\n\n    var allEntries = Object.keys(mergedSettings).map(function (key, index) {\n\n      var label = undefined;\n\n      if (key == '') {\n        label = '<i style=\"color: #a3a3a3;\">None</i>';\n      } else {\n        label = ctrl.getLabel(key);\n      }\n\n      if (mergedSettings[key]) {\n        return label;\n      } else {\n        return `<s>${label}</s>`;\n      }\n    });\n\n\n    var list = [];\n    var maxLength = 50;\n    var length = 0;\n    var hasOverflow = false;\n\n    for(var entry of allEntries) {\n      if(entry.length + length > maxLength) {\n        hasOverflow = true;\n        break;\n      }\n\n      length += entry.length;\n      list.push(entry);\n    }\n\n    if(hasOverflow) {\n      list.push('...');\n    }\n    \n    return ctrl.$sce.trustAsHtml(list.join(', '));\n  }\n\n\n  ctrl.hideDropDelayed = function () {\n    $timeout(function () {\n      ctrl.showDrop = false;\n    }, 120);\n  }\n\n  ctrl.includesValue = function (objs, value) {\n    if (objs == undefined) {\n      return false;\n    }\n\n    for (var obj of objs) {\n      if (obj.value == value) {\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n  ctrl.matchesSearch = function(value) {\n    return value.includes(ctrl.searchInput);\n  }\n\n  ctrl.isChecked = function (objs, value) {\n    if (objs == undefined) {\n      return false;\n    }\n\n    for (var obj of objs) {\n      if (obj.value == value) {\n        return obj.checked;\n      }\n    }\n\n    return false;\n  }\n\n  ctrl.veryStupidDelete = function (objs, value) {\n\n    let index = -1;\n    let k = 0;\n\n    if (objs == undefined) {\n      return false;\n    }\n\n    for (var obj of objs) {\n      if (obj.value == value) {\n        index = k;\n        break;\n      }\n\n      k++;\n    }\n\n    objs.splice(k, 1);\n  }\n\n  ctrl.toggle = function (value) {\n\n    if (ctrl.input == undefined) {\n      ctrl.input = [];\n    }\n\n    var isSetByParent = ctrl.parentInput != undefined && ctrl.includesValue(ctrl.parentInput, value);\n\n    if (!ctrl.includesValue(ctrl.input, value)) {\n      ctrl.input.push({ value: value, checked: !isSetByParent });\n\n    } else {\n\n      ctrl.veryStupidDelete(ctrl.input, value);\n    }\n\n    ctrl.change();\n  }\n\n\n  ctrl.change = function () {\n    $timeout(function () {\n      ctrl.onChange();\n    }, 50);;\n  }\n}\n\n\nmodule.exports = MultiselectDropdownController;\n\n//# sourceURL=webpack://databus-webapp/./js/components/multiselect-dropdown/multiselect-dropdown.js?");

/***/ }),

/***/ "./js/components/nav-search/nav-search-controller.js":
/*!***********************************************************!*\
  !*** ./js/components/nav-search/nav-search-controller.js ***!
  \***********************************************************/
/***/ ((module) => {

eval("\n\n// hinzufgen eines Controllers zum Modul\nfunction NavSearchController($http, $interval, $sce, searchManager) {\n\n  var ctrl = this;\n\n  // TODO: get search extensions from the logged in user\n\n  ctrl.searchManager = searchManager;\n  ctrl.results = [];\n\n  ctrl.formatResult = function (result) {\n    return $sce.trustAsHtml(result);\n  }\n\n  ctrl.toggleFilter = function (key) {\n    ctrl.filterActive[key] = !ctrl.filterActive[key];\n    ctrl.search();\n  }\n\n  ctrl.navigateTo = function(uri) {\n    window.location = uri;\n  }\n\n  ctrl.hideDropdown = function() {\n\n  }\n\n  ctrl.availableResourceTypes = ['Collection', 'Artifact', 'Group', 'Account', 'Version' ];\n\n  ctrl.$onInit = function () {\n\n    ctrl.searchInput = '';\n    ctrl.isSearching = false;\n    ctrl.searchCooldown = 1000;\n\n\n    ctrl.filterActive = {};\n    ctrl.filterVisible = {};\n\n\n    if (ctrl.settings == undefined) {\n      ctrl.minRelevance = 0.01;\n      ctrl.maxResults = 50;\n      ctrl.searchFilter = \"\";\n      ctrl.resourceTypes = null;\n      ctrl.placeholder = \"Search the Databus...\"\n    } else {\n      ctrl.minRelevance = ctrl.settings.minRelevance;\n      ctrl.maxResults = ctrl.settings.maxResults;\n      ctrl.searchFilter = ctrl.settings.filter;\n      ctrl.resourceTypes = ctrl.settings.resourceTypes;\n      ctrl.placeholder = ctrl.settings.placeholder;\n    }\n\n    for (var resourceType of ctrl.availableResourceTypes) {\n      ctrl.filterActive[resourceType] = false;\n      ctrl.filterVisible[resourceType] = ctrl.resourceTypes == null;\n    }\n\n    ctrl.numFilters = 0;\n\n    if (ctrl.resourceTypes != null) {\n      for (var resourceType of ctrl.resourceTypes) {\n        ctrl.filterVisible[resourceType] = true;\n        ctrl.numFilters++;\n      }\n    }\n  }\n\n  ctrl.isAnyFilterActive = function () {\n\n    for (var resourceType of ctrl.availableResourceTypes) {\n\n      if (!ctrl.filterVisible[resourceType]) {\n        continue;\n      }\n\n      if (ctrl.filterActive[resourceType]) {\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n  ctrl.baseQueryFormatter = function(query) {\n    return `?query=${query}${ctrl.searchFilter}${ctrl.baseFilters}${ctrl.typeFilters}`\n  }\n\n  $interval(function () {\n\n    if (ctrl.searchChanged) {\n\n      var baseFilters = `&minRelevance=${ctrl.minRelevance}&maxResults=${ctrl.maxResults}`;\n      var typeFilters = ``;\n      var isAnyFilterActive = ctrl.isAnyFilterActive();\n\n\n      for (var resourceType of ctrl.availableResourceTypes) {\n\n        if (!ctrl.filterVisible[resourceType]) {\n          continue;\n        }\n\n        if (ctrl.filterActive[resourceType] || !isAnyFilterActive) {\n\n          if (typeFilters == ``) {\n            typeFilters = `&typeName=`;\n          }\n\n          typeFilters += ` ${resourceType}`;\n        }\n      }\n\n      ctrl.baseFilters = baseFilters;\n      ctrl.typeFilters = typeFilters;\n      ctrl.searchManager.baseAdapter.queryFormatter = ctrl.baseQueryFormatter;\n\n      ctrl.searchManager.search(ctrl.searchInput).then(function success(results) {\n        \n        for(var result of results) {\n\n          if(result.abstract != null) {\n            result.abstract = result.abstract[result.abstract.length - 1];\n          }\n        }\n        \n        ctrl.results = results;\n\n        \n        ctrl.isSearching = false;\n      }, function error(response) {\n        ctrl.isSearching = false;\n      });\n\n      ctrl.searchChanged = false;\n    };\n  }, ctrl.searchCooldown);\n\n  ctrl.search = function () {\n    ctrl.isSearching = true;\n    ctrl.searchChanged = true;\n  };\n\n};\n\nmodule.exports = NavSearchController;\n\n\n\n//# sourceURL=webpack://databus-webapp/./js/components/nav-search/nav-search-controller.js?");

/***/ }),

/***/ "./js/components/override-checkbox/override-checkbox.js":
/*!**************************************************************!*\
  !*** ./js/components/override-checkbox/override-checkbox.js ***!
  \**************************************************************/
/***/ ((module) => {

eval("\n\n// hinzufgen eines Controllers zum Modul\nfunction OverrideCheckboxController() {\n\n  var ctrl = this;\n\n  ctrl.$onInit = function() {\n\n    if(ctrl.id == undefined) {\n      ctrl.id = ctrl.label;\n    }\n  }\n\n  ctrl.change = function() {\n\n    if(!ctrl.readonly) {\n      ctrl.onChange();\n    }\n  }\n}\n\nmodule.exports = OverrideCheckboxController;\n\n//# sourceURL=webpack://databus-webapp/./js/components/override-checkbox/override-checkbox.js?");

/***/ }),

/***/ "./js/components/search/search-controller.js":
/*!***************************************************!*\
  !*** ./js/components/search/search-controller.js ***!
  \***************************************************/
/***/ ((module) => {

eval("\n\n// hinzufgen eines Controllers zum Modul\nfunction SearchController($http, $interval, $sce, searchManager) {\n\n  var ctrl = this;\n\n  // TODO: get search extensions from the logged in user\n\n  ctrl.searchManager = searchManager;\n  ctrl.results = [];\n\n  ctrl.formatResult = function (result) {\n    return $sce.trustAsHtml(result);\n  }\n\n  ctrl.toggleFilter = function (key) {\n    ctrl.filterActive[key] = !ctrl.filterActive[key];\n    ctrl.search();\n  }\n\n  ctrl.availableResourceTypes = ['Collection', 'Artifact', 'Group', 'Account', 'Version' ];\n\n  ctrl.$onInit = function () {\n\n    ctrl.searchInput = '';\n    ctrl.isSearching = false;\n    ctrl.searchCooldown = 300;\n\n    if (ctrl.settings == undefined) {\n      ctrl.minRelevance = 0.01;\n      ctrl.maxResults = 50;\n      ctrl.searchFilter = \"\";\n      ctrl.resourceTypes = null;\n      ctrl.placeholder = \"Search the Databus...\"\n    } else {\n      ctrl.minRelevance = ctrl.settings.minRelevance;\n      ctrl.maxResults = ctrl.settings.maxResults;\n      ctrl.searchFilter = ctrl.settings.filter;\n      ctrl.resourceTypes = ctrl.settings.resourceTypes;\n      ctrl.placeholder = ctrl.settings.placeholder;\n    }\n\n    ctrl.filterActive = {};\n    ctrl.filterVisible = {};\n\n    for (var resourceType of ctrl.availableResourceTypes) {\n      ctrl.filterActive[resourceType] = false;\n      ctrl.filterVisible[resourceType] = ctrl.resourceTypes == null;\n    }\n\n    ctrl.numFilters = 0;\n\n    if (ctrl.resourceTypes != null) {\n      for (var resourceType of ctrl.resourceTypes) {\n        ctrl.filterVisible[resourceType] = true;\n        ctrl.numFilters++;\n      }\n    }\n  }\n\n  ctrl.isAnyFilterActive = function () {\n\n    for (var resourceType of ctrl.availableResourceTypes) {\n\n      if (!ctrl.filterVisible[resourceType]) {\n        continue;\n      }\n\n      if (ctrl.filterActive[resourceType]) {\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n  ctrl.baseQueryFormatter = function(query) {\n    return `?query=${query}${ctrl.searchFilter}${ctrl.baseFilters}${ctrl.typeFilters}`\n  }\n\n  $interval(function () {\n\n    if (ctrl.searchChanged) {\n\n      var baseFilters = `&minRelevance=${ctrl.minRelevance}&maxResults=${ctrl.maxResults}`;\n      var typeFilters = ``;\n      var isAnyFilterActive = ctrl.isAnyFilterActive();\n\n\n      for (var resourceType of ctrl.availableResourceTypes) {\n\n        if (!ctrl.filterVisible[resourceType]) {\n          continue;\n        }\n\n        if (ctrl.filterActive[resourceType] || !isAnyFilterActive) {\n\n          if (typeFilters == ``) {\n            typeFilters = `&typeName=`;\n          }\n\n          typeFilters += ` ${resourceType}`;\n        }\n      }\n\n      ctrl.baseFilters = baseFilters;\n      ctrl.typeFilters = typeFilters;\n      ctrl.searchManager.baseAdapter.queryFormatter = ctrl.baseQueryFormatter;\n\n      ctrl.searchManager.search(ctrl.searchInput).then(function success(results) {\n        ctrl.results = results;\n        ctrl.isSearching = false;\n      }, function error(response) {\n        ctrl.isSearching = false;\n      });\n\n      ctrl.searchChanged = false;\n    };\n  }, ctrl.searchCooldown);\n\n  ctrl.search = function () {\n    ctrl.isSearching = true;\n    ctrl.searchChanged = true;\n  };\n\n};\n\nmodule.exports = SearchController;\n\n\n\n//# sourceURL=webpack://databus-webapp/./js/components/search/search-controller.js?");

/***/ }),

/***/ "./js/components/table-editor/table-editor.js":
/*!****************************************************!*\
  !*** ./js/components/table-editor/table-editor.js ***!
  \****************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("const DatabusUtils = __webpack_require__(/*! ../../utils/databus-utils */ \"./js/utils/databus-utils.js\");\r\n\r\n// hinzufgen eines Controllers zum Modul\r\nfunction TableEditorController() {\r\n\r\n  var ctrl = this;\r\n\r\n  ctrl.$onInit = function() {\r\n\r\n    ctrl.selection = {};\r\n    ctrl.edit = {};\r\n\r\n    if(ctrl.model.groupMode == undefined) {\r\n      ctrl.model.groupMode = true;\r\n    }\r\n\r\n    ctrl.setupColumns();\r\n    ctrl.updateViewModel();\r\n  }\r\n\r\n  ctrl.getSpanWidth = function(row, cv) {\r\n    var span = $(`#${row}_${cv}`);\r\n    var width = span.width();\r\n\r\n    if(width == undefined) {\r\n      return 0;\r\n    }\r\n\r\n    return width + 22;\r\n  }\r\n\r\n  ctrl.editContentVariant = function(index) {\r\n\r\n    ctrl.onEditContentVariant({ index: index});\r\n  }\r\n\r\n  ctrl.setupColumns = function() {\r\n\r\n    ctrl.columns = [];\r\n    ctrl.columns.push({ title:'File', width: 400, isReadonly : true });\r\n\r\n    for(var c in ctrl.model.contentVariants) {\r\n      var cv = ctrl.model.contentVariants[c];\r\n      ctrl.columns.push({ title: cv.label, width: 120, isReadonly : false });\r\n    }\r\n\r\n    ctrl.columns.push({ title:'Actions', width: 120, isReadonly : true });\r\n    ctrl.progressWidth = (115 + 200) + 'px';\r\n  }\r\n\r\n  ctrl.toggleGroupMode = function() {\r\n    ctrl.model.groupMode = ! ctrl.model.groupMode;\r\n    ctrl.updateViewModel();\r\n  }\r\n\r\n  ctrl.onShowInput = function($event) {\r\n   \r\n  }\r\n\r\n  ctrl.deselect = function() {\r\n    ctrl.edit.x = undefined;\r\n    ctrl.edit.y = undefined;\r\n    ctrl.selection.x = undefined;\r\n    ctrl.selection.y = undefined;\r\n    ctrl.selection.width = 0;\r\n    ctrl.selection.height = 0;\r\n  }\r\n\r\n  ctrl.selectCell = function($event, x, y) {\r\n\r\n    \r\n    ctrl.edit.x = undefined;\r\n    ctrl.edit.y = undefined;\r\n\r\n    ctrl.edit.x = x;\r\n    ctrl.edit.y = y; \r\n    ctrl.selection.x = x;\r\n    ctrl.selection.y = y;\r\n    ctrl.selection.width = 1;\r\n    ctrl.selection.height = 1;\r\n   \r\n  }\r\n\r\n  ctrl.analyzeFile = function(file) {\r\n    ctrl.onAnalyzeFile({ file : file });\r\n  }\r\n\r\n  ctrl.onChangeCv = function(file, cv) {\r\n\r\n    var index = ctrl.model.files.findIndex(f => f.uri == file.uri);\r\n    \r\n    for(var i = index + 1; i < index + file.rowspan; i++) {\r\n      ctrl.model.files[i].contentVariants[cv.id] = file.contentVariants[cv.id];\r\n    }\r\n    \r\n    ctrl.model.onChange();\r\n  }\r\n\r\n  ctrl.updateViewModel = function() {\r\n\r\n    for(var f in ctrl.model.files) {\r\n      ctrl.model.files[f].rowspan = 1;\r\n    }\r\n\r\n    /*\r\n    if(ctrl.model.groupMode) {\r\n\r\n      var i = 0;\r\n      var step = 1;\r\n\r\n      while(i + step < ctrl.model.files.length) {\r\n\r\n        if(ctrl.model.files[i].name == ctrl.model.files[i + step].name) {\r\n          // Swallow the cv setting of the next row\r\n          // ctrl.model.files[i].rowspan++;\r\n          // ctrl.model.files[i + step].rowspan = 0;\r\n\r\n          for(var c in ctrl.model.contentVariants) {\r\n            var cv = ctrl.model.contentVariants[c];\r\n            ctrl.model.files[i + step].contentVariants[cv.id] = ctrl.model.files[i].contentVariants[cv.id];\r\n          }\r\n\r\n          step++;\r\n        } else {\r\n          i += step;\r\n          step = 1;\r\n        }\r\n      }\r\n    }*/\r\n\r\n\r\n  }\r\n  /**\r\n   * Removes a specific distribution from an artifact\r\n   * @param {*} artifact \r\n   * @param {*} file \r\n   */\r\n  ctrl.removeFileFromArtifact = function(file, index) {\r\n    ctrl.onRemoveFile({ file : file, index: index});\r\n  }\r\n\r\n  ctrl.$doCheck = function() { \r\n\r\n    var numFiles = DatabusUtils.objSize(ctrl.model.files);\r\n    if(ctrl.numFiles != numFiles) {\r\n      ctrl.updateViewModel();\r\n      ctrl.numFiles = numFiles;\r\n    }\r\n\r\n\r\n    if(ctrl.columns == undefined) {\r\n      return;\r\n    }\r\n\r\n    var columnCount = 4;\r\n\r\n    for(var c in ctrl.model.contentVariants) {\r\n      columnCount++;\r\n    }\r\n\r\n    ctrl.progressPosition = 45;\r\n    for(var i = 0; i < columnCount - 3; i++) {\r\n      ctrl.progressPosition += ctrl.columns[i].width;\r\n    }\r\n    ctrl.progressPosition = ctrl.progressPosition + 'px'\r\n\r\n    if(ctrl.columns.length == columnCount) {\r\n      return;\r\n    }\r\n\r\n    ctrl.setupColumns();\r\n  }\r\n\r\n  ctrl.change = function() {\r\n\r\n  }\r\n};\r\n\r\nmodule.exports = TableEditorController;\n\n//# sourceURL=webpack://databus-webapp/./js/components/table-editor/table-editor.js?");

/***/ }),

/***/ "./js/components/type-tag/type-tag.js":
/*!********************************************!*\
  !*** ./js/components/type-tag/type-tag.js ***!
  \********************************************/
/***/ ((module) => {

eval("// hinzufgen eines Controllers zum Modul\nfunction TypeTagController() {\n\n  var ctrl = this;\n\n  ctrl.typeMap = {};\n  ctrl.typeMap[\"Artifact\"] = \"is-artifact\";\n  ctrl.typeMap[\"Version\"] = \"is-version\";\n  ctrl.typeMap[\"Group\"] = \"is-group\";\n  ctrl.typeMap[\"Service\"] = \"is-service\";\n  ctrl.typeMap[\"Account\"] = \"is-consumer\";\n  ctrl.typeMap[\"Collection\"] = \"is-collection\";\n  ctrl.typeMap[\"BlogEntry\"] = \"is-blog\";\n  ctrl.typeMap[\"Databus\"] = \"is-version\";\n  ctrl.typeMap[\"Sparql\"] = \"is-grey\";\n\n  ctrl.iconMap = {};\n  ctrl.iconMap[\"Artifact\"] = \"M12,0 L1,12 l11,12 l11,-12 L12,0z\"; \n  ctrl.iconMap[\"Version\"] = \"M 14.9 1 L 12.293 1.005 L 16.507 7.18 L 16.5 23.1 L 18.5 23.1 L 18.5 6.4 L 14.9 1 Z M 10.4 1 L 1.581 1.004 L 1.584 23.13 L 15 23.1 L 15 7.7 L 10.4 1 Z M 16.8 1 L 20 5.8 L 20 23.1 L 22 23.1 L 22 4.9 L 19.3 1 L 16.8 1 Z\";\n  ctrl.iconMap[\"Group\"] = \"M21.698 10.658l2.302 1.342-12.002 7-11.998-7 2.301-1.342 9.697 5.658 9.7-5.658zm-9.7 10.657l-9.697-5.658-2.301 1.343 11.998 7 12.002-7-2.302-1.342-9.7 5.657zm12.002-14.315l-12.002-7-11.998 7 11.998 7 12.002-7z\";\n  ctrl.iconMap[\"Service\"] = \"M24 13.616v-3.232l-2.869-1.02c-.198-.687-.472-1.342-.811-1.955l1.308-2.751-2.285-2.285-2.751 1.307c-.613-.339-1.269-.613-1.955-.811l-1.021-2.869h-3.232l-1.021 2.869c-.686.198-1.342.471-1.955.811l-2.751-1.308-2.285 2.285 1.308 2.752c-.339.613-.614 1.268-.811 1.955l-2.869 1.02v3.232l2.869 1.02c.197.687.472 1.342.811 1.955l-1.308 2.751 2.285 2.286 2.751-1.308c.613.339 1.269.613 1.955.811l1.021 2.869h3.232l1.021-2.869c.687-.198 1.342-.472 1.955-.811l2.751 1.308 2.285-2.286-1.308-2.751c.339-.613.613-1.268.811-1.955l2.869-1.02zm-12 2.384c-2.209 0-4-1.791-4-4s1.791-4 4-4 4 1.791 4 4-1.791 4-4 4z\";\n  ctrl.iconMap[\"Account\"] = \"M19 7.001c0 3.865-3.134 7-7 7s-7-3.135-7-7c0-3.867 3.134-7.001 7-7.001s7 3.134 7 7.001zm-1.598 7.18c-1.506 1.137-3.374 1.82-5.402 1.82-2.03 0-3.899-.685-5.407-1.822-4.072 1.793-6.593 7.376-6.593 9.821h24c0-2.423-2.6-8.006-6.598-9.819z\";\n  ctrl.iconMap[\"Collection\"] = \"M11.499 12.03v11.971l-10.5-5.603v-11.835l10.5 5.467zm11.501 6.368l-10.501 5.602v-11.968l10.501-5.404v11.77zm-16.889-15.186l10.609 5.524-4.719 2.428-10.473-5.453 4.583-2.499zm16.362 2.563l-4.664 2.4-10.641-5.54 4.831-2.635 10.474 5.775z\";\n  ctrl.iconMap[\"BlogEntry\"] = \"M21 9.662c-2.287.194-5.197 1.038-7 1.794v-1.064c1.933-.721 4.598-1.54 7-1.745v1.015zm0 2.031c-2.287.194-5.197 1.038-7 1.794v-1.064c1.933-.721 4.598-1.54 7-1.745v1.015zm0 2.031c-2.287.194-5.197 1.038-7 1.794v-1.064c1.933-.721 4.598-1.54 7-1.745v1.015zm0 2.031c-2.287.194-5.197 1.038-7 1.794v-1.064c1.933-.721 4.598-1.54 7-1.745v1.015zm0-9.951c-2.402.204-5.068 1.024-7 1.745v1.933c1.804-.756 4.713-1.6 7-1.794v-1.884zm-18 2.843c2.402.205 5.067 1.024 7 1.745v1.064c-1.803-.756-4.713-1.6-7-1.794v-1.015zm0 2.031c2.402.205 5.067 1.024 7 1.745v1.064c-1.803-.756-4.713-1.6-7-1.794v-1.015zm0 2.031c2.402.205 5.067 1.024 7 1.745v1.064c-1.803-.756-4.713-1.6-7-1.794v-1.015zm0 2.032c2.402.205 5.067 1.024 7 1.745v1.064c-1.803-.756-4.713-1.6-7-1.794v-1.015zm0-7.054c2.287.194 5.196 1.038 7 1.794v-1.933c-1.932-.72-4.598-1.54-7-1.744v1.883zm9-2.724c-3.063-1.671-7.776-2.755-12-2.963v17c4.289.206 8.195 1.249 12 3 3.805-1.751 7.711-2.794 12-3v-17c-4.224.208-8.937 1.292-12 2.963zm-10-.791c4.264.496 6.86 1.467 9 2.545v12.702c-2.968-1.184-5.939-1.95-9-2.271v-12.976zm20 12.975c-3.061.321-6.032 1.088-9 2.271v-12.701c2.187-1.103 4.757-2.051 9-2.544v12.974z\";\n  ctrl.iconMap[\"Databus\"] = \"m 0.76949155,0.7702454 v 5.24959 l 29.33129045,-10e-4 6.27262,8.8675006 -0.002,32.0824 4.7212,-0.002 V 0.7702354 Z m 18.43511045,8.3952603 -5.68354,0.006 7.1979,10.5484003 -0.004,27.24663 4.70393,-0.002 0.0167,-28.60108 z m -9.4730904,0.002 -8.96510005,0.002 0.004,37.7960503 16.79563045,-0.004 0.001,-26.29103 z m 13.2512904,0 5.59825,8.2188903 -0.0396,29.57614 4.70307,-0.002 0.006,-31.09587 -4.55858,-6.6940403 z\";\n  ctrl.iconMap[\"Sparql\"] = \"M383.476,267.343c-2.544-1.346-5.14-2.493-7.743-3.516l1.863-0.15c0,0-16.608-7.354-18.057-60.722  c-1.438-53.372,15.828-62.478,15.828-62.478l-2.48,0.109c13.045-6.69,24.265-17.267,31.669-31.216  c19.295-36.291,5.488-81.362-30.81-100.657C337.436-10.563,292.374,3.207,273.09,39.53c-7.927,14.899-10.178,31.273-7.677,46.733  l-0.851-1.306c0,0,4.373,19.365-41.032,47.55c-45.397,28.2-65.877,14.159-65.877,14.159l1.302,1.925  c-1.298-0.803-2.544-1.624-3.901-2.333c-36.306-19.294-81.38-5.509-100.667,30.804c-19.281,36.309-5.489,81.365,30.813,100.668  c27.064,14.364,58.974,10.36,81.461-7.655l-0.487,0.946c0,0,16.531-13.599,64.16,11.973c37.601,20.178,43.184,39.956,43.899,47.383  c-0.983,27.57,13.388,54.618,39.389,68.433c36.301,19.299,81.374,5.498,100.657-30.804  C433.571,331.704,419.786,286.624,383.476,267.343z M299.542,277.128c-6.018,2.129-23.203,4.487-59.389-14.921  c-39.187-21.04-45.005-38.615-45.855-43.891c0.557-6.401,0.202-12.791-0.891-19.02l0.239,0.359c0,0-3.189-17.096,41.65-44.943  c40.133-24.908,58.376-19.955,61.771-18.653c2.185,1.485,4.45,2.867,6.825,4.131c4.518,2.398,9.174,4.283,13.888,5.672  c5.52,5.257,15.678,20.178,16.733,59.413c1.078,39.535-10.533,54.779-16.865,60.168C311.122,268.399,305.022,272.34,299.542,277.128  z\";\n\n  ctrl.$onInit = function() {\n    ctrl.class = ctrl.typeMap[ctrl.type];\n    ctrl.icon = ctrl.iconMap[ctrl.type];\n    ctrl.style = {};\n    ctrl.style.width = ctrl.width + \"px\";\n    ctrl.style.height = ctrl.height + \"px\";\n    ctrl.viewBox = \"0 0 24 24\";\n\n    if(ctrl.type == 'Databus') {\n      ctrl.viewBox = \"2 0 42 40\";\n    }\n\n    if(ctrl.type == 'Sparql') {\n      ctrl.viewBox = \"40 0 430 420\";\n    }\n  }\n}\n\nmodule.exports = TypeTagController;\n\n//# sourceURL=webpack://databus-webapp/./js/components/type-tag/type-tag.js?");

/***/ }),

/***/ "./js/components/uri-breadcrumbs/uri-breadcrumbs.js":
/*!**********************************************************!*\
  !*** ./js/components/uri-breadcrumbs/uri-breadcrumbs.js ***!
  \**********************************************************/
/***/ ((module) => {

eval("// hinzufgen eines Controllers zum Modul\n// TODO update base\nfunction UriBreadcrumbsController() {\n\n  var ctrl = this;\n\n  ctrl.$onInit = function() {\n\n    ctrl.entries = [];\n\n    var uri = ctrl.uri;\n\n    if(uri == undefined || uri == null) {\n      return;\n    }\n\n    var url = new URL(uri);\n\n    var extensions = url.pathname.split('/');\n    var pathSoFar = '';\n\n    if(ctrl.absolute == true) {\n      pathSoFar = url.origin;\n    }\n\n    for(var e in extensions) {\n      var extension = extensions[e];\n\n      if(extension == '') {\n        continue;\n      }\n\n      pathSoFar += \"/\" + extension;\n\n      ctrl.entries.push({\n        label: extension,\n        uri: pathSoFar\n      });\n    }\n  }\n}\n\nmodule.exports = UriBreadcrumbsController;\n\n\n\n//# sourceURL=webpack://databus-webapp/./js/components/uri-breadcrumbs/uri-breadcrumbs.js?");

/***/ }),

/***/ "./js/components/yasqe-text/yasqe-text.js":
/*!************************************************!*\
  !*** ./js/components/yasqe-text/yasqe-text.js ***!
  \************************************************/
/***/ ((module) => {

eval("function YasqeTextController($scope, $element) {\n\n  var ctrl = this;\n\n  ctrl.textField = $element.find('#custom-query');\n  ctrl.$scope = $scope;\n\n  ctrl.$onInit = function () {\n\n    ctrl.yasqe = new Yasqe(ctrl.textField[0], {\n      lineNumbers: true,\n      viewportMargin: Infinity,\n      readOnly: ctrl.readOnly,\n      autorefresh: true\n    });\n\n    if (ctrl.autoSize || !ctrl.hasSend) {\n      var styleSheet = document.createElement(\"style\")\n      styleSheet.innerText = \"\";\n\n      if (ctrl.autoSize) {\n        styleSheet.innerText += \".CodeMirror { height: auto !important; } .CodeMirror-vscrollbar { display: none !important; } .resizeWrapper { display: none !important; }\";\n      }\n\n      if (!ctrl.hasSend) {\n        styleSheet.innerText += \".yasqe_buttons { display: none !important; }\";\n      }\n\n      ctrl.textField[0].appendChild(styleSheet)\n    }\n\n    ctrl.yasqe.on('query', function() {\n      ctrl.onSend();\n    });\n\n    ctrl.yasqe.on('change', function () {\n      ctrl.query = ctrl.yasqe.getValue();\n      ctrl.valid = !ctrl.yasqe.queryValid;\n\n      if (!$scope.$root.$$phase) {\n        ctrl.$scope.$apply();\n      }\n\n      ctrl.onChange();\n    });\n\n    if (ctrl.query != undefined) {\n      ctrl.yasqe.setValue(ctrl.query);\n    }\n  }\n\n  ctrl.$doCheck = function () {\n    if (ctrl.yasqe != undefined && ctrl.yasqe.getValue() != ctrl.query) {\n      if (ctrl.query != undefined) {\n        ctrl.yasqe.setValue(ctrl.query);\n      }\n    }\n\n    setTimeout(function () {\n      ctrl.yasqe.refresh();\n    }, 10);\n\n  }\n}\n\nmodule.exports = YasqeTextController;\n\n//# sourceURL=webpack://databus-webapp/./js/components/yasqe-text/yasqe-text.js?");

/***/ }),

/***/ "./js/components/yasr-view/yasr-view.js":
/*!**********************************************!*\
  !*** ./js/components/yasr-view/yasr-view.js ***!
  \**********************************************/
/***/ ((module) => {

eval("function YasrViewController($scope, $element) {\n\n  var ctrl = this;\n\n  ctrl.textField = $element.find('#custom-query');\n  ctrl.$scope = $scope;\n\n  ctrl.$onInit = function () {\n\n\n    ctrl.yasr = new Yasr(ctrl.textField[0], {\n      //lineNumbers: true,\n      //viewportMargin: Infinity,\n      //readOnly: ctrl.readOnly,\n      //autorefresh: true\n      prefixes : {\n        rdf: 'http://www.w3.org/1999/02/22-rdf-syntax-ns#',\n        rdfs: 'http://www.w3.org/2000/01/rdf-schema#',\n        dct: 'http://purl.org/dc/terms/',\n        dcat: 'http://www.w3.org/ns/dcat#',\n        databus: 'https://dataid.dbpedia.org/databus#',\n        sec: 'https://w3id.org/security#',\n        cert: 'http://www.w3.org/ns/auth/cert#',\n        foaf: 'http://xmlns.com/foaf/0.1/',\n        dbo: 'http://dbpedia.org/ontology/',\n        \"databus-cv\": 'https://dataid.dbpedia.org/databus-cv#'\n      }\n\n    });\n\n   \n\n\n    /*\n    if(ctrl.autoSize) {\n\n     var styleSheet = document.createElement(\"style\")\n     styleSheet.innerText = \".CodeMirror { height: auto !important; } .CodeMirror-vscrollbar { display: none !important; } .resizeWrapper { display: none !important; }\";\n     ctrl.textField[0].appendChild(styleSheet)\n    }\n\n    ctrl.yasr.on('change', function() {\n      ctrl.query = ctrl.yasqe.getValue();\n      ctrl.valid = !ctrl.yasqe.queryValid;\n\n      if(!$scope.$root.$$phase) {\n        ctrl.$scope.$apply();\n      }\n\n      ctrl.onChange();\n    });\n\n   ctrl.yasqe.setValue(ctrl.query);*/\n  }\n\n\n  ctrl.$doCheck = function () {\n    var dataString = JSON.stringify(ctrl.data);\n    if (ctrl.yasr != undefined && dataString != ctrl.currentDataString) {\n      ctrl.yasr.setResponse(ctrl.data)\n      ctrl.currentDataString = dataString;\n    }\n\n\n    /*\n    setTimeout(function() {\n      ctrl.yasqe.refresh();\n    }, 10);*/\n  }\n}\n\nmodule.exports = YasrViewController;\n\n//# sourceURL=webpack://databus-webapp/./js/components/yasr-view/yasr-view.js?");

/***/ }),

/***/ "./js/page-controller/account-controller.js":
/*!**************************************************!*\
  !*** ./js/page-controller/account-controller.js ***!
  \**************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("const DatabusUtils = __webpack_require__(/*! ../utils/databus-utils */ \"./js/utils/databus-utils.js\");\r\nconst DatabusWebappUtils = __webpack_require__(/*! ../utils/databus-webapp-utils */ \"./js/utils/databus-webapp-utils.js\");\r\nconst TabNavigation = __webpack_require__(/*! ../utils/tab-navigation */ \"./js/utils/tab-navigation.js\");\r\n\r\nvar DEFAULT_IMAGE = \"https://picsum.photos/id/223/320/320\";\r\n\r\n// Controller for the header section\r\nfunction AccountPageController($scope, $http, $location, collectionManager) {\r\n\r\n  $scope.collectionManager = collectionManager;\r\n\r\n\r\n  // Pick up the profile data\r\n  $scope.auth = data.auth;\r\n  $scope.location = $location;\r\n  $scope.account = data.account;\r\n\r\n  // Exit if there is no profile\r\n  if ($scope.account == undefined) {\r\n    return;\r\n  }\r\n\r\n \r\n  // Create a tab navigation object for the tab navigation with locato\r\n  $scope.tabNavigation = new TabNavigation($scope, $location, [\r\n    'data', 'collections', 'settings'\r\n  ]);\r\n\r\n  // Make some util functions available in the template\r\n  $scope.utils = new DatabusWebappUtils($scope);\r\n  $scope.accountName = $scope.utils.getAccountName();\r\n  $scope.account.isOwn = $scope.accountName != null; //.auth.authenticated && $scope.auth.info.accountName == $scope.account.accountName;\r\n\r\n\r\n  $scope.dataSearchInput = '';\r\n  $scope.dataSearchSettings = {\r\n    minRelevance: 0.01,\r\n    maxResults: 10,\r\n    placeholder: `Search ${$scope.account.accountName}'s data...`,\r\n    resourceTypes: ['Group', 'Artifact'],\r\n    filter: `&publisher=${$scope.account.accountName}&typeNameWeight=0`\r\n  };\r\n\r\n  $scope.collectionSearchInput = '';\r\n  $scope.collectionSearchSettings = {\r\n    minRelevance: 0.01,\r\n    maxResults: 10,\r\n    placeholder: `Search ${$scope.account.accountName}'s collections...`,\r\n    resourceTypes: ['Collection'],\r\n    filter: `&publisher=${$scope.account.accountName}&publisherWeight=0&typeNameWeight=0`\r\n  };\r\n\r\n  \r\n  // Wait for additional artifact data to arrive\r\n  $scope.publishedData = {};\r\n  $scope.publishedData.isLoading = true;\r\n\r\n  $http.get(`/app/account/content?account=${encodeURIComponent($scope.account.accountName)}`)\r\n    .then(function (response) {\r\n\r\n      $scope.publishedData.isLoading = false;\r\n      $scope.publishedData.groups = response.data.groups;\r\n      $scope.publishedData.artifacts = response.data.artifacts;\r\n\r\n      for (var artifact of $scope.publishedData.artifacts) {\r\n        artifact.group = DatabusUtils.navigateUp(artifact.uri, 1);\r\n        artifact.title = DatabusUtils.stringOrFallback(artifact.title, artifact.latestVersionTitle);\r\n        artifact.abstract = DatabusUtils.stringOrFallback(artifact.abstract, artifact.latestVersionAbstract);\r\n        artifact.description = DatabusUtils.stringOrFallback(artifact.description, artifact.latestVersionDescription);\r\n      }\r\n\r\n      for (var group of $scope.publishedData.groups) {\r\n        group.artifacts = $scope.publishedData.artifacts.filter(function (a) {\r\n          return a.group == group.uri;\r\n        });\r\n      }\r\n\r\n      // Order by latest version date\r\n      $scope.recentUploads = $scope.publishedData.artifacts.filter(function (v) {\r\n        return v.latestVersionDate != null;\r\n      });\r\n      $scope.recentUploads.sort(function (a, b) {\r\n        return new Date(b.latestVersionDate) - new Date(a.latestVersionDate);\r\n      });\r\n\r\n      $scope.recentUploads = $scope.recentUploads.slice(0, 3);\r\n\r\n      $scope.refreshFeaturedContent();\r\n    }, function (err) {\r\n      console.log(err);\r\n    });\r\n\r\n\r\n  // Wait for stats data to arrive\r\n  $scope.statsData = {};\r\n  $scope.statsData.isLoading = true;\r\n\r\n  $http.get(`/app/account/stats?account=${encodeURIComponent($scope.account.accountName)}`).then(function (response) {\r\n    $scope.statsData.stats = response.data;\r\n    $scope.statsData.isLoading = false;\r\n  }, function (err) {\r\n    console.log(err);\r\n  });\r\n\r\n  // Wait for activity chart data to arrive\r\n  $scope.activityData = {};\r\n  $scope.activityData.isLoading = true;\r\n\r\n  $http.get(`/app/account/activity?account=${encodeURIComponent($scope.account.accountName)}`).then(function (response) {\r\n    $scope.activityData.entries = response.data;\r\n    $scope.activityData.isLoading = false;\r\n  }, function (err) {\r\n    console.log(err);\r\n  });\r\n\r\n  $scope.collectionsData = {};\r\n  $scope.collectionsData.isLoading = true;\r\n\r\n  if (!$scope.account.isOwn) {\r\n    $http.get(`/app/account/collections?account=${encodeURIComponent($scope.account.accountName)}`)\r\n      .then(function (response) {\r\n\r\n        $scope.collectionsData.collections = response.data;\r\n        $scope.collectionsData.isLoading = false;\r\n        $scope.refreshFeaturedContent();\r\n      }, function (err) {\r\n        console.log(err);\r\n      });\r\n  } else {\r\n    $scope.collectionList = [];\r\n\r\n    for(let guid in $scope.collectionManager.local) {\r\n      let collection = $scope.collectionManager.local[guid];\r\n\r\n      if(collection.accountName == $scope.accountName) {\r\n        $scope.collectionList.push(collection);\r\n      }\r\n\r\n    }\r\n  }\r\n\r\n  $scope.getImageUrl = function () {\r\n    if ($scope.account.imageUrl == undefined) {\r\n      return DEFAULT_IMAGE;\r\n    } else {\r\n      return $scope.account.imageUrl;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * COLLECTION FUNCTIONS \r\n   */\r\n\r\n  // Collection List Search\r\n  $scope.collectionSearch = {};\r\n  $scope.collectionSearch.sortVisible = false;\r\n  $scope.collectionSearch.sortProperty = 'title';\r\n  $scope.collectionSearch.sortProperties =  [ \r\n    { key: 'title', label: 'Title' },\r\n    { key: 'issued', label: 'Issued Date' },\r\n  ];\r\n  $scope.collectionSearch.sortReverse = false;\r\n  $scope.collectionSearch.toggleSort = function(value) {\r\n    if($scope.collectionSearch.sortProperty == value) {\r\n      $scope.collectionSearch.sortReverse = !$scope.collectionSearch.sortReverse;\r\n    } else {\r\n      $scope.collectionSearch.sortProperty = value;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Pencil icon for edit pressed\r\n   * @param {*} collection \r\n   */\r\n  $scope.onEditCollectionClicked = function (collection) {\r\n    $scope.collectionManager.setActive(collection.uuid);\r\n    window.location.href = `/app/collection-editor?uuid=${collection.uuid}`;\r\n  }\r\n\r\n  /**\r\n   * Create new collection\r\n   */\r\n  $scope.createNewCollection = function () {\r\n    $scope.collectionManager.createNew($scope.accountName, 'New Collection', 'Replace this description with a description of your choice.',\r\n      function (collection) {\r\n        window.location.href = `/app/collection-editor?uuid=${collection.uuid}`;\r\n      });\r\n  }\r\n\r\n  /**\r\n   * Create a copy of the clicked collection\r\n   */\r\n  $scope.createCopy = function(collection) {\r\n    let copy = $scope.collectionManager.createCopy(collection);\r\n    window.location.href = `/app/collection-editor?uuid=${copy.uuid}`;\r\n  }\r\n\r\n\r\n  $scope.findFeaturedContent = function (uri) {\r\n\r\n    for (var g in $scope.publishedData.groups) {\r\n      var group = $scope.publishedData.groups[g];\r\n\r\n      if (uri == group.uri) {\r\n        return {\r\n          type: 'Group',\r\n          title: group.title,\r\n          uri: uri,\r\n          description: group.description\r\n        }\r\n      }\r\n\r\n      for (var a in group.artifacts) {\r\n        var artifact = group.artifacts[a];\r\n\r\n        if (uri == artifact.artifactUri) {\r\n          return {\r\n            type: 'Artifact',\r\n            title: artifact.title,\r\n            uri: uri,\r\n            description: artifact.description\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    for (var c in $scope.collectionsData.collections) {\r\n      var collection = $scope.collectionsData.collections[c];\r\n\r\n      if (uri == collection.uri) {\r\n        return {\r\n          type: 'Collection',\r\n          title: collection.title,\r\n          uri: uri,\r\n          description: collection.description\r\n        }\r\n      }\r\n    }\r\n\r\n  }\r\n\r\n  $scope.refreshFeaturedContent = function () {\r\n    if ($scope.account.featuredContent == undefined) {\r\n      return;\r\n    }\r\n\r\n    var featuredContentUris = $scope.account.featuredContent.split('\\n');\r\n    $scope.featuredContent = [];\r\n\r\n    for (var f in featuredContentUris) {\r\n      var content = $scope.findFeaturedContent(featuredContentUris[f]);\r\n\r\n      if (content != undefined) {\r\n        $scope.featuredContent.push(content);\r\n      }\r\n    }\r\n  }\r\n\r\n  /** ACCOUNT MANAGEMENT FOR OWNER */\r\n\r\n}\r\n\r\nmodule.exports = AccountPageController;\n\n//# sourceURL=webpack://databus-webapp/./js/page-controller/account-controller.js?");

/***/ }),

/***/ "./js/page-controller/artifact-controller.js":
/*!***************************************************!*\
  !*** ./js/page-controller/artifact-controller.js ***!
  \***************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("const DatabusCollectionWrapper = __webpack_require__(/*! ../collections/databus-collection-wrapper */ \"./js/collections/databus-collection-wrapper.js\");\r\nconst DatabusAlert = __webpack_require__(/*! ../components/databus-alert/databus-alert */ \"./js/components/databus-alert/databus-alert.js\");\r\nconst DataIdCreator = __webpack_require__(/*! ../publish/dataid-creator */ \"./js/publish/dataid-creator.js\");\r\nconst QueryBuilder = __webpack_require__(/*! ../query-builder/query-builder */ \"./js/query-builder/query-builder.js\");\r\nconst QueryNode = __webpack_require__(/*! ../query-builder/query-node */ \"./js/query-builder/query-node.js\");\r\nconst QueryTemplates = __webpack_require__(/*! ../query-builder/query-templates */ \"./js/query-builder/query-templates.js\");\r\nconst DatabusUtils = __webpack_require__(/*! ../utils/databus-utils */ \"./js/utils/databus-utils.js\");\r\nconst DatabusWebappUtils = __webpack_require__(/*! ../utils/databus-webapp-utils */ \"./js/utils/databus-webapp-utils.js\");\r\nconst TabNavigation = __webpack_require__(/*! ../utils/tab-navigation */ \"./js/utils/tab-navigation.js\");\r\n\r\n// hinzufgen eines Controllers zum Modul\r\nfunction ArtifactPageController($scope, $http, $sce, $location, collectionManager) {\r\n\r\n  $scope.collectionManager = collectionManager;\r\n  $scope.authenticated = data.auth.authenticated;\r\n  $scope.auth = data.auth;\r\n  $scope.utils = new DatabusWebappUtils($scope, $sce);\r\n  $scope.accountName = $scope.utils.getAccountName();\r\n\r\n  $scope.tabNavigation = new TabNavigation($scope, $location, [\r\n    'files', 'versions', 'edit'\r\n  ]);\r\n\r\n  $scope.versions = data.versions;\r\n  $scope.artifact = data.artifact;\r\n  $scope.accountName = DatabusUtils.uriToName(DatabusUtils.navigateUp($scope.artifact.uri, 2));\r\n  $scope.canEdit = $scope.accountName != null;\r\n  $scope.pageTitle = DatabusUtils.stringOrFallback($scope.artifact.title,\r\n    DatabusUtils.uriToTitle($scope.artifact.uri));\r\n\r\n  if (data.auth.authenticated && $scope.canEdit) {\r\n\r\n    $scope.formData = {};\r\n    $scope.formData.group = {};\r\n    $scope.formData.group.name = DatabusUtils.uriToName(DatabusUtils.navigateUp($scope.artifact.uri));\r\n    $scope.formData.artifact = {};\r\n\r\n    var abstract = DatabusUtils.createAbstractFromDescription($scope.artifact.description);\r\n    $scope.formData.artifact.generateAbstract = abstract == $scope.artifact.abstract;\r\n    $scope.formData.artifact.name = $scope.artifact.name;\r\n    $scope.formData.artifact.title = $scope.artifact.title;\r\n    $scope.formData.artifact.abstract = $scope.artifact.abstract;\r\n    $scope.formData.artifact.description = $scope.artifact.description;\r\n\r\n    $scope.dataidCreator = new DataIdCreator($scope.formData,  $scope.accountName);\r\n  }\r\n\r\n  $scope.fileSelector = {};\r\n  $scope.fileSelector.config = {};\r\n  $scope.fileSelector.config.authenticated = $scope.authenticated;\r\n  $scope.fileSelector.config.columns = [];\r\n  $scope.fileSelector.config.columns.push({ field: 'version', label: 'Version', width: '30%' });\r\n  $scope.fileSelector.config.columns.push({ field: 'variant', label: 'Variant', width: '30%' });\r\n  $scope.fileSelector.config.columns.push({ field: 'format', label: 'Format', width: '12%' });\r\n  $scope.fileSelector.config.columns.push({ field: 'compression', label: 'Compression', width: '12%' });\r\n\r\n  $scope.artifactNode = new QueryNode($scope.artifact.uri, 'databus:artifact');\r\n  $scope.artifactNode.setFacet('http://purl.org/dc/terms/hasVersion', '$latest', true);\r\n\r\n  $scope.groupNode = new QueryNode(DatabusUtils.navigateUp($scope.artifact.uri), 'databus:group');\r\n  $scope.groupNode.addChild($scope.artifactNode);\r\n\r\n  $scope.collectionWidgetSelectionData = {};\r\n  $scope.collectionWidgetSelectionData.groupNode = $scope.groupNode;\r\n\r\n  $scope.onFacetSettingsChanged = function () {\r\n    $scope.fileSelector.query = QueryBuilder.build({\r\n      node: $scope.artifactNode,\r\n      template: QueryTemplates.DEFAULT_FILE_TEMPLATE,\r\n      resourceBaseUrl: DATABUS_RESOURCE_BASE_URL\r\n    });\r\n\r\n    $scope.fileSelector.fullQuery = QueryBuilder.build({\r\n      node: $scope.artifactNode,\r\n      template: QueryTemplates.GROUP_PAGE_FILE_BROWSER_TEMPLATE,\r\n      resourceBaseUrl: DATABUS_RESOURCE_BASE_URL\r\n    });\r\n  }\r\n\r\n  $scope.onFacetSettingsChanged();\r\n\r\n\r\n  $scope.onFileSelectionChanged = function (numFiles, totalSize) {\r\n    $scope.fileSelector.numFiles = numFiles;\r\n    $scope.fileSelector.totalSize = totalSize;\r\n  };\r\n\r\n  $scope.formatId = function (id) {\r\n    return DatabusCollectionUtils.formatId(id);\r\n  };\r\n\r\n  $scope.addArtifactNodeToCollection = function () {\r\n\r\n    if ($scope.collectionManager.activeCollection == null) {\r\n      return;\r\n    }\r\n\r\n    var wrapper = new DatabusCollectionWrapper($scope.collectionManager.activeCollection);\r\n    wrapper.addArtifactNode(\r\n      $scope.artifact.uri,\r\n      $scope.artifact.title,\r\n      $scope.fileSelector.settings);\r\n\r\n    $scope.collectionManager.saveLocally();\r\n    $scope.statusCode = 1;\r\n  };\r\n\r\n  $scope.changeCollection = function (collection) {\r\n    if (!$scope.authenticated) {\r\n      return;\r\n    }\r\n\r\n    $scope.collectionManager.setActive(collection.uuid);\r\n  }\r\n\r\n\r\n  $scope.hideAutofill = function () {\r\n    $scope.fileSelector.clearAutofill(function () {\r\n      $scope.$apply();\r\n    });\r\n  }\r\n\r\n\r\n  $scope.onDescriptionChanged = function () {\r\n    if ($scope.formData == null) {\r\n      return;\r\n    }\r\n\r\n    if (!$scope.formData.artifact.generateAbstract) {\r\n      return;\r\n    }\r\n\r\n    $scope.formData.artifact.abstract =\r\n      DatabusUtils.createAbstractFromDescription($scope.formData.artifact.description);\r\n  }\r\n\r\n  $scope.resetEdits = function () {\r\n    $scope.formData.artifact.title = $scope.artifact.title;\r\n    $scope.formData.artifact.abstract = $scope.artifact.abstract;\r\n    $scope.formData.artifact.description = $scope.artifact.description;\r\n  }\r\n\r\n  $scope.saveArtifact = async function () {\r\n\r\n    if ($scope.dataidCreator == null) {\r\n      return;\r\n    }\r\n\r\n    var artifactUpdate = $scope.dataidCreator.createArtifactUpdate();\r\n\r\n    var response = await $http.post(`/api/register`, artifactUpdate);\r\n\r\n    if (response.status == 200) {\r\n      $scope.artifact.title = $scope.formData.artifact.title;\r\n      $scope.artifact.abstract = $scope.formData.artifact.abstract;\r\n      $scope.artifact.description = $scope.formData.artifact.description;\r\n\r\n      $scope.pageTitle = DatabusUtils.stringOrFallback($scope.artifact.title,\r\n        DatabusUtils.uriToTitle($scope.artifact.uri));\r\n\r\n      DatabusAlert.alert($scope, true, \"Artifact Saved!\");\r\n      $scope.$apply();\r\n    }\r\n  }\r\n\r\n\r\n}\r\n\r\n\r\nmodule.exports = ArtifactPageController;\r\n\n\n//# sourceURL=webpack://databus-webapp/./js/page-controller/artifact-controller.js?");

/***/ }),

/***/ "./js/page-controller/collection-controller.js":
/*!*****************************************************!*\
  !*** ./js/page-controller/collection-controller.js ***!
  \*****************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("const DatabusCollectionUtils = __webpack_require__(/*! ../collections/databus-collection-utils */ \"./js/collections/databus-collection-utils.js\");\r\nconst DatabusCollectionWrapper = __webpack_require__(/*! ../collections/databus-collection-wrapper */ \"./js/collections/databus-collection-wrapper.js\");\r\nconst DatabusAlert = __webpack_require__(/*! ../components/databus-alert/databus-alert */ \"./js/components/databus-alert/databus-alert.js\");\r\nconst DatabusUtils = __webpack_require__(/*! ../utils/databus-utils */ \"./js/utils/databus-utils.js\");\r\nconst DatabusWebappUtils = __webpack_require__(/*! ../utils/databus-webapp-utils */ \"./js/utils/databus-webapp-utils.js\");\r\n\r\nfunction CollectionController($scope, $sce, $http, collectionManager) {\r\n\r\n  $scope.auth = data.auth;\r\n  $scope.collection = new DatabusCollectionWrapper(data.collection);\r\n  $scope.authenticated = data.auth.authenticated;\r\n  $scope.activeTab = 0;\r\n  $scope.collectionManager = collectionManager;\r\n\r\n  // Make some util functions available in the template\r\n  $scope.utils = new DatabusWebappUtils($scope, $sce);\r\n  $scope.accountName = $scope.utils.getAccountName();\r\n\r\n  $scope.isOwn = false;\r\n\r\n  if ($scope.authenticated) {\r\n    $scope.collectionAccountName = DatabusUtils.uriToName(DatabusUtils.navigateUp($scope.collection.uri, 2));\r\n    $scope.isOwn = $scope.accountName === $scope.collectionAccountName;\r\n  }\r\n\r\n\r\n  $scope.collectionViewModel = {};\r\n  $scope.collectionViewModel.downloadScript = [];\r\n  $scope.collectionViewModel.downloadScript.length = 3;\r\n  $scope.collectionViewModel.downloadScript[0] = `query=$(curl -H \"Accept:text/sparql\" ${$scope.collection.uri})`;\r\n  $scope.collectionViewModel.downloadScript[1] = `files=$(curl -X POST -H \"Accept: text/csv\" --data-urlencode \"query=\\${query}\" ${DATABUS_RESOURCE_BASE_URL}/sparql | tail -n +2 | sed 's/\\\\r$//' | sed 's/\"//g')`;\r\n  $scope.collectionViewModel.downloadScript[2] = `while IFS= read -r file ; do wget $file; done <<< \"$files\"`;\r\n\r\n  $scope.collectionViewModel.downloadManual = 'To fetch the query via *curl* run \\n``` shell\\n'\r\n    + $scope.collectionViewModel.downloadScript[0] + '\\n```'\r\n    + '\\n\\n\\nTo download the files additionally run\\n``` shell\\n'\r\n    + $scope.collectionViewModel.downloadScript[1] + '\\n'\r\n    + $scope.collectionViewModel.downloadScript[2]\r\n    + '\\n```';\r\n\r\n  $scope.collectionQuery = $scope.collection.createQuery();\r\n  $scope.collectionManager = collectionManager;\r\n  $scope.collectionFiles = \"\";\r\n\r\n\r\n  DatabusCollectionUtils.getCollectionFileURLs($http, $scope.collection).then(function (result) {\r\n    $scope.collectionFiles = result;\r\n    $scope.$apply();\r\n  }, function (err) {\r\n    console.log(err);\r\n  });\r\n\r\n\r\n  if ($scope.authenticated) {\r\n    $scope.username = data.auth.info.username;\r\n  }\r\n\r\n  $scope.formatUploadSize = function (size) {\r\n    return DatabusUtils.formatFileSize(size);\r\n  };\r\n\r\n\r\n\r\n  $scope.editCopy = function () {\r\n    if (!$scope.collectionManager.isInitialized) {\r\n      return;\r\n    }\r\n\r\n    let localCopy = $scope.collectionManager.createCopy($scope.collection);\r\n\r\n    window.location.href = `/app/collection-editor?uuid${localCopy.uuid}`;\r\n  }\r\n\r\n  $scope.createSnapshot = function () {\r\n    if (!$scope.collectionManager.isInitialized) {\r\n      return;\r\n    }\r\n\r\n\r\n    let collectionSnapshot = $scope.collectionManager.createSnapshot($scope.collection);\r\n    window.location.href = `/app/collection-editor?uuid${collectionSnapshot.uuid}`;\r\n  }\r\n\r\n  \r\n  $scope.editCollection = function () {\r\n\r\n    if (!$scope.collectionManager.isInitialized) {\r\n      return;\r\n    }\r\n\r\n    let localCopy = $scope.collectionManager.getCollectionByUri($scope.collection.uri);\r\n\r\n    /// TODO Fabian - das sollte nicht passieren!\r\n    if (localCopy === null) {\r\n      console.log(\"editCollection failed. There is no collection with that uri: \" + $scope.collection.uri)\r\n      $scope.editCopy();\r\n      return;\r\n    }\r\n\r\n    window.location.href = `/app/collection-editor?uuid=${localCopy.uuid}`;\r\n  }\r\n\r\n\r\n  $scope.downloadAsJson = function () {\r\n    DatabusCollectionUtils.exportToJsonFile($scope.collection);\r\n  }\r\n\r\n  $scope.queryToClipboard = function () {\r\n\r\n    $scope.utils.copyToClipboard($scope.collectionQuery);\r\n    DatabusAlert.alert($scope, true, DatabusMessages.GENERIC_COPIED_TO_CLIPBOARD);\r\n\r\n  }\r\n\r\n  $scope.openInYasgui = function () {\r\n    window.location.href = 'https://databus.dbpedia.org/yasgui?query=' + encodeURIComponent($scope.collectionQuery);\r\n  }\r\n\r\n  $scope.bashScriptToClipboard = function () {\r\n\r\n    var bashscript = `${$scope.collectionViewModel.downloadScript[0]}\r\n${$scope.collectionViewModel.downloadScript[1]}\r\n${$scope.collectionViewModel.downloadScript[2]}`\r\n\r\n    $scope.utils.copyToClipboard(bashscript);\r\n    DatabusAlert.alert($scope, true, DatabusMessages.GENERIC_COPIED_TO_CLIPBOARD);\r\n  }\r\n\r\n\r\n  $scope.filesToClipboard = function () {\r\n    $scope.utils.copyToClipboard($scope.collectionFiles);\r\n    DatabusAlert.alert($scope, true, DatabusMessages.GENERIC_COPIED_TO_CLIPBOARD);\r\n  }\r\n\r\n}\r\n\r\nmodule.exports = CollectionController;\r\n\n\n//# sourceURL=webpack://databus-webapp/./js/page-controller/collection-controller.js?");

/***/ }),

/***/ "./js/page-controller/collections-editor-controller.js":
/*!*************************************************************!*\
  !*** ./js/page-controller/collections-editor-controller.js ***!
  \*************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("const DatabusCollectionUtils = __webpack_require__(/*! ../collections/databus-collection-utils */ \"./js/collections/databus-collection-utils.js\");\r\nconst DatabusCollectionWrapper = __webpack_require__(/*! ../collections/databus-collection-wrapper */ \"./js/collections/databus-collection-wrapper.js\");\r\nconst DatabusAlert = __webpack_require__(/*! ../components/databus-alert/databus-alert */ \"./js/components/databus-alert/databus-alert.js\");\r\nconst QueryNode = __webpack_require__(/*! ../query-builder/query-node */ \"./js/query-builder/query-node.js\");\r\nconst DatabusMessages = __webpack_require__(/*! ../utils/databus-messages */ \"./js/utils/databus-messages.js\");\r\nconst DatabusUris = __webpack_require__(/*! ../utils/databus-uris */ \"./js/utils/databus-uris.js\");\r\nconst DatabusUtils = __webpack_require__(/*! ../utils/databus-utils */ \"./js/utils/databus-utils.js\");\r\nconst DatabusWebappUtils = __webpack_require__(/*! ../utils/databus-webapp-utils */ \"./js/utils/databus-webapp-utils.js\");\r\nconst TabNavigation = __webpack_require__(/*! ../utils/tab-navigation */ \"./js/utils/tab-navigation.js\");\r\n\r\n/**\r\n * Controls the collection editor page\r\n * @param {*} $scope \r\n * @param {*} $timeout \r\n * @param {*} $http \r\n * @param {*} $location \r\n * @param {*} collectionManager \r\n * @returns \r\n */\r\nasync function CollectionsEditorController($scope, $timeout, $http, $location, collectionManager) {\r\n\r\n  $scope.auth = data.auth;\r\n  $scope.authenticated = data.auth.authenticated;\r\n  $scope.baseUrl = DATABUS_RESOURCE_BASE_URL;\r\n\r\n  // Check for proper authentication\r\n  if (!$scope.authenticated) {\r\n    return;\r\n  }\r\n\r\n  const params = new URLSearchParams(window.location.search);\r\n  $scope.uuid = params.get('uuid');\r\n\r\n  // Make some util functions available in the template\r\n  $scope.utils = new DatabusWebappUtils($scope);\r\n  $scope.collectionManager = collectionManager;\r\n  \r\n  let collection = $scope.collectionManager.local[$scope.uuid];\r\n\r\n  if(collection == null) {\r\n    // No working copy found\r\n    return;\r\n  }\r\n\r\n  try {\r\n      let collection = $scope.collectionManager.local[$scope.uuid];\r\n      await $scope.collectionManager.tryInitialize(collection.accountName);\r\n    } catch(err) {\r\n\r\n    }\r\n\r\n  $scope.collectionManager.setActive($scope.uuid);\r\n  let activeCollection = $scope.collectionManager.activeCollection;\r\n  \r\n  $scope.accountName = $scope.utils.getOwnedAccountName(activeCollection.accountName);\r\n  $scope.hasAccount = $scope.accountName != undefined;\r\n\r\n  //if (!$scope.hasAccount) {\r\n  //  return;\r\n  //}\r\n\r\n  // Create a tab navigation object for the tab navigation with locato\r\n  $scope.tabNavigation = new TabNavigation($scope, $location, [\r\n    'docu', 'content', 'preview', 'query', 'json', 'import'\r\n  ]);\r\n\r\n  // Make the manager available in the template\r\n //  $scope.collectionManager.setActiveCollection($scope.guid);\r\n\r\n  // Form data object for input errors and extra fields and toggles\r\n  $scope.form = {};\r\n  $scope.form.title = {};\r\n  $scope.form.identifier = {};\r\n  $scope.form.identifier.value = \"\";\r\n  $scope.form.abstract = {};\r\n  $scope.form.description = {};\r\n  $scope.form.isHidden = $scope.collectionManager.activeCollection.issued == undefined;\r\n  $scope.form.collectionPublishTag = '';\r\n  var description = $scope.collectionManager.activeCollection.description;\r\n  var generatedAbstract = DatabusUtils.createAbstractFromDescription(description);\r\n  $scope.form.generateAbstract = $scope.collectionManager.activeCollection.abstract == generatedAbstract;\r\n\r\n  /**\r\n   * Triggered when the description field gets changed.\r\n   * Generates an abstract from the description. \r\n   * @returns \r\n   */\r\n  $scope.onDescriptionChanged = function () {\r\n    if ($scope.form == null) {\r\n      return;\r\n    }\r\n\r\n    if ($scope.form.generateAbstract) {\r\n      var description = $scope.collectionManager.activeCollection.description;\r\n      var generatedAbstract = DatabusUtils.createAbstractFromDescription(description);\r\n      $scope.collectionManager.activeCollection.abstract = generatedAbstract;\r\n    }\r\n\r\n    // Triggers saving to the local storage\r\n    $scope.onActiveCollectionChanged();\r\n  }\r\n\r\n\r\n  /**\r\n   * Called whenever an input field or similar gets changed. Persists the local changes in the local storage\r\n   */\r\n  $scope.onActiveCollectionChanged = function () {\r\n\r\n    let collection = $scope.collectionManager.activeCollection;\r\n\r\n    // Save to storage\r\n    if ($scope.collectionManager.isInitialized) {\r\n      $scope.collectionManager.saveLocally();\r\n    }\r\n\r\n    // Refresh query and json representation\r\n    $scope.collectionQuery = new DatabusCollectionWrapper(collection).createQuery();\r\n    $scope.collectionJson = $scope.getCollectionJson();\r\n\r\n    if (collection != null) {\r\n      collection.hasLocalChanges = $scope.collectionManager.hasLocalChanges(collection);\r\n    }\r\n\r\n    DatabusCollectionUtils.checkCollectionForm($scope.form, collection)\r\n  }\r\n\r\n  $scope.getStatusMessage = function (code) {\r\n    return DatabusResponse.Message[code];\r\n  }\r\n\r\n  $scope.getStatusSuccess = function () {\r\n    return $scope.statusCode >= 2000 && $scope.statusCode < 3000;\r\n  }\r\n\r\n  $scope.resetStatus = function () {\r\n    $scope.statusCode = 0;\r\n  }\r\n\r\n  $scope.preview = function () {\r\n    if ($scope.collectionManager.activeCollection.isDraft) {\r\n      return;\r\n    }\r\n\r\n    var identifier = DatabusUtils.uriToName($scope.collectionManager.activeCollection.uri);\r\n    window.location.href = `/${$scope.accountName}/collections/${identifier}`;\r\n  }\r\n\r\n  /**\r\n   * Saves the collection to the remote server\r\n   * @returns \r\n   */\r\n  $scope.saveCollection = async function () {\r\n\r\n    try {\r\n      // Needs initialized CM\r\n      if (!$scope.collectionManager.isInitialized) {\r\n        return;\r\n      }\r\n\r\n      let collection = $scope.collectionManager.activeCollection;\r\n\r\n      // Check whether the form values are correct\r\n      if (!DatabusCollectionUtils.checkCollectionForm($scope.form, collection)) {\r\n        return;\r\n      }\r\n\r\n      // Look for an existing identifier\r\n      var identifier = undefined;\r\n\r\n      // Either take the identifier from the form (draft) or the collection uri (published)\r\n      if (collection.isDraft) {\r\n        identifier = $scope.form.identifier.value;\r\n      } else {\r\n        identifier = DatabusUtils.uriToName($scope.collectionManager.activeCollection.uri);\r\n      }\r\n\r\n      $scope.isSaving = true;\r\n      $scope.collectionManager.updateCollection($scope.accountName, identifier).then(function (response) {\r\n        DatabusAlert.alert($scope, true, DatabusMessages.CEDIT_COLLECTION_SAVED);\r\n        $scope.isSaving = false;\r\n        $scope.$apply();\r\n      }).catch(function (err) {\r\n        console.log(err);\r\n        DatabusAlert.alert($scope, false, DatabusMessages.CEDIT_COLLECTION_SAVE_FAILED);\r\n        $scope.isSaving = false;\r\n        $scope.$apply();\r\n      });\r\n\r\n    } catch (err) {\r\n      console.log(err);\r\n      DatabusAlert.alert($scope, false, err);\r\n    }\r\n  }\r\n\r\n  $scope.unpublishCollection = async function () {\r\n\r\n    if ($scope.collectionManager.activeCollection.isDraft) {\r\n      return;\r\n    }\r\n\r\n    try {\r\n      await $scope.collectionManager.unpublishActiveCollection();\r\n      DatabusAlert.alert($scope, true, DatabusMessages.CEDIT_COLLECTION_UNPUBLISHED);\r\n    } catch (err) {\r\n      DatabusAlert.alert($scope, false, err);\r\n      console.log(err);\r\n    }\r\n  }\r\n\r\n  $scope.showDeleteModal = function () {\r\n    $scope.deleteModalVisible = true;\r\n  }\r\n\r\n  $scope.hideDeleteModal = function () {\r\n    $scope.deleteModalVisible = false;\r\n  }\r\n\r\n  $scope.deleteCollection = function () {\r\n    if (!$scope.collectionManager.isInitialized) {\r\n      return;\r\n    }\r\n\r\n    $scope.deleteModalVisible = false;\r\n\r\n    $scope.collectionManager.deleteCollection($scope.username, $scope.form.identifier.value).then(function (response) {\r\n      $scope.statusCode = response.code;\r\n      $scope.collectionManager.selectFirstOrCreate();\r\n      $scope.setActiveCollection($scope.collectionManager.activeCollection);\r\n      $scope.$apply();\r\n      $timeout($scope.resetStatus, $scope.modalTime);\r\n    }).catch(function (err) {\r\n      $scope.statusCode = err.code;\r\n      $scope.$apply();\r\n      $timeout($scope.resetStatus, $scope.modalTime);\r\n    });\r\n  }\r\n\r\n\r\n  $scope.deleteLocally = function () {\r\n    if (!$scope.collectionManager.isInitialized) {\r\n      return;\r\n    }\r\n\r\n    if (!$scope.collectionManager.activeCollection.isDraft) {\r\n      return;\r\n    }\r\n\r\n    $scope.collectionManager.deleteLocally();\r\n    window.location.href = `/${$scope.accountName}/collections`;\r\n  }\r\n\r\n  $scope.downloadAsJson = function () {\r\n    DatabusCollectionUtils.exportToJsonFile($scope.collectionManager.activeCollection);\r\n  }\r\n\r\n  /**\r\n   * Discard local changes of the active collection and revert to the remote collection state\r\n   * @returns \r\n   */\r\n  $scope.discardChanges = function () {\r\n\r\n    if (!$scope.collectionManager.activeCollection.hasLocalChanges) {\r\n      return;\r\n    }\r\n\r\n    if ($scope.collectionManager.activeCollection.isDraft) {\r\n      return;\r\n    }\r\n\r\n    $scope.collectionManager.discardLocalChanges();\r\n    DatabusAlert.alert($scope, true, DatabusMessages.CEDIT_LOCAL_CHANGES_DISCARDED);\r\n  }\r\n\r\n\r\n  $scope.showLoadFromJson = function () {\r\n    $scope.isLoadFromJsonVisible = true;\r\n  }\r\n\r\n  $scope.hideLoadFromJson = function () {\r\n    $scope.isLoadFromJsonVisible = false;\r\n  }\r\n\r\n  $scope.loadFromJsonString = '';\r\n\r\n  $scope.loadFromJson = function (loadFromJsonString) {\r\n    try {\r\n\r\n      \r\n      var toLoad = JSON.parse(loadFromJsonString);\r\n\r\n      var target = $scope.collectionManager.activeCollection;\r\n\r\n      if (toLoad.label != undefined) {\r\n        target.title = toLoad.label;\r\n      }\r\n\r\n      if (toLoad.title != undefined) {\r\n        target.title = toLoad.title;\r\n      }\r\n\r\n      target.description = toLoad.description;\r\n      target.abstract = toLoad.abstract;\r\n\r\n      if (toLoad.content.generatedQuery != undefined || toLoad.content.customQueries) {\r\n        // Datbaus 1.0 Syntax detected\r\n        var replacedJson = loadFromJsonString\r\n          .replace(\"dataid:\", \"databus:\")\r\n          .replace(\"http://dataid.dbpedia.org/ns/cv#\",\r\n          DatabusUris.DATABUS_CONTENT_VARIANT_PREFIX);\r\n\r\n        var toLoad = JSON.parse(replacedJson);\r\n        var databusNode = new QueryNode(DATABUS_RESOURCE_BASE_URL, null);\r\n\r\n        target.content.root = new QueryNode(null, null);\r\n        target.content.root.addChild(databusNode);\r\n\r\n        for(var groupNode of toLoad.content.generatedQuery.root.childNodes) {\r\n          databusNode.addChild(groupNode);\r\n        }\r\n\r\n        for(var customNode of toLoad.content.customQueries) {\r\n\r\n          var label = customNode.label;\r\n          var query = customNode.query;\r\n\r\n          databusNode.addChild(new QueryNode(label, query));\r\n        }\r\n\r\n      } else {\r\n        target.content = toLoad.content;\r\n      }\r\n\r\n      DatabusAlert.alert($scope, true, DatabusMessages.CEDIT_COLLECTION_IMPORTED);\r\n      $scope.isLoadFromJsonVisible = false;\r\n    } catch (e) {\r\n      $scope.statusCode = DatabusMessages.CEDIT_COLLECTION_IMPORT_FAILED;\r\n      console.log(e);\r\n    }\r\n  }\r\n\r\n  $scope.getCollectionJson = function () {\r\n    var copy = DatabusCollectionUtils.createCleanCopy($scope.collectionManager.activeCollection);\r\n    delete copy.uuid;\r\n    return copy;\r\n  }\r\n\r\n  $scope.onActiveCollectionChanged();\r\n}\r\n\r\nmodule.exports = CollectionsEditorController;\n\n//# sourceURL=webpack://databus-webapp/./js/page-controller/collections-editor-controller.js?");

/***/ }),

/***/ "./js/page-controller/frontpage-controller.js":
/*!****************************************************!*\
  !*** ./js/page-controller/frontpage-controller.js ***!
  \****************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("const DatabusUris = __webpack_require__(/*! ../utils/databus-uris */ \"./js/utils/databus-uris.js\");\nconst DatabusUtils = __webpack_require__(/*! ../utils/databus-utils */ \"./js/utils/databus-utils.js\");\nconst DatabusWebappUtils = __webpack_require__(/*! ../utils/databus-webapp-utils */ \"./js/utils/databus-webapp-utils.js\");\n\n/**\n * Controller of the front page\n * @param  {scope} $scope      [description]\n * @param  {http} $http       [description]\n * @param  {sce} $sce        [description]\n */\nfunction FrontPageController($scope, $sce, $http) {\n\n  $scope.databusName = DATABUS_NAME;\n\n  $scope.auth = data.auth;\n\n  $scope.activityChartData = {};\n  $scope.activityChartData.isLoading = true;\n  $scope.utils = new DatabusWebappUtils();\n\n  $scope.searchQuery = \"\";\n  $scope.searchSettings = {\n    minRelevance: 20,\n    maxResults: 25,\n    placeholder: `Search the Databus...`,\n    resourceTypes: undefined,\n    filter: `&typeNameWeight=0`\n  };\n\n  $http.get(`/app/index/activity`).then(function (response) {\n    $scope.activityChartData.entries = response.data;\n    $scope.activityChartData.isLoading = false;\n  }, function (err) {\n    console.log(err);\n  });\n\n  $scope.uploadRankingData = {};\n  $scope.uploadRankingData.isLoading = true;\n\n  $http.get(`/app/index/ranking`).then(function (response) {\n    $scope.uploadRankingData.data = response.data;\n    $scope.uploadRankingData.isLoading = false;\n  }, function (err) {\n    console.log(err);\n  });\n\n  $scope.recentUploadsData = {};\n  $scope.recentUploadsData.isLoading = true;\n\n  $http.get(`/app/index/recent`).then(function (response) {\n    $scope.recentUploadsData.data = response.data;\n    $scope.recentUploadsData.isLoading = false;\n  }, function (err) {\n    console.log(err);\n  });\n\n   // Login function\n   $scope.login = function () {\n    window.location = '/app/login?redirectUrl=' + encodeURIComponent(window.location);\n  }\n\n  $scope.goToPage = function(path) {\n    window.location = path;\n  }\n\n  $scope.account = function() {\n    window.location = '/app/account';\n  }\n\n  for(var d in $scope.uploadRankingData) {\n    $scope.uploadRankingData[d].uploadSize = DatabusUtils.formatFileSize($scope.uploadRankingData[d].uploadSize);\n  }\n\n  for(var d in $scope.recentUploadsData) {\n    $scope.recentUploadsData[d].date = DatabusUtils.formatDate($scope.recentUploadsData[d].date);\n  }\n}\n\n\nmodule.exports = FrontPageController;\n\n\n//# sourceURL=webpack://databus-webapp/./js/page-controller/frontpage-controller.js?");

/***/ }),

/***/ "./js/page-controller/group-controller.js":
/*!************************************************!*\
  !*** ./js/page-controller/group-controller.js ***!
  \************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("const DatabusCollectionWrapper = __webpack_require__(/*! ../collections/databus-collection-wrapper */ \"./js/collections/databus-collection-wrapper.js\");\r\nconst DatabusAlert = __webpack_require__(/*! ../components/databus-alert/databus-alert */ \"./js/components/databus-alert/databus-alert.js\");\r\nconst DataIdCreator = __webpack_require__(/*! ../publish/dataid-creator */ \"./js/publish/dataid-creator.js\");\r\nconst QueryBuilder = __webpack_require__(/*! ../query-builder/query-builder */ \"./js/query-builder/query-builder.js\");\r\nconst QueryNode = __webpack_require__(/*! ../query-builder/query-node */ \"./js/query-builder/query-node.js\");\r\nconst QueryTemplates = __webpack_require__(/*! ../query-builder/query-templates */ \"./js/query-builder/query-templates.js\");\r\nconst DatabusConstants = __webpack_require__(/*! ../utils/databus-constants */ \"./js/utils/databus-constants.js\");\r\nconst DatabusUtils = __webpack_require__(/*! ../utils/databus-utils */ \"./js/utils/databus-utils.js\");\r\nconst DatabusWebappUtils = __webpack_require__(/*! ../utils/databus-webapp-utils */ \"./js/utils/databus-webapp-utils.js\");\r\nconst TabNavigation = __webpack_require__(/*! ../utils/tab-navigation */ \"./js/utils/tab-navigation.js\");\r\n\r\nfunction GroupPageController($scope, $http, $sce, $interval, $location, collectionManager) {\r\n\r\n  $scope.group = data.group;\r\n  // $scope.accountName = DatabusUtils.uriToName(DatabusUtils.navigateUp($scope.group.uri));\r\n  $scope.auth = data.auth;\r\n\r\n  $scope.utils = new DatabusWebappUtils($scope, $sce);\r\n  $scope.accountName = $scope.utils.getAccountName();\r\n\r\n\r\n  $scope.tabNavigation = new TabNavigation($scope, $location, [\r\n    'files', 'artifacts', 'edit'\r\n  ]);\r\n\r\n  $scope.dataSearchInput = \"\";\r\n  $scope.dataSearchSettings = {\r\n    minRelevance: 0.01,\r\n    maxResults: 10,\r\n    placeholder: `Search ${$scope.accountName}'s data...`,\r\n    resourceTypes: ['Artifact'],\r\n    filter: `&publisher=${$scope.accountName}&typeNameWeight=0&group=${$scope.group.name}`\r\n  };\r\n\r\n\r\n  $scope.group.hasData = false;\r\n  $scope.group.hasArtifacts = false;\r\n  $scope.isLoading = true;\r\n\r\n  $http({\r\n    method: 'GET',\r\n    url: `/app/group/get-artifacts?uri=${encodeURIComponent($scope.group.uri)}`\r\n  }).then(function successCallback(response) {\r\n\r\n    $scope.artifacts = response.data;\r\n\r\n    for (var artifact of $scope.artifacts) {\r\n      if (artifact.latestVersionDate != undefined) {\r\n        $scope.group.hasData = true;\r\n      }\r\n\r\n      artifact.title = DatabusUtils.stringOrFallback(artifact.title, artifact.latestVersionTitle);\r\n      artifact.abstract = DatabusUtils.stringOrFallback(artifact.abstract, artifact.latestVersionAbstract);\r\n      artifact.description = DatabusUtils.stringOrFallback(artifact.description, artifact.latestVersionDescription);\r\n    }\r\n\r\n    $scope.group.hasArtifacts = $scope.artifacts.length > 0;\r\n    $scope.isLoading = false;\r\n  }, function errorCallback(response) {\r\n    $scope.isLoading = false;\r\n  });\r\n\r\n\r\n  $scope.pageTitle = DatabusUtils.stringOrFallback($scope.group.title,\r\n    DatabusUtils.uriToTitle($scope.group.uri));\r\n\r\n\r\n  $scope.canEdit = $scope.accountName != null;\r\n\r\n  if (data.auth.authenticated && $scope.canEdit) {\r\n\r\n    var abstract = DatabusUtils.createAbstractFromDescription($scope.group.description);\r\n    $scope.formData = {};\r\n    $scope.formData.group = {};\r\n    $scope.formData.group.generateAbstract = abstract == $scope.group.abstract;\r\n    $scope.formData.group.name = $scope.group.name;\r\n    $scope.formData.group.title = $scope.group.title;\r\n    $scope.formData.group.abstract = $scope.group.abstract;\r\n    $scope.formData.group.description = $scope.group.description;\r\n\r\n    $scope.dataidCreator = new DataIdCreator($scope.formData,  $scope.accountName);\r\n  }\r\n\r\n  $scope.onDescriptionChanged = function () {\r\n    if ($scope.formData == null) {\r\n      return;\r\n    }\r\n\r\n    if (!$scope.formData.group.generateAbstract) {\r\n      return;\r\n    }\r\n\r\n    $scope.formData.group.abstract =\r\n      DatabusUtils.createAbstractFromDescription($scope.formData.group.description);\r\n  }\r\n\r\n  $scope.resetEdits = function () {\r\n    $scope.formData.group.title = $scope.group.title;\r\n    $scope.formData.group.abstract = $scope.group.abstract;\r\n    $scope.formData.group.description = $scope.group.description;\r\n  }\r\n\r\n  $scope.saveGroup = async function () {\r\n\r\n    if ($scope.dataidCreator == null) {\r\n      return;\r\n    }\r\n\r\n    var groupUpdate = $scope.dataidCreator.createGroupUpdate();\r\n\r\n    var relativeUri = new URL($scope.group.uri).pathname;\r\n    var response = await $http.post('/api/register', groupUpdate);\r\n\r\n    if (response.status == 200) {\r\n      $scope.group.title = $scope.formData.group.title;\r\n      $scope.group.abstract = $scope.formData.group.abstract;\r\n      $scope.group.description = $scope.formData.group.description;\r\n\r\n\r\n      $scope.pageTitle = DatabusUtils.stringOrFallback($scope.group.title,\r\n        DatabusUtils.uriToTitle($scope.group.uri));\r\n\r\n      DatabusAlert.alert($scope, true, \"Group Saved!\");\r\n      $scope.$apply();\r\n    }\r\n  }\r\n\r\n  $scope.facetsView = {};\r\n  $scope.facetsView.resourceUri = $scope.group.uri;\r\n  $scope.facetsView.settings = [];\r\n  $scope.facetsView.parentSettings = null;\r\n  $scope.authenticated = data.auth.authenticated;\r\n  $scope.selection = [];\r\n\r\n  $scope.input = {};\r\n  $scope.input.search = '';\r\n  $scope.searchCooldown = 500;\r\n  $scope.searchChanged = true;\r\n  $scope.searchReady = true;\r\n\r\n  $scope.fileSelector = {};\r\n  $scope.fileSelector.config = {};\r\n  $scope.fileSelector.config.authenticated = $scope.authenticated;\r\n  $scope.fileSelector.config.columns = [];\r\n  $scope.fileSelector.config.columns.push({ field: 'artifact', label: 'Artifact', width: '30%', uriToName: true });\r\n  $scope.fileSelector.config.columns.push({ field: 'version', label: 'Version', width: '21%' });\r\n  $scope.fileSelector.config.columns.push({ field: 'variant', label: 'Variant', width: '16%' });\r\n  $scope.fileSelector.config.columns.push({ field: 'format', label: 'Format', width: '9%' });\r\n  $scope.fileSelector.config.columns.push({ field: 'compression', label: 'Compression', width: '6%' });\r\n\r\n  $scope.groupNode = new QueryNode($scope.group.uri, 'databus:group');\r\n  $scope.groupNode.setFacet('http://purl.org/dc/terms/hasVersion', DatabusConstants.FACET_LATEST_VERSION_VALUE, true);\r\n\r\n  $scope.onFacetSettingsChanged = function () {\r\n    $scope.fileSelector.query = QueryBuilder.build({\r\n      node: $scope.groupNode,\r\n      template: QueryTemplates.DEFAULT_FILE_TEMPLATE,\r\n      resourceBaseUrl: DATABUS_RESOURCE_BASE_URL\r\n    });\r\n\r\n    $scope.fileSelector.fullQuery = QueryBuilder.build({\r\n      node: $scope.groupNode,\r\n      template: QueryTemplates.GROUP_PAGE_FILE_BROWSER_TEMPLATE,\r\n      resourceBaseUrl: DATABUS_RESOURCE_BASE_URL\r\n    });\r\n  }\r\n\r\n  // $scope.onFacetSettingsChanged();\r\n\r\n  $scope.collectionWidgetSelectionData = {};\r\n  $scope.collectionWidgetSelectionData.groupNode = $scope.groupNode;\r\n\r\n  $scope.onFileQueryResult = function (args) {\r\n    if (args == null) return;\r\n    $scope.collectionWidgetSelectionData.query = args.query;\r\n  }\r\n\r\n  $scope.collectionManager = collectionManager;\r\n\r\n  $scope.findArtifact = function (uri) {\r\n    return $scope.artifacts.find(function (a) { a.uri === uri; });\r\n  }\r\n\r\n  $scope.formatResult = function (result) {\r\n    return $sce.trustAsHtml(result);\r\n  }\r\n\r\n\r\n  $scope.formatLicense = function (licenseUri) {\r\n    var licenseName = DatabusUtils.uriToName(licenseUri);\r\n\r\n    var html = '<div class=\"license-icon\">' + licenseName + '</div>'\r\n    return $sce.trustAsHtml(html);\r\n  }\r\n\r\n  for (var a in $scope.artifacts) {\r\n    $scope.artifacts[a].date = $scope.formatDate($scope.artifacts[a].date);\r\n    $scope.artifacts[a].licenseTag = $scope.formatLicense($scope.artifacts[a].license);\r\n  }\r\n\r\n  $scope.setSelectionStateAll = function (val) {\r\n    if (val) {\r\n      for (var a in $scope.artifacts) {\r\n        $scope.select($scope.artifacts[a]);\r\n      }\r\n    } else {\r\n      for (var a in $scope.artifacts) {\r\n        $scope.deselect($scope.artifacts[a]);\r\n      }\r\n    }\r\n  }\r\n\r\n  $scope.toggleSelect = function (artifact) {\r\n    if ($scope.isSelected(artifact)) {\r\n      $scope.deselect(artifact);\r\n    } else {\r\n      $scope.select(artifact);\r\n    }\r\n  }\r\n\r\n  $scope.select = function (artifact) {\r\n    artifact.isSelected = true;\r\n    $scope.selection.push(artifact.uri);\r\n  }\r\n\r\n  $scope.deselect = function (artifact) {\r\n    artifact.isSelected = false;\r\n    $scope.selection = $scope.selection.filter(function (value, index, arr) {\r\n      return value !== artifact.uri;\r\n    });\r\n  }\r\n\r\n  $scope.isSelected = function (artifact) {\r\n    for (var s in $scope.selection) {\r\n      if ($scope.selection[s] === artifact.uri) {\r\n        return true;\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n\r\n  $scope.changeCollection = function (collection) {\r\n    $scope.collectionManager.setActive(collection.uuid);\r\n    $scope.search();\r\n  }\r\n\r\n  $scope.showCollectionModal = function () {\r\n    $('#add-to-collection-modal').addClass('is-active');\r\n  }\r\n\r\n  $scope.hideCollectionModal = function () {\r\n    $('#add-to-collection-modal').removeClass('is-active');\r\n  }\r\n\r\n  $scope.markdownToHtml = function (markdown) {\r\n\r\n    var converter = window.markdownit();\r\n    return $sce.trustAsHtml(converter.render(markdown));\r\n  };\r\n\r\n\r\n  $scope.invokeSearch = function () {\r\n    if ($scope.searchReady) {\r\n      $scope.search();\r\n      $scope.searchReady = false;\r\n    } else {\r\n      $scope.searchChanged = true;\r\n    }\r\n  }\r\n\r\n  $interval(function () {\r\n    if ($scope.searchChanged) {\r\n      $scope.search();\r\n      $scope.searchChanged = false;\r\n    }\r\n    $scope.searchReady = true;\r\n  }, $scope.searchCooldown);\r\n\r\n\r\n  $scope.addSelectionToCollection = function () {\r\n\r\n    if ($scope.collectionManager.activeCollection == null) {\r\n      return;\r\n    }\r\n\r\n    var wrapper = new DatabusCollectionWrapper($scope.collectionManager.activeCollection);\r\n\r\n    for (var s in $scope.selection) {\r\n      var artifact = $scope.artifacts.find(function (a) { return a.uri === $scope.selection[s]; });\r\n      wrapper.addArtifactNode(artifact.uri, artifact.label);\r\n    }\r\n    $scope.collectionManager.saveLocally();\r\n    $scope.search();\r\n  }\r\n\r\n  $scope.updateArtifactState = function (wrapper, artifact) {\r\n    artifact.alreadyAdded = wrapper.hasArtifact(artifact.uri);\r\n    artifact.isSelected = artifact.alreadyAdded || $scope.selection.includes(artifact.uri);\r\n  }\r\n\r\n\r\n\r\n  $scope.search = function () {\r\n\r\n    $scope.searchResult = [];\r\n\r\n    var typeFilters = `&publisher=${$scope.accountName}&publisherWeight=0&typeName=Artifact&typeNameWeight=0&group=${$scope.group.name}&minRelevance=0.1`;\r\n\r\n    $http({\r\n      method: 'GET',\r\n      url: '/api/search?query=' + $scope.input.search + typeFilters\r\n    }).then(function successCallback(response) {\r\n\r\n      for (var r in response.data.docs) {\r\n        var result = response.data.docs[r];\r\n\r\n        for (var artifact of $scope.artifacts) {\r\n          if (result.id[0] == artifact.uri) {\r\n            $scope.searchResult.push(artifact);\r\n          }\r\n        }\r\n      }\r\n    }, function errorCallback(response) {\r\n    });\r\n  }\r\n}\r\n\r\nmodule.exports = GroupPageController;\n\n//# sourceURL=webpack://databus-webapp/./js/page-controller/group-controller.js?");

/***/ }),

/***/ "./js/page-controller/header-controller.js":
/*!*************************************************!*\
  !*** ./js/page-controller/header-controller.js ***!
  \*************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("var DatabusWebappUtils = __webpack_require__(/*! ../utils/databus-webapp-utils */ \"./js/utils/databus-webapp-utils.js\");\r\n\r\n// Controller for the header section\r\nfunction HeaderController($scope, $http, collectionManager, searchManager) {\r\n\r\n  $scope.auth = data.auth;\r\n  $scope.authenticated = data.auth.authenticated;\r\n\r\n  $scope.utils = new DatabusWebappUtils($scope);\r\n  $scope.accountName = $scope.utils.getAccountName();\r\n  \r\n\r\n  // Check for cookie settings\r\n  $scope.databusCookieConsentKey = 'databus_cookie_consent';\r\n  let cookieConsent = window.localStorage.getItem($scope.databusCookieConsentKey);\r\n  $scope.showCookieDialogue = cookieConsent === undefined;\r\n\r\n  $scope.collectionManager = collectionManager;\r\n\r\n  if ($scope.authenticated) {\r\n\r\n    $scope.collectionManager.tryInitialize($scope.accountName);\r\n    // Collection Manager Init\r\n    // Initialize search manager\r\n    searchManager.initialize();\r\n  } else {\r\n    $scope.collectionManager.clearSession();\r\n  }\r\n\r\n  $scope.hideAccountMenu = function() {\r\n    $scope.isAccountMenuActive = false;\r\n  }\r\n\r\n  $scope.showAccountMenu = function() {\r\n    $scope.isAccountMenuActive = true;\r\n  }\r\n\r\n  // Finds a display name for the account\r\n  $scope.getAccountName = function () {\r\n    if ($scope.auth.info.accountName) {\r\n      return $scope.auth.info.accountName;\r\n    }\r\n\r\n    if ($scope.auth.info.oidc_email) {\r\n      return $scope.auth.info.oidc_email;\r\n    }\r\n\r\n    if ($scope.auth.info.oidc_name) {\r\n      return $scope.auth.info.oidc_name;\r\n    }\r\n\r\n    return null;\r\n  }\r\n\r\n  $scope.isMenuActive = false;\r\n  $scope.isAccountMenuActive = false;\r\n\r\n  // Coookieees\r\n  $scope.giveCookieConsent = function () {\r\n    window.localStorage.setItem($scope.databusCookieConsentKey, true);\r\n    $scope.showCookieDialogue = false;\r\n  }\r\n\r\n  // Login function\r\n  $scope.login = function () {\r\n    window.location = '/app/login?redirectUrl=' + encodeURIComponent(window.location);\r\n  }\r\n\r\n  // Logout function\r\n  $scope.logout = function () {\r\n    $scope.hideAccountMenu();\r\n    window.location = '/app/logout?redirectUrl=' + encodeURIComponent(window.location);\r\n  }\r\n\r\n  // ???\r\n  $scope.size = function () {\r\n    if ($scope.collectionManager == null) {\r\n      return \"\";\r\n    }\r\n\r\n    var first = $scope.collectionManager.current;\r\n    return first != null ? first.elements.length : \"\";\r\n  }\r\n}\r\n\r\nmodule.exports = HeaderController;\r\n\n\n//# sourceURL=webpack://databus-webapp/./js/page-controller/header-controller.js?");

/***/ }),

/***/ "./js/page-controller/profile-controller.js":
/*!**************************************************!*\
  !*** ./js/page-controller/profile-controller.js ***!
  \**************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("const DatabusUtils = __webpack_require__(/*! ../utils/databus-utils */ \"./js/utils/databus-utils.js\");\r\nconst DatabusWebappUtils = __webpack_require__(/*! ../utils/databus-webapp-utils */ \"./js/utils/databus-webapp-utils.js\");\r\nconst DatabusAlert = __webpack_require__(/*! ../components/databus-alert/databus-alert */ \"./js/components/databus-alert/databus-alert.js\");\r\nconst SearchAdapter = __webpack_require__(/*! ../search/search-adapter */ \"./js/search/search-adapter.js\");\r\nconst DatabusMessages = __webpack_require__(/*! ../utils/databus-messages */ \"./js/utils/databus-messages.js\");\r\nconst DatabusConstants = __webpack_require__(/*! ../utils/databus-constants */ \"./js/utils/databus-constants.js\");\r\nconst AppJsonFormatter = __webpack_require__(/*! ../utils/app-json-formatter */ \"./js/utils/app-json-formatter.js\");\r\n\r\nfunction ProfileController($scope, $http) {\r\n\r\n  $scope.account = data.account;\r\n  $scope.auth = data.auth;\r\n\r\n  if (data.owner != null) {\r\n    $scope.account.apiKeys = data.owner.apiKeys;\r\n  }\r\n  $scope.auth = data.auth;\r\n  $scope.preferredDatabusUsername = \"\";\r\n  $scope.createApiKeyName = \"\"\r\n  $scope.createAccountError = \"\";\r\n  $scope.createApiKeyError = \"\";\r\n  $scope.addWebIdUri = \"\";\r\n  $scope.grantAccessUri = \"\";\r\n  $scope.adapters = SearchAdapter.list;\r\n  $scope.utils = new DatabusWebappUtils($scope);\r\n\r\n  $scope.accountName = $scope.utils.getAccountName();\r\n\r\n  $scope.personUri = `${DATABUS_RESOURCE_BASE_URL}/${$scope.accountName}${DatabusConstants.WEBID_THIS}`;\r\n\r\n  $scope.putProfile = function (accountName) {\r\n\r\n    var accountUri = `${DATABUS_RESOURCE_BASE_URL}/${accountName}`;\r\n    var accountJsonLd = AppJsonFormatter.createAccountData(\r\n      accountUri,\r\n      accountName,\r\n      null,\r\n      null);\r\n\r\n    $http.post(`/api/register`, accountJsonLd).then(function (result) {\r\n      window.location.reload(true);\r\n    }, function (err) {\r\n      console.log(err);\r\n      $scope.createAccountError = err.data;\r\n    });\r\n  }\r\n\r\n\r\n  if ($scope.account == undefined) {\r\n\r\n    $scope.createProfile = function () {\r\n\r\n      if ($scope.isSubmitting) {\r\n        return;\r\n      }\r\n\r\n      $scope.isSubmitting = true;\r\n\r\n      if (!$scope.auth.authenticated) {\r\n        return;\r\n      }\r\n\r\n      var accountName = $scope.preferredDatabusUsername;\r\n\r\n      if (accountName == undefined || !DatabusUtils.isValidAccountName(accountName)) {\r\n        $scope.createAccountError = \"Enter a valid account name.\"\r\n        $scope.showAccountNameHints = true;\r\n        return;\r\n      }\r\n\r\n      $scope.showAccountNameHints = false;\r\n      $scope.putProfile(accountName);\r\n    }\r\n\r\n    return;\r\n  }\r\n\r\n  $scope.addApiKey = async function () {\r\n    // Validate the name input only\r\n\r\n    if (!$scope.createApiKeyName) {\r\n      DatabusAlert.alert(\"API key name must be provided.\");\r\n      return;\r\n    }\r\n\r\n    let account = $scope.account;\r\n\r\n    const postData = {\r\n      accountName: account.accountName,\r\n      name: $scope.createApiKeyName\r\n    };\r\n\r\n    try {\r\n      // Send POST request to create the API key\r\n      let response = await $http.post('/api/account/api-key/create', postData);\r\n\r\n      if (response.data && response.data.apikey && response.data.keyname) {\r\n        // Append new key to the list\r\n        account.apiKeys.push({\r\n          keyname: response.data.keyname,\r\n          apikey: response.data.apikey\r\n        });\r\n\r\n        // Clear the name input field\r\n        $scope.createApiKeyName = '';\r\n\r\n        DatabusAlert.alert($scope, true, \"API key created.\");\r\n      } else {\r\n        DatabusAlert.alert($scope, false, \"Failed to create API key.\");\r\n      }\r\n\r\n    } catch (error) {\r\n      console.error('Error creating API key:', error);\r\n      const message = error.data || error.message || \"Unknown error occurred.\";\r\n      DatabusAlert.alert($scope, false, message);\r\n    }\r\n  };\r\n\r\n\r\n  $scope.deleteApiKey = async function (apiKey) {\r\n    try {\r\n\r\n      let account = $scope.account;\r\n      // Find index of the account using accountName\r\n      const index = account.apiKeys.findIndex(key => key.keyname === apiKey.keyname);\r\n\r\n      if (index === -1) {\r\n        throw new Error(`API key with name \"${apiKey.keyname}\" not found.`);\r\n      }\r\n\r\n      console.log(\"Deleting API key with keyname:\", apiKey.keyname);\r\n\r\n      // Send delete request to server\r\n      await $http.post(`/api/account/api-key/delete`, { accountName: account.accountName, keyname: apiKey.keyname });\r\n      account.apiKeys.splice(index, 1);\r\n\r\n      // Show success alert\r\n      DatabusAlert.alert($scope, true, \"API key deleted.\");\r\n\r\n    } catch (err) {\r\n      console.error(err);\r\n\r\n\r\n\r\n      const message = err.data || err.message || \"Unknown error occurred.\";\r\n      DatabusAlert.alert($scope, false, message);\r\n    }\r\n  };\r\n\r\n  $scope.addSecretary = function (account) {\r\n    if (!account.secretaries) {\r\n      account.secretaries = [];\r\n    }\r\n\r\n    account.secretaries.push({\r\n      accountName: '',\r\n      hasWriteAccessTo: []\r\n    });\r\n  };\r\n\r\n  $scope.removeSecretary = function (account, index) {\r\n    account.secretaries.splice(index, 1);\r\n  };\r\n\r\n  $scope.addNamespace = function (account, secIndex) {\r\n    account.secretaries[secIndex].hasWriteAccessTo.push('');\r\n  };\r\n\r\n  $scope.removeNamespace = function (account, secIndex, nsIndex) {\r\n    account.secretaries[secIndex].hasWriteAccessTo.splice(nsIndex, 1);\r\n  };\r\n\r\n\r\n  $scope.onCreateApiKeyNameChanged = function () {\r\n    var hasError = !DatabusUtils.isValidResourceLabel($scope.createApiKeyName, 3, 20);\r\n    $scope.createApiKeyError = hasError ? \" API key name must have between 3 and 20 characters and match [A-Za-z0-9\\\\s_()\\\\.\\\\,\\\\-]*\" : \"\";\r\n  }\r\n\r\n  /*\r\n   $scope.removeApiKey = function (key) {\r\n \r\n     $http.post(`/api/account/api-key/delete?name=${key.keyname}`).then(function (result) {\r\n       $scope.apiKeys = $scope.apiKeys.filter(function (k) {\r\n         return k.keyname != key.keyname;\r\n       });\r\n \r\n     }, function (err) {\r\n       console.log(err);\r\n       $scope.createApiKeyError = err.data;\r\n     });\r\n   }\r\n \r\n \r\n   $scope.addApiKey = function () {\r\n \r\n     $http.post(`/api/account/api-key/create?name=${encodeURIComponent($scope.createApiKeyName)}`).then(function (result) {\r\n \r\n       if (result.data != null) {\r\n         $scope.apiKeys.push(result.data);\r\n       }\r\n \r\n       DatabusAlert.alert($scope, true, DatabusMessages.ACCOUNT_API_KEY_CREATED);\r\n \r\n     }, function (err) {\r\n       console.log(err);\r\n       $scope.createApiKeyError = err.data;\r\n     });\r\n \r\n   }*/\r\n\r\n  $scope.removeSearchExtension = function (uri) {\r\n    $http.post(`/api/account/mods/search-extensions/remove?uri=${encodeURIComponent(uri)}`)\r\n      .then(function (result) {\r\n        console.log(result);\r\n        DatabusAlert.alert($scope, true, result.data);\r\n\r\n        $scope.account.searchExtensions = $scope.account.searchExtensions.filter(function (e) {\r\n          return e.endpointUri != uri;\r\n        });\r\n\r\n      }, function (err) {\r\n        console.log(err);\r\n        DatabusAlert.alert($scope, false, err.data);\r\n      });\r\n  }\r\n\r\n  $scope.addSearchExtension = function () {\r\n    var uri = $scope.modsSettings.searchExtensionURI;\r\n    var adapter = $scope.modsSettings.searchExtensionAdapter.name;\r\n\r\n    $http.post(`/api/account/mods/search-extensions/add?uri=${encodeURIComponent(uri)}&adapter=${adapter}`)\r\n      .then(function (result) {\r\n        console.log(result);\r\n        DatabusAlert.alert($scope, true, result.data);\r\n        $scope.account.searchExtensions.push({\r\n          endpointUri: uri,\r\n          adapter: adapter\r\n        });\r\n      }, function (err) {\r\n        console.log(err);\r\n        DatabusAlert.alert($scope, false, err.data);\r\n      });\r\n  }\r\n\r\n  $scope.grantAccess = function () {\r\n    $http.post(`/api/account/access/grant?uri=${encodeURIComponent($scope.grantAccessUri)}`).then(function (result) {\r\n      $scope.account.authorizedAccounts.push($scope.grantAccessUri);\r\n    }, function (err) {\r\n      console.log(err);\r\n      $scope.grantAccessError = err.data;\r\n    });\r\n  }\r\n\r\n  $scope.revokeAccess = function (uri) {\r\n    $http.post(`/api/account/access/revoke?uri=${encodeURIComponent(uri)}`).then(function (result) {\r\n      $scope.account.authorizedAccounts = $scope.account.webIds.filter(function (value, index, arr) {\r\n        return value != uri;\r\n      });\r\n    }, function (err) {\r\n      console.log(err);\r\n      $scope.grantAccessError = err.data;\r\n    });\r\n  }\r\n\r\n  $scope.connectWebid = function () {\r\n\r\n    $http.post(`/api/account/webid/add?uri=${encodeURIComponent($scope.addWebIdUri)}`).then(function (result) {\r\n      $scope.account.webIds.push($scope.addWebIdUri);\r\n      DatabusAlert.alert($scope, true, DatabusMessages.ACCOUNT_WEBID_LINKED);\r\n\r\n    }, function (err) {\r\n      console.log(err);\r\n      $scope.addWebIdError = err.data;\r\n    });\r\n  }\r\n\r\n  $scope.removeWebId = function (webIdToRemove) {\r\n\r\n    $http.post(`/api/account/webid/remove?uri=${encodeURIComponent(webIdToRemove)}`).then(function (result) {\r\n\r\n      $scope.account.webIds = $scope.account.webIds.filter(function (value, index, arr) {\r\n        return value != webIdToRemove;\r\n      });\r\n\r\n    }, function (err) {\r\n      console.log(err);\r\n      $scope.addWebIdError = err.data;\r\n    });\r\n  }\r\n\r\n  $scope.saveProfile = async function () {\r\n\r\n    if (!$scope.auth.authenticated) {\r\n      return;\r\n    }\r\n\r\n    let account = {};\r\n    account.uri = $scope.editData.uri;\r\n\r\n    account.accountName =  $scope.editData.accountName;\r\n    account.label = $scope.editData.label;\r\n    account.status = $scope.editData.about;\r\n    account.imageUrl = $scope.editData.imageUrl;\r\n    account.secretaries = [];\r\n\r\n\r\n    try {\r\n      await $http.post(`/api/account/update`, account);\r\n      DatabusAlert.alert($scope, true, \"Account saved.\");\r\n\r\n    } catch (err) {\r\n      console.error(err);\r\n      DatabusAlert.alert($scope, false, err.data);\r\n    }\r\n  }\r\n\r\n\r\n  // We have profile data in $scope.account!\r\n\r\n  if (!$scope.account.isOwn) {\r\n    return;\r\n  }\r\n\r\n  $scope.modsSettings = {}\r\n  $scope.modsSettings.searchExtensionURI = \"\";\r\n  $scope.modsSettings.searchExtensionAdapter = $scope.adapters[0];\r\n\r\n\r\n  $scope.editData = DatabusUtils.createCleanCopy($scope.account);\r\n\r\n  $scope.resetEdits = function () {\r\n    $scope.editData = DatabusUtils.createCleanCopy($scope.account);\r\n  }\r\n\r\n}\r\n\r\nmodule.exports = ProfileController;\n\n//# sourceURL=webpack://databus-webapp/./js/page-controller/profile-controller.js?");

/***/ }),

/***/ "./js/page-controller/publish-wizard-controller.js":
/*!*********************************************************!*\
  !*** ./js/page-controller/publish-wizard-controller.js ***!
  \*********************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("const DatabusWebappUtils = __webpack_require__(/*! ../utils/databus-webapp-utils */ \"./js/utils/databus-webapp-utils.js\");\r\nconst PublishSession = __webpack_require__(/*! ../publish/publish-session */ \"./js/publish/publish-session.js\");\r\nconst TabNavigation = __webpack_require__(/*! ../utils/tab-navigation */ \"./js/utils/tab-navigation.js\");\r\n\r\n// Controller for the header section\r\nasync function PublishWizardController($scope, $http, $interval, focus, $q, $location) {\r\n\r\n  $scope.login = function () {\r\n    window.location = '/app/login?redirectUrl=' + encodeURIComponent(window.location);\r\n  }\r\n\r\n  $scope.utils = new DatabusWebappUtils($scope);\r\n\r\n  $scope.tabNavigation = new TabNavigation($scope, $location, [\r\n    '', 'group', 'artifact', 'version'\r\n  ]);\r\n\r\n\r\n  $scope.createAccount = function () {\r\n    window.location = '/app/account';\r\n  }\r\n\r\n  // Login function\r\n  $scope.login = function () {\r\n    window.location = '/app/login?redirectUrl=' + encodeURIComponent(window.location);\r\n  }\r\n\r\n  $scope.authenticated = data.auth.authenticated;\r\n  $scope.loadRequestCount = 0;\r\n  $scope.texts = data.texts;\r\n\r\n  $scope.nerdMode = {};\r\n  $scope.nerdMode.enabled = false;\r\n  $scope.nerdMode.customJson = \"\";\r\n  $scope.nerdMode.logLevelOptions = ['error', 'info', 'debug'];\r\n  $scope.nerdMode.logLevel = 'error';\r\n\r\n  // controller does not work without authentication\r\n  if (!$scope.authenticated) {\r\n    return;\r\n  }\r\n\r\n  let accounts = data.auth.info.accounts;\r\n  $scope.hasAccount = accounts != undefined && accounts.length > 0;\r\n\r\n  $scope.accounts = [];\r\n\r\n  for(let account of accounts) {\r\n    $scope.accounts.push({\r\n      accountName: account.accountName,\r\n      apiKeys: account.apiKeys\r\n    });\r\n  }\r\n\r\n  if (!$scope.hasAccount) {\r\n    return;\r\n  }\r\n\r\n  // $scope.session = await PublishSession.createOrResume($http, data.auth.sub, $scope.accounts);\r\n\r\n  $scope.session = new PublishSession($http, $interval, $scope.accounts, $scope.apiKeys);\r\n\r\n}\r\n  /**\r\n   * Fetches existing groups and artifacts\r\n  \r\n  $scope.getContentForAccount = async function (accountName) {\r\n\r\n    $scope.isAccountDataLoading = true;\r\n    var uri = `/app/account/content?account=${encodeURIComponent(accountName)}`;\r\n    var response = await $http.get(uri);\r\n    $scope.isAccountDataLoading = false;\r\n\r\n    // Put account artifacts, groups and name in one object\r\n    var accountData = response.data;\r\n    accountData.accountName = accountName;\r\n\r\n    accountData.publisherUris = [];\r\n    for (var p of data.publisherData) {\r\n      accountData.publisherUris.push(p.publisherUri);\r\n    }\r\n\r\n    $scope.session = new PublishSession($http);\r\n\r\n    /*\r\n    $scope.$watch('session', function () {\r\n      $scope.session.onChange();\r\n    }, true);\r\n\r\n    $scope.$apply();\r\n   \r\n  }\r\n\r\n  // $scope.getContentForAccount(data.auth.info.accounts[0]);\r\n\r\n  /**\r\n   * LICENSES\r\n  \r\n\r\n  \r\n\r\n  $scope.addFile = function (input) {\r\n\r\n    var session = $scope.session;\r\n\r\n    if (input == undefined || input.length == 0) {\r\n      return;\r\n    }\r\n\r\n    $scope.loadRequestCount++;\r\n\r\n    $http.get('/app/publish-wizard/fetch-file?url=' + encodeURIComponent(input)).then(function (response) {\r\n\r\n      $scope.loadRequestCount--;\r\n      if (response.data == null || response.data == \"\" || response.status != 200) {\r\n        return;\r\n      }\r\n\r\n      session.addFile(response.data);\r\n\r\n    }, function (err) { });\r\n  }\r\n\r\n  $scope.objSize = function (obj) {\r\n    return DatabusUtils.objSize(obj);\r\n  }\r\n\r\n  $scope.removeFile = function (fileGroup) {\r\n    var files = $scope.session.formData.version.files;\r\n    files.splice(files.findIndex(f => f.uri == fileGroup.uri), 1);\r\n    $scope.session.formData.version.isConfigDirty = true;\r\n  }\r\n\r\n  $scope.hasError = function (errorList, error) {\r\n    return errorList.includes(error);\r\n  }\r\n\r\n  // Fetch links using the fetch-links API of the Databus\r\n  $scope.fetchFiles = function (parentUri) {\r\n\r\n    $http.get('/app/publish-wizard/fetch-resource-page?url=' + encodeURIComponent(parentUri)).then(function (response) {\r\n      for (var i in response.data) {\r\n        var uri = response.data[i];\r\n        $scope.addFile(uri);\r\n      }\r\n    }, function (err) {\r\n    });\r\n  }\r\n\r\n  $scope.addFiles = function (input) {\r\n    var lines = input.split('\\n');\r\n\r\n    for (var line of lines) {\r\n      if (line != undefined && line.length > 0) {\r\n        $scope.addFile(line);\r\n      }\r\n    }\r\n  }\r\n\r\n  $scope.createTractate = function () {\r\n    $scope.creatingTractate = true;\r\n    $http.post('/api/tractate/v1/canonicalize', $scope.session.inputs.dataid).then(function (response) {\r\n      $scope.session.formData.signature.tractate = response.data;\r\n      $scope.creatingTractate = false;\r\n    }, function (err) {\r\n      $scope.creatingTractate = false;\r\n      console.log(err);\r\n    });\r\n  }\r\n\r\n\r\n  $scope.customPublish = async function () {\r\n    var options = {}\r\n    options.headers = {\r\n      'Accept': 'application/json, text/plain',\r\n      'Content-Type': 'application/json',\r\n    }\r\n\r\n\r\n    $scope.isPublishing = true;\r\n    $http.post(`/api/publish?fetch-file-properties=true&log-level=${$scope.nerdMode.logLevel}`, $scope.nerdMode.customJson, options)\r\n      .then(function (response) {\r\n        $scope.publishLog = response.data.log;\r\n        $scope.isPublishing = false;\r\n      }, function (err) {\r\n        $scope.publishLog = err.data.log;\r\n        $scope.isPublishing = false;\r\n        console.log(err);\r\n      });\r\n  }\r\n\r\n\r\n  $scope.publish = async function () {\r\n    var options = {}\r\n    options.headers = {\r\n      'Accept': 'application/json, text/plain',\r\n      'Content-Type': 'application/json',\r\n    }\r\n\r\n    $scope.isPublishing = true;\r\n    $http.post('/api/publish?fetch-file-properties=true&log-level=info', $scope.session.inputs.all, options)\r\n      .then(function (response) {\r\n        $scope.publishLog = response.data.log;\r\n        $scope.isPublishing = false;\r\n      }, function (err) {\r\n        $scope.publishLog = err.data.log;\r\n        $scope.isPublishing = false;\r\n        console.log(err);\r\n      });\r\n  } */\r\n\r\n\r\n\r\n\r\nmodule.exports = PublishWizardController;\n\n//# sourceURL=webpack://databus-webapp/./js/page-controller/publish-wizard-controller.js?");

/***/ }),

/***/ "./js/page-controller/sparql-editor-controller.js":
/*!********************************************************!*\
  !*** ./js/page-controller/sparql-editor-controller.js ***!
  \********************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("var DatabusWebappUtils = __webpack_require__(/*! ../utils/databus-webapp-utils */ \"./js/utils/databus-webapp-utils.js\");\r\nconst SparqlExamples = __webpack_require__(/*! ../utils/sparql-examples */ \"./js/utils/sparql-examples.js\");\r\n\r\n// Controller for the header section\r\nfunction SparqlEditorController($scope, $http, $location) {\r\n\r\n\r\n  $scope.storageKey = `${DATABUS_RESOURCE_BASE_URL}/sparql`;\r\n\r\n  $scope.auth = data.auth;\r\n  $scope.authenticated = data.auth.authenticated;\r\n  $scope.utils = new DatabusWebappUtils($scope);\r\n\r\n\r\n  $scope.editor = {};\r\n\r\n\r\n\r\n  $scope.$on('$locationChangeSuccess', function () {\r\n    var hash = $location.hash();\r\n\r\n    if (hash && hash.startsWith('query')) {\r\n      var tabIndex = parseInt(hash.replace('query', '')) - 1;\r\n\r\n      // Only change if the tab exists and is different from current\r\n      if (!isNaN(tabIndex) &&\r\n        tabIndex >= 0 &&\r\n        tabIndex < $scope.queryData.pages.length &&\r\n        $scope.queryData.activeTab !== tabIndex) {\r\n        $scope.goToTab(tabIndex);\r\n        $scope.$applyAsync();\r\n      }\r\n    }\r\n  });\r\n\r\n  $scope.editor.exampleQueries = {};\r\n  $scope.editor.exampleQueries.label = \"Databus Example Queries\";\r\n  $scope.editor.exampleQueries.children = [];\r\n\r\n  var simpleQueries = {\r\n    label: \"Simple Queries\",\r\n    children: []\r\n  };\r\n\r\n  var intermediateQueries = {\r\n    label: \"Intermediate Queries\",\r\n    children: []\r\n  };\r\n\r\n  simpleQueries.children.push({\r\n    label: \"Select all Databus Groups\",\r\n    query: `PREFIX databus: <https://dataid.dbpedia.org/databus#>\r\nPREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>\r\nPREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\r\nPREFIX dct: <http://purl.org/dc/terms/>\r\nPREFIX dcat: <http://www.w3.org/ns/dcat#>\r\nPREFIX sec: <https://w3id.org/security#>\r\nPREFIX cert: <http://www.w3.org/ns/auth/cert#>\r\nPREFIX foaf: <http://xmlns.com/foaf/0.1/>\r\nPREFIX databus-cv: <https://dataid.dbpedia.org/databus-cv#>\r\nPREFIX dbo: <http://dbpedia.org/ontology/>\r\n\r\nSELECT DISTINCT * WHERE {\r\n  ?s a databus:Group .\r\n}`\r\n  });\r\n\r\n  simpleQueries.children.push({\r\n    label: \"Select all Databus Artifacts\",\r\n    query: `PREFIX databus: <https://dataid.dbpedia.org/databus#>\r\nPREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>\r\nPREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\r\nPREFIX dct: <http://purl.org/dc/terms/>\r\nPREFIX dcat: <http://www.w3.org/ns/dcat#>\r\nPREFIX sec: <https://w3id.org/security#>\r\nPREFIX cert: <http://www.w3.org/ns/auth/cert#>\r\nPREFIX foaf: <http://xmlns.com/foaf/0.1/>\r\nPREFIX databus-cv: <https://dataid.dbpedia.org/databus-cv#>\r\nPREFIX dbo: <http://dbpedia.org/ontology/>\r\n\r\nSELECT DISTINCT * WHERE {\r\n  ?s a databus:Artifact .\r\n}`\r\n  });\r\n\r\n  simpleQueries.children.push({\r\n    label: \"Select all Databus Versions\",\r\n    query: `PREFIX databus: <https://dataid.dbpedia.org/databus#>\r\nPREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>\r\nPREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\r\nPREFIX dct: <http://purl.org/dc/terms/>\r\nPREFIX dcat: <http://www.w3.org/ns/dcat#>\r\nPREFIX sec: <https://w3id.org/security#>\r\nPREFIX cert: <http://www.w3.org/ns/auth/cert#>\r\nPREFIX foaf: <http://xmlns.com/foaf/0.1/>\r\nPREFIX databus-cv: <https://dataid.dbpedia.org/databus-cv#>\r\nPREFIX dbo: <http://dbpedia.org/ontology/>\r\n\r\nSELECT DISTINCT * WHERE {\r\n  ?s a databus:Version .\r\n}`\r\n  });\r\n\r\n  intermediateQueries.children.push({\r\n    label: \"Latest Version of Artifact\",\r\n    query: `PREFIX databus: <https://dataid.dbpedia.org/databus#>\r\nPREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>\r\nPREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\r\nPREFIX dct: <http://purl.org/dc/terms/>\r\nPREFIX dcat: <http://www.w3.org/ns/dcat#>\r\nPREFIX sec: <https://w3id.org/security#>\r\nPREFIX cert: <http://www.w3.org/ns/auth/cert#>\r\nPREFIX foaf: <http://xmlns.com/foaf/0.1/>\r\nPREFIX databus-cv: <https://dataid.dbpedia.org/databus-cv#>\r\nPREFIX dbo: <http://dbpedia.org/ontology/>\r\n\r\nSELECT ?version WHERE\r\n{\r\n  GRAPH ?g\r\n  {\r\n    ?version databus:artifact <INSERT_ARTIFACT_URI_HERE> .\r\n    ?version dct:hasVersion ?v . \r\n  }\r\n} \r\nORDER BY DESC (STR(?v)) LIMIT 1`\r\n  });\r\n\r\n\r\n  $scope.editor.exampleQueries.children.push(simpleQueries);\r\n  $scope.editor.exampleQueries.children.push(intermediateQueries);\r\n\r\n  $scope.onExampleQueryClicked = function (node) {\r\n\r\n    if (node.query == null) {\r\n      return;\r\n    }\r\n\r\n    $scope.createQueryPage();\r\n\r\n    var queryPage = $scope.queryData.pages[$scope.queryData.activeTab];\r\n\r\n    queryPage.query = node.query;\r\n    $scope.saveToStorage();\r\n  }\r\n\r\n  $scope.goToTab = function (index) {\r\n    $scope.queryData.activeTab = index;\r\n    $scope.saveToStorage();\r\n\r\n    $location.hash(`query${index + 1}`);\r\n\r\n\r\n    var queryPage = $scope.queryData.pages[$scope.queryData.activeTab];\r\n\r\n    if ($scope.resultCache != null && $scope.resultCache[queryPage.name] != null) {\r\n      $scope.editor.result = $scope.resultCache[queryPage.name];\r\n    } else {\r\n      $scope.editor.result = null;\r\n    }\r\n  }\r\n\r\n  $scope.saveToStorage = function () {\r\n    localStorage.setItem($scope.storageKey, JSON.stringify($scope.queryData));\r\n  }\r\n\r\n  $scope.deleteQueryPage = function ($index) {\r\n\r\n    // Delete result cache entry\r\n    var queryPage = $scope.queryData.pages[$scope.queryData.activeTab];\r\n    if ($scope.resultCache != null && $scope.resultCache[queryPage.name] != null) {\r\n      delete $scope.resultCache[queryPage.name];\r\n      $scope.saveResultCache();\r\n    }\r\n\r\n    $scope.queryData.pages.splice($index, 1);\r\n\r\n    if ($scope.queryData.pages.length == 0) {\r\n      $scope.initialize();\r\n    }\r\n    else {\r\n      var validTab = Math.min($scope.queryData.activeTab, $scope.queryData.pages.length - 1);\r\n\r\n      if (validTab != $scope.queryData.activeTab) {\r\n        $scope.goToTab(validTab);\r\n      }\r\n    }\r\n  }\r\n\r\n  $scope.createQueryPage = function () {\r\n\r\n    var queryName = null;\r\n    var queryNameIndex = 1;\r\n\r\n    // find unoccupied name\r\n    while (queryNameIndex < 100000) {\r\n\r\n      // Create a candidate\r\n      var hasName = true;\r\n      queryName = `Query ${queryNameIndex}`;\r\n\r\n      // Check if already in use\r\n      for (var queryPage of $scope.queryData.pages) {\r\n        if (queryPage.name == queryName) {\r\n          hasName = false;\r\n        }\r\n      }\r\n\r\n      // Found name, stop searching.\r\n      if (hasName) {\r\n        break;\r\n      }\r\n\r\n      queryNameIndex++;\r\n    }\r\n\r\n    $scope.queryData.pages.push({\r\n      name: queryName,\r\n      query: simpleQueries.children[0].query,\r\n      endpoint: defaultEndpoint\r\n    });\r\n\r\n    $scope.goToTab($scope.queryData.pages.length - 1);\r\n\r\n    $scope.saveToStorage();\r\n  }\r\n\r\n  $scope.saveResultCache = function () {\r\n    sessionStorage.setItem($scope.storageKey, JSON.stringify($scope.resultCache));\r\n  }\r\n\r\n  $scope.initialize = function () {\r\n    $scope.queryData = {};\r\n    $scope.queryData.activeTab = 0;\r\n    $scope.queryData.pages = [];\r\n    $scope.createQueryPage();\r\n\r\n    $scope.resultCache = {};\r\n    $scope.saveResultCache();\r\n  }\r\n\r\n  var defaultEndpoint = `${DATABUS_RESOURCE_BASE_URL}/sparql`;\r\n\r\n  var queryDataString = localStorage.getItem($scope.storageKey);\r\n  var resultCacheString = sessionStorage.getItem($scope.storageKey);\r\n\r\n\r\n  $scope.queryData = null;\r\n  $scope.resultCache = JSON.parse(resultCacheString);\r\n\r\n  try {\r\n    $scope.queryData = JSON.parse(queryDataString);\r\n\r\n    if ($scope.queryData == null || $scope.queryData.pages.length == 0) {\r\n      $scope.initialize();\r\n    }\r\n\r\n    var queryPage = $scope.queryData.pages[$scope.queryData.activeTab];\r\n\r\n    if ($scope.resultCache != null && $scope.resultCache[queryPage.name] != null) {\r\n      $scope.editor.result = $scope.resultCache[queryPage.name];\r\n    } else {\r\n      $scope.editor.result = null;\r\n    }\r\n\r\n  }\r\n\r\n\r\n  catch (e) {\r\n    // Could not parse query data, create new!\r\n    $scope.initialize();\r\n  }\r\n\r\n  var initialHash = $location.hash();\r\n  if (initialHash && initialHash.startsWith('query')) {\r\n    var initialTab = parseInt(initialHash.replace('query', '')) - 1;\r\n    if (!isNaN(initialTab) &&\r\n      initialTab >= 0 &&\r\n      initialTab < $scope.queryData.pages.length) {\r\n      $scope.queryData.activeTab = initialTab;\r\n    }\r\n  }\r\n\r\n  $scope.editor.query = $scope.editor.exampleQueries[0];\r\n\r\n  $scope.send = async function () {\r\n\r\n    var queryPage = $scope.queryData.pages[$scope.queryData.activeTab];\r\n\r\n    try {\r\n\r\n      var res = await $http.post(queryPage.endpoint, { query: queryPage.query });\r\n\r\n      if ($scope.resultCache == null) {\r\n        $scope.resultCache = {};\r\n      }\r\n\r\n      $scope.resultCache[queryPage.name] = res.data;\r\n      $scope.saveResultCache();\r\n\r\n      delete queryPage.err;\r\n      $scope.editor.result = res.data;\r\n    } catch (err) {\r\n      console.log(err);\r\n      queryPage.err = err;\r\n    }\r\n\r\n    $scope.$apply();\r\n  }\r\n\r\n  $scope.insertExampleQuery = function (query) {\r\n    $scope.editor.query = query;\r\n  }\r\n\r\n}\r\n\r\nmodule.exports = SparqlEditorController;\r\n\n\n//# sourceURL=webpack://databus-webapp/./js/page-controller/sparql-editor-controller.js?");

/***/ }),

/***/ "./js/page-controller/user-settings-controller.js":
/*!********************************************************!*\
  !*** ./js/page-controller/user-settings-controller.js ***!
  \********************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("const DatabusAlert = __webpack_require__(/*! ../components/databus-alert/databus-alert */ \"./js/components/databus-alert/databus-alert.js\");\r\nconst DatabusUris = __webpack_require__(/*! ../utils/databus-uris */ \"./js/utils/databus-uris.js\");\r\nconst DatabusUtils = __webpack_require__(/*! ../utils/databus-utils */ \"./js/utils/databus-utils.js\");\r\nconst JsonldUtils = __webpack_require__(/*! ../utils/jsonld-utils */ \"./js/utils/jsonld-utils.js\");\r\nconst TabNavigation = __webpack_require__(/*! ../utils/tab-navigation */ \"./js/utils/tab-navigation.js\");\r\n\r\nfunction UserSettingsController($scope, $http, $sce, $location) {\r\n  $scope.auth = data.auth;\r\n  $scope.accounts = data.accounts;\r\n\r\n  $scope.inputs = {};\r\n\r\n  $scope.inputs.newAccountLabel = \"\";\r\n  $scope.inputs.newAccountName = \"\";\r\n  $scope.inputs.newApiKeyName = \"\";\r\n\r\n  $scope.tabNavigation = new TabNavigation($scope, $location, [\r\n    ''\r\n  ], function (index) {\r\n    $scope.activeAccount = $scope.accounts[index - 1];\r\n  });\r\n\r\n  $scope.$watchCollection('accounts', function (newAccounts) {\r\n    const accountNames = newAccounts.map(a => a.accountName);\r\n    $scope.tabNavigation.tabKeys = [''].concat(accountNames);\r\n\r\n    const currentHash = $location.hash();\r\n\r\n    $scope.tabNavigation.onLocationHashChanged(currentHash, currentHash)\r\n\r\n    if (currentHash && !$scope.tabNavigation.tabKeys.includes(currentHash)) {\r\n      $location.hash('');\r\n    }\r\n  });\r\n\r\n  // Iterate over each account and load its data\r\n  $scope.accounts.forEach(function (account) {\r\n    // Set loading state\r\n    account.loading = true;\r\n\r\n    var requestParams = {\r\n      method: 'GET',\r\n      url: '/' + encodeURIComponent(account.accountName),\r\n      headers: {\r\n        'Accept': 'application/ld+json',\r\n        'X-Jsonld-Formatting': 'flatten'\r\n      }\r\n    }\r\n\r\n    // Perform HTTP GET request to fetch additional data\r\n    $http(requestParams)\r\n      .then(function (response) {\r\n        // Set loading to false when data is received\r\n        account.loading = false;\r\n\r\n        // Store additional info (stub)\r\n        var graphs = response.data;\r\n        var personGraph = JsonldUtils.getTypedGraph(graphs, DatabusUris.FOAF_PERSON);\r\n\r\n        account.uri = `${DATABUS_RESOURCE_BASE_URL}/${account.accountName}`;\r\n        account.label =  JsonldUtils.getFirstProperty(personGraph, DatabusUris.FOAF_NAME);\r\n        account.status = JsonldUtils.getFirstProperty(personGraph, DatabusUris.FOAF_STATUS);\r\n        account.imageUrl = JsonldUtils.getProperty(personGraph, DatabusUris.FOAF_IMG);\r\n        account.secretaries = [];\r\n\r\n        let accountGraph = JsonldUtils.getTypedGraph(graphs, DatabusUris.DATABUS_ACCOUNT);\r\n        let secretaryIds = JsonldUtils.getRefArrayProperty(accountGraph, DatabusUris.DATABUS_SECRETARY_PROPERTY);\r\n\r\n        for (let secretaryId of secretaryIds) {\r\n          let secretaryGraph = JsonldUtils.getGraphById(graphs, secretaryId);\r\n\r\n          let secretary = {};\r\n          secretary.accountName = DatabusUtils.uriToName(JsonldUtils.getProperty(secretaryGraph, DatabusUris.DATABUS_ACCOUNT_PROPERTY));\r\n          secretary.hasWriteAccessTo = JsonldUtils.getRefArrayProperty(secretaryGraph, DatabusUris.DATABUS_HAS_WRITE_ACCESS_TO);\r\n\r\n          account.secretaries.push(secretary);\r\n        }\r\n\r\n      })\r\n      .catch(function (error) {\r\n        // Handle error and set loading to false\r\n        account.loading = false;\r\n        console.error('Failed to load account data for', account.name, error);\r\n      });\r\n  });\r\n\r\n  // Button click handler to add account\r\n  $scope.addAccount = async function () {\r\n\r\n    try {\r\n\r\n      await $http.post(`/api/account/create`, {\r\n        name: $scope.inputs.newAccountName,\r\n        label: $scope.inputs.newAccountLabel\r\n      });\r\n\r\n      $scope.accounts.push({\r\n        label: $scope.inputs.newAccountLabel,\r\n        accountName: $scope.inputs.newAccountName\r\n      });\r\n\r\n      DatabusAlert.alert($scope, true, \"Account created.\");\r\n\r\n    } catch (err) {\r\n      console.error(err);\r\n      DatabusAlert.alert($scope, false, err.data);\r\n    }\r\n  };\r\n\r\n  // Button click handler to save account\r\n  $scope.saveAccount = async function (account) {\r\n    try {\r\n      await $http.post(`/api/account/update`, account);\r\n      DatabusAlert.alert($scope, true, \"Account saved.\");\r\n\r\n    } catch (err) {\r\n      console.error(err);\r\n      DatabusAlert.alert($scope, false, err.data);\r\n    }\r\n\r\n  };\r\n\r\n  // Button click handler to delete account\r\n  $scope.deleteAccount = async function (account) {\r\n    try {\r\n      // Find index of the account using accountName\r\n      const index = $scope.accounts.findIndex(acc => acc.accountName === account.accountName);\r\n\r\n      if (index === -1) {\r\n        throw new Error(`Account with name \"${account.accountName}\" not found.`);\r\n      }\r\n\r\n      console.log(\"Deleting account with accountName:\", account.accountName);\r\n\r\n      // Send delete request to server\r\n      await $http.post(`/api/account/delete`, account);\r\n\r\n      // Show success alert\r\n      DatabusAlert.alert($scope, true, \"Account deleted.\");\r\n\r\n      // Remove account from local array\r\n      $scope.accounts.splice(index, 1);\r\n\r\n    } catch (err) {\r\n      console.error(err);\r\n      const message = err.data || err.message || \"Unknown error occurred.\";\r\n      DatabusAlert.alert($scope, false, message);\r\n    }\r\n  };\r\n\r\n\r\n\r\n\r\n  $scope.goToUserSettings = function (accountName) {\r\n    window.location.href = '/' + encodeURIComponent(accountName) + '#settings';\r\n  }\r\n\r\n  $scope.addWriteAccessUrl = function (account) {\r\n    account.writeAccess.push('');\r\n  };\r\n\r\n  $scope.removeWriteAccessUrl = function (account, index) {\r\n    account.writeAccess.splice(index, 1);\r\n  };\r\n\r\n  $scope.addApiKey = async function (account) {\r\n    // Validate the name input only\r\n\r\n    if (!$scope.inputs.newApiKeyName) {\r\n      DatabusAlert.alert(\"API key name must be provided.\");\r\n      return;\r\n    }\r\n\r\n    const postData = {\r\n      accountName: account.accountName,\r\n      name: $scope.inputs.newApiKeyName\r\n    };\r\n\r\n    try {\r\n      // Send POST request to create the API key\r\n      let response = await $http.post('/api/account/api-key/create', postData);\r\n\r\n      if (response.data && response.data.apikey && response.data.keyname) {\r\n        // Append new key to the list\r\n        account.apiKeys.push({\r\n          keyname: response.data.keyname,\r\n          apikey: response.data.apikey\r\n        });\r\n\r\n        // Clear the name input field\r\n        $scope.inputs.newApiKeyName = '';\r\n\r\n        DatabusAlert.alert($scope, true, \"API key created.\");\r\n      } else {\r\n        DatabusAlert.alert($scope, false, \"Failed to create API key.\");\r\n      }\r\n\r\n    } catch (error) {\r\n      console.error('Error creating API key:', error);\r\n      const message = err.data || err.message || \"Unknown error occurred.\";\r\n      DatabusAlert.alert($scope, false, message);\r\n    }\r\n  };\r\n\r\n\r\n  $scope.deleteApiKey = async function (account, apiKey) {\r\n    try {\r\n      // Find index of the account using accountName\r\n      const index = account.apiKeys.findIndex(key => key.keyname === apiKey.keyname);\r\n\r\n      if (index === -1) {\r\n        throw new Error(`API key with name \"${apiKey.keyname}\" not found.`);\r\n      }\r\n\r\n      console.log(\"Deleting API key with keyname:\", apiKey.keyname);\r\n\r\n      // Send delete request to server\r\n      await $http.post(`/api/account/api-key/delete`, { accountName: account.accountName, keyname: apiKey.keyname });\r\n      account.apiKeys.splice(index, 1);\r\n\r\n      // Show success alert\r\n      DatabusAlert.alert($scope, true, \"API key deleted.\");\r\n\r\n    } catch (err) {\r\n      console.error(err);\r\n\r\n\r\n\r\n      const message = err.data || err.message || \"Unknown error occurred.\";\r\n      DatabusAlert.alert($scope, false, message);\r\n    }\r\n  };\r\n\r\n  $scope.addSecretary = function (account) {\r\n    if (!account.secretaries) {\r\n      account.secretaries = [];\r\n    }\r\n\r\n    account.secretaries.push({\r\n      accountName: '',\r\n      hasWriteAccessTo: []\r\n    });\r\n  };\r\n\r\n  $scope.removeSecretary = function (account, index) {\r\n    account.secretaries.splice(index, 1);\r\n  };\r\n\r\n  $scope.addNamespace = function (account, secIndex) {\r\n    account.secretaries[secIndex].hasWriteAccessTo.push('');\r\n  };\r\n\r\n  $scope.removeNamespace = function (account, secIndex, nsIndex) {\r\n    account.secretaries[secIndex].hasWriteAccessTo.splice(nsIndex, 1);\r\n  };\r\n}\r\n\r\nmodule.exports = UserSettingsController;\n\n//# sourceURL=webpack://databus-webapp/./js/page-controller/user-settings-controller.js?");

/***/ }),

/***/ "./js/page-controller/version-controller.js":
/*!**************************************************!*\
  !*** ./js/page-controller/version-controller.js ***!
  \**************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("const DatabusWebappUtils = __webpack_require__(/*! ../utils/databus-webapp-utils */ \"./js/utils/databus-webapp-utils.js\");\r\nconst JsonldUtils = __webpack_require__(/*! ../utils/jsonld-utils */ \"./js/utils/jsonld-utils.js\");\r\nconst DatabusUtils = __webpack_require__(/*! ../utils/databus-utils */ \"./js/utils/databus-utils.js\");\r\nconst DatabusAlert = __webpack_require__(/*! ../components/databus-alert/databus-alert */ \"./js/components/databus-alert/databus-alert.js\");\r\nconst QueryNode = __webpack_require__(/*! ../query-builder/query-node */ \"./js/query-builder/query-node.js\");\r\nconst TabNavigation = __webpack_require__(/*! ../utils/tab-navigation */ \"./js/utils/tab-navigation.js\");\r\nconst DatabusUris = __webpack_require__(/*! ../utils/databus-uris */ \"./js/utils/databus-uris.js\");\r\nconst DataIdCreator = __webpack_require__(/*! ../publish/dataid-creator */ \"./js/publish/dataid-creator.js\");\r\nconst QueryTemplates = __webpack_require__(/*! ../query-builder/query-templates */ \"./js/query-builder/query-templates.js\");\r\nconst DatabusCollectionWrapper = __webpack_require__(/*! ../collections/databus-collection-wrapper */ \"./js/collections/databus-collection-wrapper.js\");\r\nconst QueryBuilder = __webpack_require__(/*! ../query-builder/query-builder */ \"./js/query-builder/query-builder.js\");\r\nconst AppJsonFormatter = __webpack_require__(/*! ../utils/app-json-formatter */ \"./js/utils/app-json-formatter.js\");\r\n\r\nfunction VersionPageController($scope, $http, $sce, $location, collectionManager) {\r\n\r\n  $scope.navigation = new TabNavigation($scope, $location, [\r\n    'files', 'mods', 'edit'\r\n  ]);\r\n\r\n  $scope.auth = data.auth;\r\n  $scope.utils = new DatabusWebappUtils($scope, $sce);\r\n  $scope.accountName = $scope.utils.getAccountName();\r\n\r\n  $scope.collectionManager = collectionManager;\r\n  $scope.authenticated = data.auth.authenticated;\r\n  $scope.versionGraph = data.graph;\r\n  $scope.version = AppJsonFormatter.formatVersionData(data.graph);\r\n\r\n  $scope.queryResult = {};\r\n  $scope.addToCollectionQuery = \"\";\r\n  $scope.collectionModalVisible = false;\r\n\r\n  $scope.publisherName = DatabusUtils.uriToName(DatabusUtils.navigateUp($scope.version.uri, 3));\r\n  $scope.canEdit = $scope.accountName != null;\r\n\r\n  if (data.auth.authenticated && $scope.canEdit) {\r\n\r\n    $scope.licenseQuery = \"\";\r\n    $scope.filterLicenses = function (licenseQuery) {\r\n\r\n      if (data.licenseData == null) {\r\n        return;\r\n      }\r\n\r\n      // billo-suche mit lowercase und tokenization \r\n      var tokens = licenseQuery.toLowerCase().split(' ');\r\n      $scope.filteredLicenseList = data.licenseData.results.bindings.filter(function (l) {\r\n        for (var token of tokens) {\r\n          if (!l.title.value.toLowerCase().includes(token)) {\r\n            return false;\r\n          }\r\n        }\r\n\r\n        return true;\r\n      });\r\n    }\r\n\r\n    $scope.filterLicenses(\"\");\r\n\r\n    $scope.formData = {};\r\n\r\n    $scope.formData.group = {};\r\n    $scope.formData.group.name = DatabusUtils.uriToName(DatabusUtils.navigateUp($scope.version.uri, 2));\r\n\r\n    $scope.formData.artifact = {};\r\n    $scope.formData.artifact.name = DatabusUtils.uriToName(DatabusUtils.navigateUp($scope.version.uri, 1));\r\n\r\n    var abstract = DatabusUtils.createAbstractFromDescription($scope.version.description);\r\n\r\n    $scope.formData.version = {};\r\n    $scope.formData.version.generateAbstract = abstract == $scope.version.abstract;\r\n    $scope.formData.version.name = $scope.version.name;\r\n    $scope.formData.version.title = $scope.version.title;\r\n    $scope.formData.version.abstract = $scope.version.abstract;\r\n    $scope.formData.version.description = $scope.version.description;\r\n    $scope.formData.version.license = $scope.version.license;\r\n    $scope.formData.version.attribution = $scope.version.attribution;\r\n    $scope.formData.version.wasDerivedFrom = $scope.version.wasDerivedFrom;\r\n\r\n    $scope.formData.signature = {};\r\n    $scope.formData.signature.autoGenerateSignature = true;\r\n    $scope.formData.signature.selectedPublisherUri = $scope.version.publisher;\r\n\r\n    $scope.dataidCreator = new DataIdCreator($scope.formData, data.auth.info.accountName);\r\n  }\r\n\r\n  $scope.onDescriptionChanged = function () {\r\n    if ($scope.formData == null) {\r\n      return;\r\n    }\r\n\r\n    if (!$scope.formData.version.generateAbstract) {\r\n      return;\r\n    }\r\n\r\n    $scope.formData.version.abstract =\r\n      DatabusUtils.createAbstractFromDescription($scope.formData.version.description);\r\n  }\r\n\r\n  $scope.resetEdits = function () {\r\n    $scope.formData.version.title = $scope.version.title;\r\n    $scope.formData.version.abstract = $scope.version.abstract;\r\n    $scope.formData.version.description = $scope.version.description;\r\n  }\r\n\r\n  $scope.saveVersion = async function () {\r\n\r\n    try {\r\n      if ($scope.dataidCreator == null) {\r\n        return;\r\n      }\r\n      var relativeUri = new URL($scope.version.uri).pathname;\r\n\r\n      var response = await $http({\r\n        method: 'GET',\r\n        url: relativeUri,\r\n        headers: {\r\n          'Accept': 'application/ld+json',\r\n          'X-Jsonld-Formatting': 'flatten'\r\n        }\r\n      });\r\n\r\n      var graphs = response.data;\r\n      var versionGraph = JsonldUtils.getTypedGraph(graphs, DatabusUris.DATABUS_VERSION);\r\n\r\n      JsonldUtils.setLiteral(versionGraph, DatabusUris.DCT_TITLE, DatabusUris.XSD_STRING,\r\n        $scope.formData.version.title);\r\n      JsonldUtils.setLiteral(versionGraph, DatabusUris.DCT_ABSTRACT, DatabusUris.XSD_STRING,\r\n        $scope.formData.version.abstract);\r\n      JsonldUtils.setLiteral(versionGraph, DatabusUris.DCT_DESCRIPTION, DatabusUris.XSD_STRING,\r\n        $scope.formData.version.description);\r\n      JsonldUtils.setLink(versionGraph, DatabusUris.DCT_LICENSE, $scope.formData.version.license);\r\n      JsonldUtils.setLiteral(versionGraph, DatabusUris.DATABUS_ATTRIBUTION, DatabusUris.XSD_STRING,\r\n        $scope.formData.version.attribution);\r\n\r\n      if ($scope.formData.version.wasDerivedFrom) {\r\n        JsonldUtils.setLink(versionGraph, DatabusUris.PROV_WAS_DERIVED_FROM,\r\n          $scope.formData.version.wasDerivedFrom);\r\n      }\r\n\r\n      var response = await $http.put(`/api/register`, graphs);\r\n\r\n      if (response.status == 200) {\r\n        $scope.version.title = $scope.formData.version.title;\r\n        $scope.version.abstract = $scope.formData.version.abstract;\r\n        $scope.version.description = $scope.formData.version.description;\r\n        $scope.version.license = $scope.formData.version.license;\r\n        $scope.version.attribution = $scope.formData.version.attribution;\r\n        $scope.version.wasDerivedFrom = $scope.formData.version.wasDerivedFrom;\r\n\r\n        DatabusAlert.alert($scope, true, \"Version Saved!\");\r\n        $scope.$apply();\r\n      }\r\n    } catch (err) {\r\n      DatabusAlert.alert($scope, false, \"Failed to save version!\");\r\n    }\r\n  }\r\n\r\n  $scope.modsAmountMinimized = 5;\r\n  $scope.modsMaxAmount = $scope.modsAmountMinimized;\r\n\r\n  $scope.showAllMods = function () {\r\n    $scope.modsMaxAmount = 10000000;\r\n  }\r\n\r\n  $scope.hideAllMods = function () {\r\n    $scope.modsMaxAmount = $scope.modsAmountMinimized;\r\n  }\r\n\r\n  $scope.fileSelector = {};\r\n  $scope.fileSelector.config = {};\r\n  $scope.fileSelector.config.authenticated = $scope.authenticated;\r\n  $scope.fileSelector.config.columns = [];\r\n  $scope.fileSelector.config.columns.push({ field: 'variant', label: 'Variant', width: '45%' });\r\n  $scope.fileSelector.config.columns.push({ field: 'format', label: 'Format', width: '15%' });\r\n  $scope.fileSelector.config.columns.push({ field: 'compression', label: 'Compression', width: '15%' });\r\n\r\n  $scope.artifactNode = new QueryNode($scope.version.artifact, 'databus:artifact');\r\n  $scope.artifactNode.setFacet('http://purl.org/dc/terms/hasVersion', $scope.version.name, true);\r\n\r\n  $scope.groupNode = new QueryNode(DatabusUtils.navigateUp($scope.version.artifact), 'databus:group');\r\n  $scope.groupNode.addChild($scope.artifactNode);\r\n\r\n  $scope.collectionWidgetSelectionData = {};\r\n  $scope.collectionWidgetSelectionData.groupNode = $scope.groupNode;\r\n\r\n  $scope.onFacetSettingsChanged = function () {\r\n    $scope.fileSelector.query = QueryBuilder.build({\r\n      node: $scope.artifactNode,\r\n      template: QueryTemplates.DEFAULT_FILE_TEMPLATE,\r\n      resourceBaseUrl: DATABUS_RESOURCE_BASE_URL\r\n    });\r\n\r\n    $scope.fileSelector.fullQuery = QueryBuilder.build({\r\n      node: $scope.artifactNode,\r\n      template: QueryTemplates.GROUP_PAGE_FILE_BROWSER_TEMPLATE,\r\n      resourceBaseUrl: DATABUS_RESOURCE_BASE_URL\r\n    });\r\n  }\r\n\r\n  $scope.onFacetSettingsChanged();\r\n\r\n  $scope.hideAutofill = function () {\r\n    $scope.fileSelector.clearAutofill(function () {\r\n      $scope.$apply();\r\n    });\r\n  }\r\n\r\n  $scope.onFileSelectionChanged = function (numFiles, totalSize, query) {\r\n    $scope.addToCollectionQuery = query;\r\n  }\r\n\r\n  $scope.showCollectionModal = function () {\r\n    $scope.collectionModalVisible = true;\r\n  }\r\n\r\n  $scope.hideCollectionModal = function () {\r\n    $scope.collectionModalVisible = false;\r\n  }\r\n\r\n  $scope.addFilter = function (selected, key) {\r\n    $scope.fileSelector.addFilter(selected, key);\r\n    $scope.updateQueryBuilder();\r\n  }\r\n\r\n  $scope.addQueryToCollection = function () {\r\n    $scope.collectionManager.addElement($scope.queryBuilder.query);\r\n    $scope.hideCollectionModal();\r\n  };\r\n\r\n  $scope.addQueryToCollection = function () {\r\n\r\n    if ($scope.collectionManager.activeCollection == null) {\r\n      return;\r\n    }\r\n\r\n    var wrapper = new DatabusCollectionWrapper($scope.collectionManager.activeCollection);\r\n    wrapper.addCustomQueryNode('Select ' + $scope.versionData.label + ' files', $scope.addToCollectionQuery);\r\n    $scope.collectionManager.saveLocally();\r\n    $scope.collectionModalVisible = false;\r\n  }\r\n\r\n  $scope.formatMods = function (results) {\r\n    var mods = results.replace(\",\", \"&nbsp;\");\r\n    return $sce.trustAsHtml(mods);\r\n  }\r\n\r\n  $scope.formatModFile = function (uri) {\r\n    return DatabusUtils.uriToName(uri);\r\n  }\r\n\r\n  $scope.downloadMetadataAsFile = async function () {\r\n    var response = await $http({\r\n      method: 'GET',\r\n      url: $scope.version.uri,\r\n      headers: {\r\n        'Accept': 'application/ld+json',\r\n      }\r\n    });\r\n\r\n    $scope.download(`${$scope.version.name}.jsonld`, JSON.stringify(response.data, null, 3));\r\n  }\r\n\r\n  $scope.download = function (filename, text) {\r\n    var element = document.createElement('a');\r\n    element.setAttribute('href', 'data:text/plain;charset=utf-8,' + encodeURIComponent(text));\r\n    element.setAttribute('download', filename);\r\n    element.style.display = 'none';\r\n    document.body.appendChild(element);\r\n\r\n    element.click();\r\n\r\n    document.body.removeChild(element);\r\n  }\r\n\r\n\r\n}\r\n\r\nmodule.exports = VersionPageController;\n\n//# sourceURL=webpack://databus-webapp/./js/page-controller/version-controller.js?");

/***/ }),

/***/ "./js/publish/artifact-data.js":
/*!*************************************!*\
  !*** ./js/publish/artifact-data.js ***!
  \*************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("const EntityHandler = __webpack_require__(/*! ./entity-handler */ \"./js/publish/entity-handler.js\");\r\nconst DatabusUtils = __webpack_require__(/*! ../utils/databus-utils */ \"./js/utils/databus-utils.js\");\r\nconst DatabusUris = __webpack_require__(/*! ../utils/databus-uris */ \"./js/utils/databus-uris.js\");\r\nconst GroupData = __webpack_require__(/*! ./group-data */ \"./js/publish/group-data.js\");\r\n\r\nclass ArtifactData extends EntityHandler {\r\n  constructor($http, accounts, apiKeys) {\r\n    super('databus_registration_artifact_data', $http, null, accounts, apiKeys);\r\n  }\r\n\r\n  initialize(data) {\r\n    const validAccount = data && this.accounts.some(acc => acc.accountName === data.accountName);\r\n\r\n    if (validAccount) {\r\n      Object.assign(this, data);\r\n    } else {\r\n      this.accountName = this.accounts[0]?.name;\r\n    }\r\n\r\n    if(this.apiKeyName == null && this.apiKeys != null && this.apiKeys.length > 0) {\r\n      this.apiKeyName = this.apiKeys[0].keyname;\r\n    }\r\n\r\n\r\n    this.sendmode ??= 'register';\r\n    this.onAccountNameChanged();\r\n    this.onGroupNameChanged();\r\n  }\r\n\r\n   validate() {\r\n    this.errors = [];\r\n    this.warnings = [];\r\n\r\n    if (!DatabusUtils.isValidArtifactName(this.name)) {\r\n      this.errors.push('err_invalid_artifact_name');\r\n    }\r\n\r\n    if (!DatabusUtils.isValidGroupName(this.groupName)) {\r\n      this.errors.push('err_no_group_selected');\r\n    }\r\n\r\n    const exists = this.artifactList?.some(a => a.name === this.name);\r\n    if (exists) {\r\n      this.warnings.push('warning_artifact_exists');\r\n    }\r\n  }\r\n  \r\n  getURI() {\r\n    return `${DATABUS_RESOURCE_BASE_URL}/${this.accountName}/${this.groupName}/${this.name}`;\r\n  }\r\n\r\n  getSaveData() {\r\n    return {\r\n      accountName: this.accountName,\r\n      groupName: this.groupName,\r\n      name: this.name,\r\n      title: this.title,\r\n      abstract: this.abstract,\r\n      description: this.description,\r\n      sendmode: this.sendmode,\r\n      apiKeyName: this.apiKeyName,\r\n    };\r\n  }\r\n\r\n\r\n  async setGroupName(groupName) {\r\n    if (this.groupName !== groupName) {\r\n      this.groupName = groupName;\r\n      await this.onGroupNameChanged();\r\n    }\r\n  }\r\n\r\n  async onGroupNameChanged() {\r\n    this.isLoadingArtifacts = true;\r\n    this.artifactList = await this.sparqlClient.getArtifacts(this.accountName, this.groupName);\r\n    this.isLoadingArtifacts = false;\r\n    this.onChange();\r\n  }\r\n\r\n \r\n\r\n  updateOutputs() {\r\n    const groupUri = `${DATABUS_RESOURCE_BASE_URL}/${GroupData.getStringOrMissing(this.accountName)}/${GroupData.getStringOrMissing(this.groupName)}`;\r\n\r\n    this.postBody = {\r\n      \"@context\": this.getContext(),\r\n      \"@graph\": [\r\n        {\r\n          \"@id\": `${groupUri}/${GroupData.getStringOrMissing(this.name)}`,\r\n          \"@type\": \"Artifact\",\r\n          \"title\": this.getValidString(this.title),\r\n          \"abstract\": this.getValidString(this.abstract),\r\n          \"description\": this.getValidString(this.description),\r\n        }\r\n      ]\r\n    };\r\n\r\n    const payload = JSON.stringify(this.postBody, null, 2);\r\n    const apiKey = this.apiKeys?.find(k => k.keyname === this.apiKeyName)?.apikey;\r\n\r\n    this.curlCommand = [\r\n      `curl -X POST ${DATABUS_RESOURCE_BASE_URL}/api/register \\\\`,\r\n      `  -H \"X-API-KEY: ${GroupData.getStringOrMissing(apiKey)}\" \\\\`,\r\n      `  -H \"Content-Type: application/json\" \\\\`,\r\n      `  -d '${payload}'`\r\n    ].join('\\n');\r\n  }\r\n}\r\n\r\nmodule.exports = ArtifactData;\r\n\n\n//# sourceURL=webpack://databus-webapp/./js/publish/artifact-data.js?");

/***/ }),

/***/ "./js/publish/databus-sparql-client.js":
/*!*********************************************!*\
  !*** ./js/publish/databus-sparql-client.js ***!
  \*********************************************/
/***/ ((module) => {

eval("class DatabusSparqlClient {\r\n\r\n    constructor($http) {\r\n        this.$http = $http;\r\n    }\r\n\r\n    /**\r\n     * Generic SPARQL query runner.\r\n     * @param {string} query - SPARQL query string.\r\n     * @returns {Promise<Array>} - Query result bindings.\r\n     */\r\n    async runQuery(query) {\r\n        const config = {\r\n            method: 'POST',\r\n            url: `/sparql`,\r\n            headers: {\r\n                'Accept': 'application/sparql-results+json',\r\n                'Content-Type': 'application/x-www-form-urlencoded'\r\n            },\r\n            data: `query=${encodeURIComponent(query)}`\r\n        };\r\n\r\n        try {\r\n            const response = await this.$http(config);\r\n            return response.data.results.bindings || [];\r\n        } catch (err) {\r\n            console.error('SPARQL query failed:', err);\r\n            return [];\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Fetches groups for a given Databus account.\r\n     * @param {string} accountName - The account name (e.g., 'myaccount').\r\n     * @returns {Promise<Array>} - List of groups with basic metadata.\r\n     */\r\n    async getGroups(accountName) {\r\n        const query = `\r\n            PREFIX databus: <https://dataid.dbpedia.org/databus#>\r\n\r\n            SELECT DISTINCT ?group WHERE {\r\n                ?group a databus:Group .\r\n                ?group databus:account <${DATABUS_RESOURCE_BASE_URL}/${accountName}> .\r\n            }\r\n        `;\r\n\r\n        const bindings = await this.runQuery(query);\r\n\r\n        return bindings.map(binding => ({\r\n            uri: binding.group.value,\r\n            name: binding.group.value.split('/').pop(),\r\n        }));\r\n    }\r\n\r\n    async getArtifacts(accountName, groupName) {\r\n        const query = `\r\n            PREFIX databus: <https://dataid.dbpedia.org/databus#>\r\n\r\n            SELECT DISTINCT ?group WHERE {\r\n                ?group a databus:Artifact .\r\n                ?group databus:group <${DATABUS_RESOURCE_BASE_URL}/${accountName}/${groupName}> .\r\n            }\r\n        `;\r\n\r\n        const bindings = await this.runQuery(query);\r\n\r\n        return bindings.map(binding => ({\r\n            uri: binding.group.value,\r\n            name: binding.group.value.split('/').pop(),\r\n        }));\r\n    }\r\n\r\n    async getVersions(accountName, groupName, artifactName) {\r\n        const query = `\r\n            PREFIX databus: <https://dataid.dbpedia.org/databus#>\r\n\r\n            SELECT DISTINCT ?group WHERE {\r\n                ?group a databus:Version .\r\n                ?group databus:artifact <${DATABUS_RESOURCE_BASE_URL}/${accountName}/${groupName}/${artifactName}> .\r\n            }\r\n        `;\r\n\r\n        const bindings = await this.runQuery(query);\r\n\r\n        return bindings.map(binding => ({\r\n            uri: binding.group.value,\r\n            name: binding.group.value.split('/').pop(),\r\n        }));\r\n    }\r\n}\r\n\r\nmodule.exports = DatabusSparqlClient;\r\n\n\n//# sourceURL=webpack://databus-webapp/./js/publish/databus-sparql-client.js?");

/***/ }),

/***/ "./js/publish/dataid-creator.js":
/*!**************************************!*\
  !*** ./js/publish/dataid-creator.js ***!
  \**************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("const DatabusUris = __webpack_require__(/*! ../utils/databus-uris */ \"./js/utils/databus-uris.js\");\nconst DatabusUtils = __webpack_require__(/*! ../utils/databus-utils */ \"./js/utils/databus-utils.js\");\n\nclass DataIdCreator {\n\n  constructor(formData, accountName) {\n    this.accountName = accountName;\n    this.formData = formData;\n  }\n\n  createInputs() {\n    var group = this.createGroupUpdate();\n    var artifact = this.createArtifactUpdate();\n    var dataid = this.createVersionUpdate();\n\n    var result = {\n      \"@context\": this.getContext(),\n      \"@graph\": []\n    };\n\n    if (group != undefined) {\n      for (var graph of group[\"@graph\"]) {\n        result[\"@graph\"].push(graph);\n      }\n    }\n\n    if (artifact != undefined) {\n      for (var graph of artifact[\"@graph\"]) {\n        result[\"@graph\"].push(graph);\n      }\n    }\n\n    if (dataid != undefined) {\n      for (var graph of dataid[\"@graph\"]) {\n        result[\"@graph\"].push(graph);\n      }\n    }\n\n    return {\n      context: this.getContext(),\n      group: group,\n      artifact: artifact,\n      dataid: dataid,\n      all: result\n    };\n  }\n\n  getValidString(value) {\n    if(value == undefined || value.length == 0) {\n      return undefined;\n    }\n\n    return value;\n  }\n\n  getContext() {\n    if(DATABUS_CONTEXT_URL != undefined && DatabusUtils.isValidHttpUrl(DATABUS_CONTEXT_URL)) {\n      return DATABUS_CONTEXT_URL;\n    }\n\n    return DATABUS_CONTEXT[DatabusUris.JSONLD_CONTEXT];\n  }\n\n  createGroupUpdate() {\n\n    var accountUri = `${DATABUS_RESOURCE_BASE_URL}/${this.accountName}`;\n\n    return {\n      \"@context\": this.getContext(),\n      \"@graph\": [\n        {\n          \"@id\": `${accountUri}/${this.formData.group.name}`,\n          \"@type\": \"Group\",\n          \"title\": this.getValidString(this.formData.group.title),\n          \"abstract\": this.getValidString(this.formData.group.abstract),\n          \"description\": this.getValidString(this.formData.group.description)\n        }\n      ]\n    };\n  }\n\n  createArtifactUpdate() {\n    \n    if (this.formData.artifact.generateMetadata == 'none') {\n      return undefined;\n    }\n\n    var accountUri = `${DATABUS_RESOURCE_BASE_URL}/${this.accountName}`;\n\n    return {\n      \"@context\": this.getContext(),\n      \"@graph\": [\n        {\n          \"@id\": `${accountUri}/${this.formData.group.name}/${this.formData.artifact.name}`,\n          \"@type\": \"Artifact\",\n          \"title\": this.getValidString(this.formData.artifact.title),\n          \"abstract\": this.getValidString(this.formData.artifact.abstract),\n          \"description\": this.getValidString(this.formData.artifact.description)\n        }\n      ]\n    };\n  }\n\n  createVersionUpdate() {\n\n    if (this.formData.version.generateMetadata == 'none') {\n      return undefined;\n    }\n\n    var accountUri = `${DATABUS_RESOURCE_BASE_URL}/${this.accountName}`;\n    var versionUri = `${accountUri}/${this.formData.group.name}/${this.formData.artifact.name}/${this.formData.version.name}`\n\n    var artifact = this.formData.artifact;\n    var version = this.formData.version;\n\n    var graph = {\n      \"@type\": [ \"Version\", \"Dataset\" ],\n      \"@id\": versionUri,\n      \"publisher\": this.formData.signature.selectedPublisherUri,\n      \"hasVersion\": version.name,\n      \"title\": version.title,\n      \"abstract\": version.abstract,\n      \"description\": version.description,\n      \"license\": version.license,\n      \"attribution\": version.attribution,\n      \"wasDerivedFrom\": version.wasDerivedFrom,\n      \"distribution\": []\n    }\n\n    if (this.formData.signature.selectedPublisherUri == this.formData.signature.defaultPublisherUri) {\n      delete graph.publisher;\n    }\n\n    if (!this.formData.signature.autoGenerateSignature) {\n      graph[\"proof\"] = {\n        '@type': \"DatabusTractateV1\",\n        'signature': this.formData.signature.userSignature\n      };\n    }\n\n    var customVariants = [];\n\n    for (var fg in version.files) {\n\n      var file = version.files[fg];\n\n      var variantSuffix = '';\n      for (var c in version.contentVariants) {\n        var cv = version.contentVariants[c];\n        var value = file.contentVariants[cv.id];\n\n        if (value == undefined || value == \"\") {\n          continue;\n        }\n\n        variantSuffix += '_' + cv.id + '=' + value;\n      }\n\n      var fileName = artifact.name; \n\n      var distributionUri = `${versionUri}#${fileName}`;\n      var fileUri = `${versionUri}/${fileName}${variantSuffix}`;\n\n      distributionUri += variantSuffix;\n\n      if (file.formatExtension != 'none') {\n        distributionUri += '.' + file.formatExtension;\n        fileUri += '.' + file.formatExtension;\n      }\n\n      if (file.compression != 'none') {\n        distributionUri += '.' + file.compression;\n        fileUri += '.' + file.compression;\n      }\n\n      var distribution = {\n        \"@type\": \"Part\",\n        \"formatExtension\": file.formatExtension,\n        \"compression\": file.compression,\n        \"downloadURL\": file.uri,\n        \"byteSize\": file.byteSize,\n        \"sha256sum\": file.sha256sum,\n      };\n\n      for (var c in version.contentVariants) {\n        var cv = version.contentVariants[c];\n        var value = file.contentVariants[cv.id];\n\n        if (value == undefined || value == \"\") {\n          continue;\n          // value = \"\";\n        }\n\n        distribution['dcv:' + cv.id] = value;\n\n        if (!customVariants.includes(cv.id)) {\n          customVariants.push(cv.id);\n        }\n      }\n\n      graph.distribution.push(distribution);\n    }\n\n    var result = {\n      \"@context\": this.getContext(),\n      \"@graph\": [graph]\n    }\n\n    return result;\n  }\n}\n\nmodule.exports = DataIdCreator;\n\n\n//# sourceURL=webpack://databus-webapp/./js/publish/dataid-creator.js?");

/***/ }),

/***/ "./js/publish/entity-handler.js":
/*!**************************************!*\
  !*** ./js/publish/entity-handler.js ***!
  \**************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("const DatabusUris = __webpack_require__(/*! ../utils/databus-uris */ \"./js/utils/databus-uris.js\");\r\nconst DatabusUtils = __webpack_require__(/*! ../utils/databus-utils */ \"./js/utils/databus-utils.js\");\r\nconst DatabusSparqlClient = __webpack_require__(/*! ./databus-sparql-client */ \"./js/publish/databus-sparql-client.js\");\r\n\r\nclass EntityHandler {\r\n  constructor(storageKey, $http, $interval, accounts, apiKeys) {\r\n    this.storageKey = storageKey;\r\n    this.$http = $http;\r\n    this.$interval = $interval;\r\n    this.accounts = accounts;\r\n    this.apiKeys = apiKeys;\r\n    this.sparqlClient = new DatabusSparqlClient($http);\r\n\r\n    const data = this._loadFromSession();\r\n    this.initialize(data);\r\n  }\r\n\r\n  _loadFromSession() {\r\n    try {\r\n      const raw = window.sessionStorage.getItem(this.storageKey);\r\n      return raw ? JSON.parse(raw) : null;\r\n    } catch (e) {\r\n      console.error(\"Failed to load session data:\", e);\r\n      return null;\r\n    }\r\n  }\r\n\r\n  save() {\r\n    try {\r\n      const data = this.getSaveData();\r\n      const json = JSON.stringify(data);\r\n      window.sessionStorage.setItem(this.storageKey, json);\r\n    } catch (e) {\r\n      console.error(\"Failed to save session data:\", e);\r\n    }\r\n  }\r\n\r\n  // Abstract methods\r\n  initialize(data) {\r\n    throw new Error(\"Method 'initialize(data)' must be implemented.\");\r\n  }\r\n\r\n  getSaveData() {\r\n    throw new Error(\"Method 'getSaveData()' must be implemented.\");\r\n  }\r\n\r\n  validate() {\r\n    throw new Error(\"Method 'validate()' must be implemented.\");\r\n  }\r\n\r\n  updateOutputs() {\r\n    throw new Error(\"Method 'updateOutputs()' must be implemented.\");\r\n  }\r\n\r\n  getURI() {\r\n    throw new Error(\"Method 'updateOutputs()' must be implemented.\");\r\n  }\r\n\r\n  getValidString(value) {\r\n    return value?.length > 0 ? value : undefined;\r\n  }\r\n\r\n  static getStringOrMissing(value) {\r\n    return value?.length > 0 ? value : '!!!missing!!!';\r\n  }\r\n\r\n  hasError(errorKey) {\r\n    return this.errors?.includes(errorKey) ?? false;\r\n  }\r\n\r\n  setSendMode(sendmode) {\r\n    this.sendmode = sendmode;\r\n    this.onChange();\r\n  }\r\n\r\n  getContext() {\r\n    if (DATABUS_CONTEXT_URL && DatabusUtils.isValidHttpUrl(DATABUS_CONTEXT_URL)) {\r\n      return DATABUS_CONTEXT_URL;\r\n    }\r\n    return DATABUS_CONTEXT[DatabusUris.JSONLD_CONTEXT];\r\n  }\r\n\r\n  async setAccountName(accountName) {\r\n    if (this.accountName !== accountName) {\r\n      this.accountName = accountName;\r\n      await this.onAccountNameChanged();\r\n    }\r\n  }\r\n\r\n  async onAccountNameChanged() {\r\n    this.isLoadingGroups = true;\r\n    this.groupList = await this.sparqlClient.getGroups(this.accountName);\r\n    this.isLoadingGroups = false;\r\n    this.onChange();\r\n  }\r\n\r\n  async setAccountName(accountName) {\r\n    if (this.accountName !== accountName) {\r\n      this.accountName = accountName;\r\n      \r\n      this.activeAccount = this.accounts?.find(a => a.accountName === this.accountName);\r\n      await this.onAccountNameChanged();\r\n    }\r\n  }\r\n\r\n  getAccount() {\r\n    return this.activeAccount;\r\n    \r\n  }\r\n\r\n  onChange() {\r\n    this.updateOutputs();\r\n    this.validate();\r\n    this.save();\r\n  }\r\n\r\n  getApiKey() {\r\n    return this.getAccount()?.apiKeys?.find(k => k.keyname === this.apiKeyName)?.apikey;\r\n  }\r\n\r\n  setApiKeyName(keyname) {\r\n    this.apiKeyName = keyname;\r\n    this.onChange();\r\n  }\r\n\r\n  async register() {\r\n    try {\r\n      const response = await this.$http({\r\n        method: 'POST',\r\n        url: `/api/register?log-level=info`,\r\n        headers: {\r\n          'Accept': 'application/json',\r\n          'Content-Type': 'application/json'\r\n        },\r\n        data: this.postBody\r\n      });\r\n\r\n      return response;\r\n    } catch (err) {\r\n      console.error('Entity registration failed:', err);\r\n      return null;\r\n    }\r\n  }\r\n}\r\n\r\nmodule.exports = EntityHandler;\r\n\n\n//# sourceURL=webpack://databus-webapp/./js/publish/entity-handler.js?");

/***/ }),

/***/ "./js/publish/group-data.js":
/*!**********************************!*\
  !*** ./js/publish/group-data.js ***!
  \**********************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("const EntityHandler = __webpack_require__(/*! ./entity-handler */ \"./js/publish/entity-handler.js\");\r\nconst DatabusUtils = __webpack_require__(/*! ../utils/databus-utils */ \"./js/utils/databus-utils.js\");\r\nconst DatabusUris = __webpack_require__(/*! ../utils/databus-uris */ \"./js/utils/databus-uris.js\");\r\nconst DatabusSparqlClient = __webpack_require__(/*! ./databus-sparql-client */ \"./js/publish/databus-sparql-client.js\");\r\n\r\nclass GroupData extends EntityHandler {\r\n  constructor($http, accounts, apiKeys) {\r\n    super('databus_registration_group_data', $http, null, accounts, apiKeys);\r\n   \r\n  }\r\n\r\n  initialize(data) {\r\n    const validAccount = data && this.accounts.some(acc => acc.accountName === data.accountName);\r\n    \r\n    if (validAccount) {\r\n      Object.assign(this, data);\r\n    } else {\r\n      this.accountName = this.accounts[0]?.name;\r\n    }\r\n\r\n    if(this.apiKeyName == null && this.apiKeys != null && this.apiKeys.length > 0) {\r\n      this.apiKeyName = this.apiKeys[0].keyname;\r\n    }\r\n\r\n    this.sendmode ??= 'register';\r\n    this.onAccountNameChanged();\r\n  }\r\n\r\n  getSaveData() {\r\n    return {\r\n      accountName: this.accountName,\r\n      name: this.name,\r\n      title: this.title,\r\n      abstract: this.abstract,\r\n      description: this.description,\r\n      sendmode: this.sendmode,\r\n      apiKeyName: this.apiKeyName,\r\n    };\r\n  }\r\n\r\n  getURI() {\r\n    return `${DATABUS_RESOURCE_BASE_URL}/${this.accountName}/${this.name}`;\r\n  }\r\n\r\n  validate() {\r\n    this.errors = [];\r\n    this.warnings = [];\r\n\r\n    if (!DatabusUtils.isValidGroupName(this.name)) {\r\n      this.errors.push('err_invalid_group_name');\r\n    }\r\n\r\n    if(this.sendmode == 'curl' && !this.apiKeyName) {\r\n      this.errors.push('err_no_api_key');\r\n    }\r\n\r\n    const exists = this.groupList?.some(g => g.name === this.name);\r\n    if (exists) {\r\n      this.warnings.push('warning_group_exists');\r\n    }\r\n  }\r\n\r\n  updateOutputs() {\r\n    const accountUri = `${DATABUS_RESOURCE_BASE_URL}/${GroupData.getStringOrMissing(this.accountName)}`;\r\n\r\n    this.postBody = {\r\n      \"@context\": this.getContext(),\r\n      \"@graph\": [\r\n        {\r\n          \"@id\": `${accountUri}/${GroupData.getStringOrMissing(this.name)}`,\r\n          \"@type\": \"Group\",\r\n          \"title\": this.getValidString(this.title),\r\n          \"abstract\": this.getValidString(this.abstract),\r\n          \"description\": this.getValidString(this.description),\r\n        }\r\n      ]\r\n    };\r\n\r\n    const payload = JSON.stringify(this.postBody, null, 2);\r\n    const apiKey = this.getApiKey();\r\n\r\n    this.curlCommand = [\r\n      `curl -X POST ${DATABUS_RESOURCE_BASE_URL}/api/register \\\\`,\r\n      `  -H \"X-API-KEY: ${GroupData.getStringOrMissing(apiKey)}\" \\\\`,\r\n      `  -H \"Content-Type: application/json\" \\\\`,\r\n      `  -d '${payload}'`\r\n    ].join('\\n');\r\n  }\r\n}\r\n\r\nmodule.exports = GroupData;\r\n\n\n//# sourceURL=webpack://databus-webapp/./js/publish/group-data.js?");

/***/ }),

/***/ "./js/publish/publish-data.js":
/*!************************************!*\
  !*** ./js/publish/publish-data.js ***!
  \************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("const DatabusUtils = __webpack_require__(/*! ../utils/databus-utils */ \"./js/utils/databus-utils.js\");\r\n\r\n/**\r\n * Handles shasum creation (and possibly other file stats)\r\n */\r\nclass PublishData {\r\n\r\n  constructor(data) {\r\n\r\n    if (data != null) {\r\n      this.account = data.account ?? {};\r\n      this.group = data.group ?? {};\r\n      this.artifact = data.artifact ?? {};\r\n      this.version = data.version ?? {};\r\n      this.files = data.files ?? {};\r\n      this.signature = data.signature;\r\n    }\r\n\r\n    if (data == null) {\r\n\r\n      this.account = {};\r\n      this.group = {};\r\n      this.artifact = {};\r\n      this.version = {};\r\n      this.files = {};\r\n      this.signature = undefined;\r\n\r\n      this.group.generateMetadata = 'create';\r\n      this.group.generateAbstract = true;\r\n      this.artifact.generateMetadata = 'create';\r\n      this.artifact.generateAbstract = true;\r\n      this.version.generateMetadata = 'create';\r\n      this.version.generateAbstract = true;\r\n      this.version.useArtifactTitle = true;\r\n      this.signature = this.createSignatureData();\r\n    }\r\n  }\r\n\r\n  createSignatureData() {\r\n    var signature = {};\r\n    signature.publisherUris = [];\r\n\r\n    signature.publisherUris = this.account.publisherUris;\r\n    signature.defaultPublisherUri = `${DATABUS_RESOURCE_BASE_URL}/${this.account.accountName}#this`\r\n    signature.selectedPublisherUri = signature.defaultPublisherUri;\r\n    signature.autoGenerateSignature = true;\r\n    signature.autoGenerateSignatureLocked = false;\r\n    signature.userSignature = '';\r\n\r\n    return signature;\r\n  }\r\n\r\n  hasError(error) {\r\n\r\n  }\r\n\r\n  clearErrors() {\r\n    this.group.errors = [];\r\n    this.artifact.errors = [];\r\n    this.version.errors = [];\r\n    this.files.errors = [];\r\n    this.group.warnings = [];\r\n    this.artifact.warnings = [];\r\n    this.version.warnings = [];\r\n  }\r\n  /**\r\n   * Validates the tree\r\n   */\r\n  validate() {\r\n\r\n    var hasErrors = false;\r\n    this.group.errors = [];\r\n    this.artifact.errors = [];\r\n    this.version.errors = [];\r\n    this.files.errors = [];\r\n    this.group.warnings = [];\r\n    this.artifact.warnings = [];\r\n    this.version.warnings = [];\r\n\r\n\r\n    if (!DatabusUtils.isValidGroupName(this.group.name)) {\r\n      this.group.errors.push('err_invalid_group_title');\r\n      hasErrors = true;\r\n    }\r\n\r\n    var self = this;\r\n\r\n    var existingGroup = this.account.groups.filter(function (value) {\r\n      return value.name == self.group.name;\r\n    });\r\n\r\n    if (existingGroup.length > 0 && this.group.generateMetadata == 'create') {\r\n      this.group.warnings.push('warning_group_exists');\r\n    }\r\n\r\n    var existingArtifact = this.account.artifacts.filter(function (value) {\r\n      return value.groupName == self.group.name && value.name == self.artifact.name;\r\n    });\r\n\r\n    if (existingArtifact.length > 0 && this.artifact.generateMetadata == 'create') {\r\n      this.artifact.warnings.push('warning_artifact_exists');\r\n    }\r\n\r\n    if (this.group.generateAbstract) {\r\n      this.group.abstract = DatabusUtils.createAbstractFromDescription(this.group.description);\r\n    }\r\n\r\n    if (this.version.generateAbstract) {\r\n      this.version.abstract = DatabusUtils.createAbstractFromDescription(this.version.description);\r\n    }\r\n\r\n    if (this.version.useArtifactTitle) {\r\n      this.version.title = this.artifact.title;\r\n    }\r\n\r\n    if (this.artifact.generateAbstract) {\r\n      this.artifact.abstract = DatabusUtils.createAbstractFromDescription(this.artifact.description);\r\n    }\r\n\r\n    if (this.group.publishGroupOnly) {\r\n      this.hasConfigurationError = hasErrors;\r\n      return;\r\n    }\r\n\r\n    if (this.artifact.generateMetadata != 'none') {\r\n      if (!DatabusUtils.isValidArtifactName(this.artifact.name)) {\r\n        this.artifact.errors.push('err_invalid_artifact_title');\r\n        hasErrors = true;\r\n      }\r\n    }\r\n\r\n    var versionUri = `${DATABUS_RESOURCE_BASE_URL}/${this.account.accountName}/${this.group.name}/${this.artifact.name}/${this.version.name}`;\r\n\r\n    var existingVersion = this.account.versions.filter(function (value) {\r\n      return value == versionUri;\r\n    });\r\n\r\n    if (existingVersion.length > 0) {\r\n      this.version.warnings.push('warning_version_exists');\r\n    }\r\n\r\n    if (this.version.generateMetadata != 'none') {\r\n\r\n      if (!DatabusUtils.isValidVersionIdentifier(this.version.name)) {\r\n        this.version.errors.push('err_invalid_version_title');\r\n        hasErrors = true;\r\n      }\r\n\r\n      if (!DatabusUtils.isValidUrl(this.version.license)) {\r\n        this.version.errors.push('err_invalid_version_license');\r\n        hasErrors = true;\r\n      }\r\n\r\n      if (!DatabusUtils.isValidResourceText(this.version.abstract, 1)) {\r\n        this.version.errors.push('err_invalid_version_abstract');\r\n        hasErrors = true;\r\n      }\r\n\r\n      if (!DatabusUtils.isValidResourceText(this.version.description, 1)) {\r\n        this.version.errors.push('err_invalid_version_description');\r\n        hasErrors = true;\r\n      }\r\n\r\n\r\n      if (DatabusUtils.objSize(this.version.files) == 0) {\r\n        this.files.errors.push('err_no_files');\r\n        hasErrors = true;\r\n      }\r\n\r\n      if (this.version.isConfigDirty) {\r\n\r\n\r\n        var files = [];\r\n        for (var f in this.version.files) {\r\n          this.version.files[f].errors = [];\r\n          files.push(this.version.files[f]);\r\n        }\r\n\r\n        this.cvSplit(this.version, files, 0);\r\n        this.version.isConfigDirty = false;\r\n      }\r\n    }\r\n\r\n    this.hasConfigurationError = hasErrors;\r\n  }\r\n\r\n  addFile(file) {\r\n\r\n\r\n    if (this.version.files == undefined) {\r\n      this.version.files = [];\r\n    }\r\n\r\n\r\n    for (var f in this.version.files) {\r\n      if (file.url == this.version.files[f].url) {\r\n        return;\r\n      }\r\n    }\r\n\r\n    var uri = file.url;\r\n    var uriParts = uri.split('/');\r\n    var name = uriParts.pop();\r\n    var nameComponents = name.split('.');\r\n    name = nameComponents[0];\r\n\r\n    if (name.length > 50) {\r\n      name = name.substr(0, 50) + '...';\r\n    }\r\n\r\n    name = decodeURIComponent(name);\r\n    // Files with uri as key!!\r\n\r\n    this.version.files.push({\r\n      id: uri,\r\n      uri: file.url,\r\n      name: name,\r\n      contentVariants: file.contentVariants != null ? file.contentVariants : {},\r\n      compression: file.compression,\r\n      formatExtension: file.formatExtension,\r\n      rowspan: 1,\r\n    });\r\n\r\n    this.version.files.sort(function (a, b) {\r\n      var nameA = a.name;\r\n      var nameB = b.name;\r\n\r\n      if (nameA < nameB) {\r\n        return -1;\r\n      }\r\n      if (nameA > nameB) {\r\n        return 1;\r\n      }\r\n\r\n      return 0;\r\n    });\r\n\r\n    this.version.isConfigDirty = true;\r\n  }\r\n\r\n  addContentVariant(variant) {\r\n\r\n    if (variant == undefined || variant == '') {\r\n      return;\r\n    }\r\n\r\n    if (this.version.contentVariants == undefined) {\r\n      this.version.contentVariants = [];\r\n    }\r\n\r\n    for (var c in this.version.contentVariants) {\r\n      if (this.version.contentVariants[c].id == variant) {\r\n        return;\r\n      }\r\n    }\r\n\r\n    this.version.contentVariants.push({\r\n      label: variant,\r\n      id: variant,\r\n      fillRegex: '',\r\n      toLower: true,\r\n      pruneWhitespaces: true\r\n    });\r\n\r\n    this.version.isConfigDirty = true;\r\n  }\r\n\r\n\r\n  removeContentVariant(variant) {\r\n\r\n    this.version.contentVariants = this.version.contentVariants.filter(function (d) {\r\n      return d.id != variant.id;\r\n    });\r\n\r\n    for (var f in this.version.files) {\r\n      var file = this.version.files[f];\r\n      delete file.contentVariants[variant.id];\r\n    }\r\n\r\n    this.version.isConfigDirty = true;\r\n  }\r\n\r\n  fill(variant) {\r\n\r\n    var val = variant.fillRegex;\r\n\r\n    for (var file of this.version.files) {\r\n\r\n      if (variant.toLower) {\r\n        val = val.toLowerCase();\r\n      }\r\n\r\n      if (variant.pruneWhitespaces) {\r\n        val = val.replaceAll(' ', '');\r\n      }\r\n\r\n      if (!variant.overwrite && file.contentVariants[variant.id] != undefined\r\n        && file.contentVariants[variant.id].length > 0) {\r\n        continue;\r\n      }\r\n\r\n      file.contentVariants[variant.id] = val;\r\n    }\r\n\r\n    this.version.isConfigDirty = true;\r\n  }\r\n\r\n  fillByRegex(variant) {\r\n    var regex = new RegExp(variant.fillRegex);\r\n\r\n    for (var f in this.version.files) {\r\n      var file = this.version.files[f];\r\n      var matches = file.name.match(regex);\r\n\r\n      if (matches != null) {\r\n        var val = matches[0];\r\n\r\n        if (variant.toLower) {\r\n          val = val.toLowerCase();\r\n        }\r\n\r\n        if (variant.pruneWhitespaces) {\r\n          val = val.replaceAll(' ', '');\r\n        }\r\n\r\n        if (!variant.overwrite && file.contentVariants[variant.id] != undefined\r\n          && file.contentVariants[variant.id].length > 0) {\r\n          continue;\r\n        }\r\n\r\n        file.contentVariants[variant.id] = val;\r\n      }\r\n    }\r\n\r\n    this.version.isConfigDirty = true;\r\n  }\r\n\r\n  createVersionName(v) {\r\n    if (v == 0) {\r\n      this.version.name = new Date().toISOString().slice(0, 10);\r\n    }\r\n\r\n    if (v == 1) {\r\n      this.version.name = new Date().toISOString().slice(0, 13);\r\n    }\r\n  }\r\n\r\n  getRowIndex(files, name) {\r\n    var k = 1;\r\n    for (var f in files) {\r\n      if (files[f].name == name) {\r\n        return k;\r\n      }\r\n\r\n      k++;\r\n    }\r\n\r\n    return -1;\r\n  }\r\n\r\n\r\n  cvSplit(artifact, files, cvIndex) {\r\n\r\n    if (files.length <= 1) {\r\n      return;\r\n    }\r\n\r\n    if (artifact.contentVariants == undefined) {\r\n      artifact.contentVariants = [];\r\n    }\r\n    // if end of cvs, assign errors to all files if files.length > 1\r\n    if (cvIndex - 2 >= artifact.contentVariants.length) {\r\n\r\n      if (files.length > 1) {\r\n\r\n        var cvHints = [];\r\n\r\n        if (artifact.contentVariants.length == 0) {\r\n          cvHints.push('No content variants have been added yet. Add content variants in the files panel in order to tag your files.');\r\n        } else {\r\n          for (var c in artifact.contentVariants) {\r\n            var cv = artifact.contentVariants[c];\r\n            var value = files[0].contentVariants[cv.id];\r\n\r\n            if (value == undefined || value == '') {\r\n              value = 'none';\r\n            }\r\n\r\n            cvHints.push(cv.id + ': ' + value);\r\n          }\r\n        }\r\n\r\n        for (var f in files) {\r\n\r\n          var index = 0;\r\n\r\n          if (f == 0) {\r\n            var index = this.getRowIndex(artifact.files, files[1].name);\r\n          } else {\r\n            var index = this.getRowIndex(artifact.files, files[0].name);\r\n          }\r\n\r\n          var errorMessage = 'The Databus requires any two files to be distinguishable by either their format, compression or any content variant. You have added a file with the exact same format, compression and content variants at row '\r\n            + index + ' (' +\r\n            cvHints.join(', ') + ').';\r\n\r\n          files[f].errors.push({ key: 'err_duplicate_file', message: errorMessage });\r\n        }\r\n      }\r\n\r\n      return;\r\n    }\r\n\r\n    // else create buckets and sort files into buckets\r\n    var buckets = {};\r\n\r\n    for (var f in files) {\r\n      var file = files[f];\r\n\r\n      var key = null;\r\n\r\n      if (cvIndex == 0) {\r\n        key = file.formatExtension;\r\n      } else if (cvIndex == 1) {\r\n        key = file.compression;\r\n      } else {\r\n        key = file.contentVariants[artifact.contentVariants[cvIndex - 2].id];\r\n      }\r\n\r\n      if (key == undefined || key == '') {\r\n        key = '$_none$';\r\n      }\r\n\r\n      if (buckets[key] == undefined) {\r\n        buckets[key] = [];\r\n      }\r\n\r\n      buckets[key].push(file);\r\n    }\r\n\r\n    // iterate buckets and call recursively\r\n    for (var b in buckets) {\r\n      this.cvSplit(artifact, buckets[b], cvIndex + 1);\r\n    }\r\n  }\r\n\r\n\r\n  getOrCreateFileGroup(fileGroupId, name) {\r\n\r\n    if (this.version.files == null) {\r\n      this.version.files = {};\r\n    }\r\n\r\n    if (this.version.files[fileGroupId] == undefined) {\r\n\r\n      this.version.files[fileGroupId] = {\r\n        id: fileGroupId,\r\n        name: name,\r\n        contentVariants: {},\r\n        distributions: [],\r\n        artifactId: undefined,\r\n        groupId: undefined,\r\n      };\r\n    }\r\n\r\n    return this.version.files[fileGroupId];\r\n  }\r\n\r\n}\r\n\r\nmodule.exports = PublishData;\n\n//# sourceURL=webpack://databus-webapp/./js/publish/publish-data.js?");

/***/ }),

/***/ "./js/publish/publish-session.js":
/*!***************************************!*\
  !*** ./js/publish/publish-session.js ***!
  \***************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("\r\nconst DatabusUtils = __webpack_require__(/*! ../utils/databus-utils */ \"./js/utils/databus-utils.js\");\r\nconst DatabusUris = __webpack_require__(/*! ../utils/databus-uris */ \"./js/utils/databus-uris.js\");\r\nconst JsonldUtils = __webpack_require__(/*! ../utils/jsonld-utils */ \"./js/utils/jsonld-utils.js\");\r\nconst PublishData = __webpack_require__(/*! ./publish-data */ \"./js/publish/publish-data.js\");\r\nconst DataIdCreator = __webpack_require__(/*! ./dataid-creator */ \"./js/publish/dataid-creator.js\");\r\nconst DatabusSparqlClient = __webpack_require__(/*! ./databus-sparql-client */ \"./js/publish/databus-sparql-client.js\");\r\nconst GroupHandler = __webpack_require__(/*! ./group-data */ \"./js/publish/group-data.js\");\r\nconst ArtifactHandler = __webpack_require__(/*! ./artifact-data */ \"./js/publish/artifact-data.js\");\r\nconst VersionHandler = __webpack_require__(/*! ./version-handler */ \"./js/publish/version-handler.js\");\r\n\r\nclass PublishSession {\r\n\r\n    static sessionStorageKey = 'databus_upload';\r\n    static sessionStorageIgnoreKeys = [\r\n        '$$hashKey',\r\n        'eventListeners',\r\n        'hasLocalChanges',\r\n        'fileFilterInput',\r\n        'fileSuggestions',\r\n        'progress',\r\n        'streamQueue'\r\n    ];\r\n\r\n\r\n    constructor($http, $interval, accounts, apiKeys) {\r\n\r\n        this.$http = $http;\r\n        this.accounts = accounts;\r\n        this.sparqlClient = new DatabusSparqlClient($http);\r\n        this.formData = new PublishData();\r\n\r\n        this.group = new GroupHandler($http, accounts, apiKeys);\r\n        this.artifact = new ArtifactHandler($http, accounts, apiKeys);\r\n        this.version = new VersionHandler($http, $interval, accounts, apiKeys);\r\n\r\n        this.reset();\r\n    }\r\n\r\n\r\n\r\n    reset() {\r\n        this.accountData = {};\r\n        this.groupData = {};\r\n        this.artifactData = {};\r\n        this.versionData = {};\r\n    }\r\n\r\n    update() {\r\n        this.validate();\r\n        this.save();\r\n    }\r\n\r\n    async selectAccount(account) {\r\n        this.accountData = {\r\n            name: account.name,\r\n            isValid: true\r\n        };\r\n\r\n        // Fetch groups for account here:\r\n        this.groups = await this.sparqlClient.getGroups(this.accountData.name);\r\n        \r\n\r\n        this.save();\r\n    }\r\n\r\n    async selectGroup(targetGroup) {\r\n\r\n        if (targetGroup == null) {\r\n            return;\r\n        }\r\n\r\n        var group = this.formData.group;\r\n        var artifact = this.formData.artifact;\r\n\r\n        group.name = targetGroup.name;\r\n        group.title = targetGroup.title;\r\n        group.abstract = targetGroup.abstract;\r\n        group.description = targetGroup.description;\r\n\r\n        if (this.currentGroup == null || this.currentGroup.name != targetGroup.name) {\r\n            this.currentGroup = targetGroup;\r\n\r\n            if (this.formData.artifact.generateMetadata == 'existing') {\r\n                this.currentArtifact = null;\r\n                this.setCreateNewArtifact('create');\r\n            }\r\n        }\r\n    }\r\n\r\n    createNewGroup() {\r\n        this.formData.group.name = \"\";\r\n        this.formData.group.title = \"\";\r\n        this.formData.group.abstract = \"\";\r\n        this.formData.group.description = \"\";\r\n\r\n        this.save();\r\n    }\r\n\r\n    selectArtifact(targetArtifact) {\r\n        if (targetArtifact == null) {\r\n            return;\r\n        }\r\n\r\n        var artifact = this.formData.artifact;\r\n        artifact.name = targetArtifact.name;\r\n        artifact.title = targetArtifact.title;\r\n        artifact.abstract = targetArtifact.abstract;\r\n        artifact.description = targetArtifact.description;\r\n        this.currentArtifact = targetArtifact;\r\n\r\n        this.availableVersions = this.accountData.versions.filter(function (v) {\r\n            return v.startsWith(targetArtifact.uri);\r\n        });\r\n    }\r\n\r\n    selectVersion = function (versionUri) {\r\n\r\n        try {\r\n            var relativeUri = new URL(versionUri).pathname;\r\n            var options = {\r\n                method: 'GET',\r\n                url: relativeUri,\r\n                headers: {\r\n                    'Accept': 'application/ld+json',\r\n                    'X-Jsonld-Formatting': 'flatten'\r\n                }\r\n            };\r\n\r\n            var version = this.formData.version;\r\n            version.isLoading = true;\r\n\r\n            var self = this;\r\n\r\n            this.$http(options).then(function (response) {\r\n\r\n                var version = self.formData.version;\r\n                version.isLoading = false;\r\n\r\n                var versionData = response.data;\r\n                var versionGraph = JsonldUtils.getTypedGraph(versionData, DatabusUris.DATABUS_VERSION);\r\n\r\n                version.name = DatabusUtils.uriToName(versionGraph[DatabusUris.JSONLD_ID]);\r\n                version.title = JsonldUtils.getProperty(versionGraph, DatabusUris.DCT_TITLE);\r\n                version.abstract = JsonldUtils.getProperty(versionGraph, DatabusUris.DCT_ABSTRACT);\r\n                version.description = JsonldUtils.getProperty(versionGraph, DatabusUris.DCT_DESCRIPTION);\r\n                version.attribution = JsonldUtils.getProperty(versionGraph, DatabusUris.DATABUS_ATTRIBUTION);\r\n                version.license = JsonldUtils.getProperty(versionGraph, DatabusUris.DCT_LICENSE);\r\n                version.derivedFrom = JsonldUtils.getProperty(versionGraph, DatabusUris.PROV_WAS_DERIVED_FROM);\r\n                version.contentVariants = [];\r\n\r\n                var contentVariantGraphs = JsonldUtils.getTypedGraphs(versionData, DatabusUris.RDF_PROPERTY);\r\n\r\n                for (var contentVariantGraph of contentVariantGraphs) {\r\n\r\n                    var variantName = DatabusUtils.uriToName(contentVariantGraph[DatabusUris.JSONLD_ID]);\r\n                    self.formData.addContentVariant(variantName);\r\n                }\r\n\r\n                // Add Files!\r\n                var fileGraphs = JsonldUtils.getTypedGraphs(versionData, DatabusUris.DATABUS_PART);\r\n                version.files = [];\r\n\r\n                for (var fileGraph of fileGraphs) {\r\n\r\n                    var fileUri = JsonldUtils.getProperty(fileGraph, DatabusUris.DCAT_DOWNLOAD_URL);\r\n\r\n\r\n\r\n                    var file = {\r\n                        id: fileUri,\r\n                        url: fileUri,\r\n                        name: DatabusUtils.uriToName(fileUri),\r\n                        compression: JsonldUtils.getProperty(fileGraph, DatabusUris.DATABUS_COMPRESSION),\r\n                        formatExtension: JsonldUtils.getProperty(fileGraph, DatabusUris.DATABUS_FORMAT_EXTENSION),\r\n                        contentVariants: {}\r\n                    }\r\n\r\n                    for (var contentVariant of version.contentVariants) {\r\n                        var variantUri = `${DatabusUris.DATABUS_CONTENT_VARIANT_PREFIX}${contentVariant.id}`;\r\n                        var variantValue = JsonldUtils.getProperty(fileGraph, variantUri);\r\n\r\n                        if (variantValue != null) {\r\n                            file.contentVariants[contentVariant.id] = variantValue;\r\n                        }\r\n                    }\r\n\r\n                    self.formData.addFile(file);\r\n                }\r\n\r\n\r\n                // Save the preset values\r\n                delete version.preset;\r\n                version.preset = JSON.parse(JSON.stringify(version));\r\n            });\r\n\r\n\r\n        } catch (err) {\r\n            console.log(err);\r\n        }\r\n    }\r\n\r\n    addFile(file) {\r\n        this.formData.addFile(file);\r\n    }\r\n\r\n\r\n    setCreateNewGroup(value) {\r\n        this.formData.group.generateMetadata = value;\r\n        if (value == 'create') {\r\n            this.formData.group.name = \"\";\r\n            this.formData.group.title = \"\";\r\n            this.formData.group.abstract = \"\";\r\n            this.formData.group.description = \"\";\r\n            this.formData.group.generateAbstract = true;\r\n            this.currentGroup = null;\r\n\r\n            if (this.formData.artifact.generateMetadata == 'existing') {\r\n                this.setCreateNewArtifact('create');\r\n            }\r\n        } else if (value == 'existing') {\r\n            var hasGroups = DatabusUtils.objSize(this.accountData.groups) > 0;\r\n\r\n            if (!hasGroups) {\r\n                this.setCreateNewGroup('create');\r\n                return;\r\n            }\r\n\r\n            if (this.currentGroup == null) {\r\n                for (var group of this.accountData.groups) {\r\n                    this.selectGroup(group);\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    setCreateNewArtifact(value) {\r\n        this.formData.artifact.generateMetadata = value;\r\n\r\n        if (value == 'create') {\r\n\r\n            this.availableVersions = [];\r\n            this.formData.artifact.name = \"\";\r\n            this.formData.artifact.title = \"\";\r\n            this.formData.artifact.description = \"\";\r\n            this.currentArtifact = null;\r\n\r\n            if (this.formData.version.generateMetadata == 'existing') {\r\n                this.setCreateNewVersion('create');\r\n            }\r\n\r\n        } else if (value == 'existing') {\r\n\r\n            if (!this.currentGroup.hasArtifacts) {\r\n                this.setCreateNewArtifact('create');\r\n                return;\r\n            }\r\n\r\n            if (this.currentArtifact == null) {\r\n                this.selectArtifact(this.currentGroup.artifacts[0]);\r\n            }\r\n        } else {\r\n\r\n            this.availableVersions = [];\r\n            if (this.formData.version.generateMetadata != 'none') {\r\n                this.setCreateNewVersion('none');\r\n            }\r\n        }\r\n    }\r\n\r\n    setCreateNewVersion(value) {\r\n        this.formData.version.generateMetadata = value;\r\n\r\n        if (value == 'create') {\r\n\r\n\r\n        } else if (value == 'existing') {\r\n\r\n            if (this.availableVersions.length == 0) {\r\n                this.setCreateNewVersion('create');\r\n                return;\r\n            }\r\n\r\n            this.selectVersion(this.availableVersions[0]);\r\n        }\r\n\r\n    }\r\n    currentGroupHasArtifacts() {\r\n        if (this.formData.group.generateMetadata == 'create') {\r\n            return false;\r\n        }\r\n\r\n        return this.currentGroup.artifacts != null && this.currentGroup.artifacts.length > 0;\r\n    }\r\n\r\n    initializeField(source, name, defaultValue) {\r\n        this[name] = source != null ? source[name] : defaultValue;\r\n    }\r\n\r\n    save() {\r\n\r\n        let data = {\r\n            accountData: this.accountData,\r\n            groupData: this.groupData,\r\n            artifactData: this.artifactData,\r\n            versionData: this.versionData,\r\n            formData: this.formData,\r\n        }\r\n\r\n\r\n        try {\r\n            var sessionDataString = JSON.stringify(data, function (key, value) {\r\n                if (PublishSession.sessionStorageIgnoreKeys.includes(key)) {\r\n                    return undefined;\r\n                }\r\n                return value;\r\n            });\r\n\r\n            window.sessionStorage.setItem(PublishSession.sessionStorageKey, sessionDataString);\r\n        } catch (e) {\r\n            console.log(e);\r\n        }\r\n    }\r\n\r\n    static resume($http, sub, accountData) {\r\n\r\n        var sessionData = JSON.parse(window.sessionStorage.getItem(PublishSession.sessionStorageKey));\r\n\r\n        if (sessionData == null || sessionData.sub == null) {\r\n            return null;\r\n        }\r\n\r\n        if (sub != sessionData.sub) {\r\n            return null;\r\n        }\r\n\r\n        var publishSession = new PublishSession($http, sessionData, accountData);\r\n\r\n        return publishSession;\r\n    }\r\n\r\n    onChange() {\r\n        this.validate();\r\n        this.inputs = this.dataIdCreator.createInputs();\r\n        this.save();\r\n\r\n        if (this.dataIdCreator != undefined) {\r\n            this.inputs = this.dataIdCreator.createInputs();\r\n\r\n            this.isReadyForUpload =\r\n                !this.formData.artifact.errors.length > 0 &&\r\n                !this.formData.group.errors.length > 0 &&\r\n                !this.formData.version.errors.length > 0 &&\r\n                !this.formData.files.errors.length > 0;\r\n        }\r\n    }\r\n\r\n    onChangeGroup() {\r\n\r\n        let group = this.formData.group;\r\n\r\n        group.errors = [];\r\n        group.warnings = [];\r\n\r\n        if (!DatabusUtils.isValidGroupName(group.name)) {\r\n            group.errors.push('err_invalid_group_name');\r\n        }\r\n\r\n        var existingGroup = this.groups.filter(function (value) {\r\n            return value.name == self.group.name;\r\n        });\r\n\r\n        if (existingGroup.length > 0 && group.mode == 'create') {\r\n            group.warnings.push('warning_group_exists');\r\n        }\r\n\r\n        this.save();\r\n    }\r\n\r\n    getValidString(value) {\r\n        if (value == undefined || value.length == 0) {\r\n            return undefined;\r\n        }\r\n\r\n        return value;\r\n    }\r\n\r\n    updateGroupBody() {\r\n        var accountUri = `${DATABUS_RESOURCE_BASE_URL}/${this.accountData.name}`;\r\n\r\n        this.groupBody = {\r\n            \"@context\": this.getContext(),\r\n            \"@graph\": [\r\n                {\r\n                    \"@id\": `${accountUri}/${this.formData.group.name}`,\r\n                    \"@type\": \"Group\",\r\n                    \"title\": this.getValidString(this.formData.group.title),\r\n                    \"abstract\": this.getValidString(this.formData.group.abstract),\r\n                    \"description\": this.getValidString(this.formData.group.description)\r\n                }\r\n            ]\r\n        };\r\n    }\r\n\r\n    getContext() {\r\n        if (DATABUS_CONTEXT_URL != undefined && DatabusUtils.isValidHttpUrl(DATABUS_CONTEXT_URL)) {\r\n            return DATABUS_CONTEXT_URL;\r\n        }\r\n\r\n        return DATABUS_CONTEXT[DatabusUris.JSONLD_CONTEXT];\r\n    }\r\n\r\n    onChangeArtifact() {\r\n\r\n        let artifact = this.formData.artifact;\r\n\r\n        artifact.errors = [];\r\n        artifact.warnings = [];\r\n\r\n        if (!DatabusUtils.isValidArtifactName(artifact.name)) {\r\n            artifact.errors.push('err_invalid_artifact_name');\r\n        }\r\n\r\n        if (this.artifacts != null) {\r\n            var existingArtifact = this.artifacts.filter(function (value) {\r\n                return value.name == self.group.name;\r\n            });\r\n\r\n            if (existingArtifact.length > 0 && artifact.mode == 'create') {\r\n                artifact.warnings.push('warning_group_exists');\r\n            }\r\n        }\r\n\r\n        this.save();\r\n\r\n    }\r\n}\r\n\r\nmodule.exports = PublishSession;\r\n\n\n//# sourceURL=webpack://databus-webapp/./js/publish/publish-session.js?");

/***/ }),

/***/ "./js/publish/version-handler.js":
/*!***************************************!*\
  !*** ./js/publish/version-handler.js ***!
  \***************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("const EntityHandler = __webpack_require__(/*! ./entity-handler */ \"./js/publish/entity-handler.js\");\r\nconst DatabusUtils = __webpack_require__(/*! ../utils/databus-utils */ \"./js/utils/databus-utils.js\");\r\nconst DatabusUris = __webpack_require__(/*! ../utils/databus-uris */ \"./js/utils/databus-uris.js\");\r\nconst GroupData = __webpack_require__(/*! ./group-data */ \"./js/publish/group-data.js\");\r\n\r\nclass VersionHandler extends EntityHandler {\r\n  constructor($http, $interval, accounts, apiKeys) {\r\n    super('databus_registration_version_data', $http, $interval, accounts, apiKeys);\r\n  }\r\n\r\n  initialize(data) {\r\n    const validAccount = data && this.accounts.some(acc => acc.accountName === data.accountName);\r\n\r\n    if (validAccount) {\r\n      Object.assign(this, data);\r\n    } else {\r\n      this.accountName = this.accounts[0]?.name;\r\n    }\r\n\r\n    if (this.apiKeyName == null && this.apiKeys != null && this.apiKeys.length > 0) {\r\n      this.apiKeyName = this.apiKeys[0].keyname;\r\n    }\r\n\r\n    this.pageIndex ??= 0;\r\n    this.sendmode ??= 'register';\r\n    this.files ??= [];\r\n    this.contentVariants ??= [];\r\n\r\n    if (!this.contentVariants.some(v => v.id == 'formatExtension')) {\r\n      this.contentVariants.push({\r\n        label: 'Format',\r\n        id: 'formatExtension',\r\n        custom: false\r\n      });\r\n    }\r\n\r\n    if (!this.contentVariants.some(v => v.id == 'compression')) {\r\n      this.contentVariants.push({\r\n        label: 'Compression',\r\n        id: 'compression',\r\n        custom: false\r\n      });\r\n    }\r\n\r\n    let self = this;\r\n\r\n    this.$interval(function () {\r\n      if (self.hasLicenseQueryChanged) {\r\n\r\n        self.$http.get(`/app/publish-wizard/licenses?limit=30&keyword=${self.licenseQuery}`)\r\n          .then(function (response) {\r\n            self.filteredLicenseList = response.data.results.bindings;\r\n          });\r\n\r\n        self.hasLicenseQueryChanged = false;\r\n      }\r\n\r\n    }, 300);\r\n\r\n    this.licenseQuery = \"\";\r\n    this.filterLicenses();\r\n    this.onAccountNameChanged();\r\n    this.onGroupNameChanged();\r\n    this.onArtifactNameChanged();\r\n  }\r\n\r\n  getURI() {\r\n    return `${DATABUS_RESOURCE_BASE_URL}/${this.accountName}/${this.groupName}/${this.artifactName}/${this.name}`;\r\n  }\r\n\r\n  setLicense(license) {\r\n    this.license = license;\r\n    this.onChange();\r\n  }\r\n\r\n  filterLicenses() {\r\n    this.hasLicenseQueryChanged = true;\r\n  }\r\n\r\n  validate() {\r\n    this.errors = [];\r\n    this.warnings = [];\r\n\r\n    if (!DatabusUtils.isValidVersionIdentifier(this.name)) {\r\n      this.errors.push('err_invalid_version_name');\r\n    }\r\n\r\n    if (!DatabusUtils.isValidGroupName(this.groupName)) {\r\n      this.errors.push('err_no_group_selected');\r\n    }\r\n\r\n    if (!DatabusUtils.isValidArtifactName(this.artifactName)) {\r\n      this.errors.push('err_no_artifact_selected');\r\n    }\r\n\r\n    if (!DatabusUtils.isValidVersionIdentifier(this.title)) {\r\n      this.errors.push('err_invalid_version_title');\r\n    }\r\n\r\n    if (!DatabusUtils.isValidResourceText(this.abstract, 1)) {\r\n      this.errors.push('err_invalid_version_abstract');\r\n    }\r\n\r\n    if (!DatabusUtils.isValidResourceText(this.description, 1)) {\r\n      this.errors.push('err_invalid_version_description');\r\n    }\r\n\r\n    if (!DatabusUtils.isValidUrl(this.license)) {\r\n      this.errors.push('err_invalid_version_license');\r\n    }\r\n\r\n    if (this.files.length == 0) {\r\n      this.errors.push('err_no_files');\r\n    }\r\n\r\n    for (let file of this.files) {\r\n      file.errors = [];\r\n    }\r\n\r\n    this.fileErrors = [];\r\n\r\n    this.cvSplit(this.files, 0);\r\n\r\n    for (let file of this.files) {\r\n      for (let error of file.errors) {\r\n        this.errors.push(error);\r\n        this.fileErrors.push(error);\r\n      }\r\n    }\r\n\r\n    const exists = this.artifactList?.some(a => a.name === this.name);\r\n    if (exists) {\r\n      this.warnings.push('warning_artifact_exists');\r\n    }\r\n  }\r\n\r\n  getSaveData() {\r\n    return {\r\n      accountName: this.accountName,\r\n      groupName: this.groupName,\r\n      artifactName: this.artifactName,\r\n      name: this.name,\r\n      title: this.title,\r\n      abstract: this.abstract,\r\n      description: this.description,\r\n      sendmode: this.sendmode,\r\n      apiKeyName: this.apiKeyName,\r\n      wasDerivedFrom: this.wasDerivedFrom,\r\n      attribution: this.attribution,\r\n      license: this.license,\r\n      pageIndex: this.pageIndex,\r\n      contentVariants: this.contentVariants,\r\n      files: this.files\r\n    };\r\n  }\r\n\r\n\r\n  async setGroupName(groupName) {\r\n    if (this.groupName !== groupName) {\r\n      this.groupName = groupName;\r\n      await this.onGroupNameChanged();\r\n    }\r\n  }\r\n\r\n  async onGroupNameChanged() {\r\n    this.isLoadingArtifacts = true;\r\n    this.artifactList = await this.sparqlClient.getArtifacts(this.accountName, this.groupName);\r\n    this.isLoadingArtifacts = false;\r\n    this.onChange();\r\n  }\r\n\r\n  async setArtifactName(artifactName) {\r\n    if (this.artifactName !== artifactName) {\r\n      this.artifactName = artifactName;\r\n      await this.onArtifactNameChanged();\r\n    }\r\n  }\r\n\r\n  async onArtifactNameChanged() {\r\n    this.isLoadingVersions = true;\r\n    this.versionList = await this.sparqlClient.getVersions(this.accountName, this.groupName, this.artifactName);\r\n    this.isLoadingVersions = false;\r\n    this.onChange();\r\n  }\r\n\r\n\r\n  updateOutputs() {\r\n\r\n    const artifactUri = `${DATABUS_RESOURCE_BASE_URL}/${GroupData.getStringOrMissing(this.accountName)}/${GroupData.getStringOrMissing(this.groupName)}/${GroupData.getStringOrMissing(this.artifactName)}`;\r\n    let versionUri = `${artifactUri}/${GroupData.getStringOrMissing(this.name)}`;\r\n\r\n    let graph = {\r\n      \"@id\": versionUri,\r\n      \"@type\": \"Version\",\r\n      \"title\": this.getValidString(this.title),\r\n      \"abstract\": this.getValidString(this.abstract),\r\n      \"description\": this.getValidString(this.description),\r\n      \"license\": this.getValidString(this.license),\r\n      \"attribution\": this.getValidString(this.attribution),\r\n      \"wasDerivedFrom\": this.getValidString(this.wasDerivedFrom),\r\n    }\r\n\r\n    graph.distribution = [];\r\n\r\n\r\n    let customVariants = [];\r\n\r\n    for (var fg in this.files) {\r\n\r\n      var file = this.files[fg];\r\n\r\n      var variantSuffix = '';\r\n      for (var c in this.contentVariants) {\r\n        var cv = this.contentVariants[c];\r\n        var value = file.contentVariants[cv.id];\r\n\r\n        if (value == undefined || value == \"\") {\r\n          continue;\r\n        }\r\n\r\n        variantSuffix += '_' + cv.id + '=' + value;\r\n      }\r\n\r\n      let fileName = this.artifactName;\r\n\r\n      var distributionUri = `${versionUri}#${fileName}`;\r\n      var fileUri = `${versionUri}/${fileName}${variantSuffix}`;\r\n\r\n      distributionUri += variantSuffix;\r\n\r\n      let formatExtension = this.getValidString(file.contentVariants['formatExtension']);\r\n\r\n      if (formatExtension == undefined) {\r\n        formatExtension = 'none';\r\n      }\r\n\r\n      if (formatExtension != 'none') {\r\n        distributionUri += '.' + formatExtension;\r\n        fileUri += '.' + formatExtension;\r\n      }\r\n\r\n      let compression = this.getValidString(file.contentVariants['compression']);\r\n\r\n      if (compression == undefined) {\r\n        compression = 'none';\r\n      }\r\n\r\n      if (compression != 'none') {\r\n        distributionUri += '.' + compression;\r\n        fileUri += '.' + compression;\r\n      }\r\n\r\n      var distribution = {\r\n        \"@type\": \"Part\",\r\n        \"formatExtension\": formatExtension,\r\n        \"compression\": compression,\r\n        \"downloadURL\": file.uri,\r\n        \"byteSize\": file.byteSize,\r\n        \"sha256sum\": file.sha256sum,\r\n      };\r\n\r\n      for (var c in this.contentVariants) {\r\n        var cv = this.contentVariants[c];\r\n\r\n        if (!cv.custom) {\r\n          continue;\r\n        }\r\n\r\n        var value = file.contentVariants[cv.id];\r\n\r\n        if (value == undefined || value == \"\") {\r\n          continue;\r\n        }\r\n\r\n        distribution['dcv:' + cv.id] = value;\r\n\r\n        if (!customVariants.includes(cv.id)) {\r\n          customVariants.push(cv.id);\r\n        }\r\n      }\r\n\r\n      graph.distribution.push(distribution);\r\n    }\r\n\r\n\r\n\r\n\r\n    this.postBody = {\r\n      \"@context\": this.getContext(),\r\n      \"@graph\": [\r\n        graph\r\n      ]\r\n    };\r\n\r\n\r\n\r\n    const payload = JSON.stringify(this.postBody, null, 2);\r\n    const apiKey = this.apiKeys?.find(k => k.keyname === this.apiKeyName)?.apikey;\r\n\r\n    this.curlCommand = [\r\n      `curl -X POST ${DATABUS_RESOURCE_BASE_URL}/api/register \\\\`,\r\n      `  -H \"X-API-KEY: ${GroupData.getStringOrMissing(apiKey)}\" \\\\`,\r\n      `  -H \"Content-Type: application/json\" \\\\`,\r\n      `  -d '${payload}'`\r\n    ].join('\\n');\r\n  }\r\n\r\n  createVersionName(v) {\r\n    if (v == 0) {\r\n      this.name = new Date().toISOString().slice(0, 10);\r\n    }\r\n\r\n    if (v == 1) {\r\n      this.name = new Date().toISOString().slice(0, 13);\r\n    }\r\n\r\n    this.onChange();\r\n  }\r\n\r\n  changePage(diff) {\r\n    this.pageIndex = Math.max(0, this.pageIndex + diff);\r\n    this.onChange();\r\n  };\r\n\r\n  addContentVariant(variant) {\r\n\r\n    if (variant == undefined || variant == '') {\r\n      return;\r\n    }\r\n\r\n    if (this.contentVariants == undefined) {\r\n      this.contentVariants = [];\r\n    }\r\n\r\n    for (var c in this.contentVariants) {\r\n      if (this.contentVariants[c].id == variant) {\r\n        return;\r\n      }\r\n    }\r\n\r\n    this.contentVariants.push({\r\n      label: variant,\r\n      id: variant,\r\n      fillRegex: '',\r\n      toLower: true,\r\n      pruneWhitespaces: true,\r\n      custom: true,\r\n    });\r\n\r\n    this.onChange();\r\n  }\r\n\r\n\r\n  removeContentVariant(variant) {\r\n    this.contentVariants = this.contentVariants.filter(function (d) {\r\n      return d.id != variant.id;\r\n    });\r\n\r\n    for (var f in this.files) {\r\n      var file = this.files[f];\r\n      delete file.contentVariants[variant.id];\r\n    }\r\n\r\n    this.onChange();\r\n  }\r\n\r\n  addFiles(input) {\r\n    var lines = input.split('\\n');\r\n    for (var line of lines) {\r\n      if (line != undefined && line.length > 0) {\r\n        this.addFile(line);\r\n      }\r\n    }\r\n  }\r\n\r\n  addFile(file) {\r\n\r\n    if (typeof file === 'string') {\r\n      file = { url: file };\r\n    }\r\n\r\n    if (this.files == undefined) {\r\n      this.files = [];\r\n    }\r\n\r\n    // Check if already added\r\n    for (var f in this.files) {\r\n      if (file.url == this.files[f].url) {\r\n        return;\r\n      }\r\n    }\r\n\r\n    var uri = file.url;\r\n    var uriParts = uri.split('/');\r\n    var name = uriParts.pop();\r\n    var nameComponents = name.split('.');\r\n    name = nameComponents[0];\r\n\r\n    if (name.length > 50) {\r\n      name = name.substr(0, 50) + '...';\r\n    }\r\n\r\n    name = decodeURIComponent(name);\r\n    // Files with uri as key!!\r\n\r\n    this.files.push({\r\n      id: uri,\r\n      uri: file.url,\r\n      name: name,\r\n      contentVariants: file.contentVariants != null ? file.contentVariants : {},\r\n      rowspan: 1,\r\n    });\r\n\r\n    this.files.sort(function (a, b) {\r\n      var nameA = a.name;\r\n      var nameB = b.name;\r\n\r\n      if (nameA < nameB) {\r\n        return -1;\r\n      }\r\n      if (nameA > nameB) {\r\n        return 1;\r\n      }\r\n\r\n      return 0;\r\n    });\r\n\r\n    let k = 1;\r\n\r\n    for (let file of this.files) {\r\n      file.rowIndex = k++;\r\n    }\r\n\r\n    this.onChange();\r\n  }\r\n\r\n  removeFile = function (file, index) {\r\n    this.files.splice(index, 1);\r\n    this.onChange();\r\n  }\r\n\r\n  getRowIndex(files, name) {\r\n    var k = 1;\r\n    for (var f in files) {\r\n      if (files[f].name == name) {\r\n        return k;\r\n      }\r\n\r\n      k++;\r\n    }\r\n\r\n    return -1;\r\n  }\r\n\r\n\r\n  cvSplit(files, cvIndex) {\r\n\r\n    if (files.length <= 1) {\r\n      return;\r\n    }\r\n\r\n    if (this.contentVariants == undefined) {\r\n      this.contentVariants = [];\r\n    }\r\n    // if end of cvs, assign errors to all files if files.length > 1\r\n    if (cvIndex - 2 >= this.contentVariants.length) {\r\n\r\n      if (files.length > 1) {\r\n\r\n        var cvHints = [];\r\n\r\n        if (this.contentVariants.length == 0) {\r\n          cvHints.push('No content variants have been added yet. Add content variants in the files panel in order to tag your files.');\r\n        } else {\r\n          for (var c in this.contentVariants) {\r\n            var cv = this.contentVariants[c];\r\n            var value = files[0].contentVariants[cv.id];\r\n\r\n            if (value == undefined || value == '') {\r\n              value = 'none';\r\n            }\r\n\r\n            cvHints.push(cv.id + ': ' + value);\r\n          }\r\n        }\r\n\r\n        for (let file of files) {\r\n\r\n          var errorMessage = 'Row ' + file.rowIndex + ' (' +\r\n            cvHints.join(', ') + ').';\r\n\r\n          file.errors.push({ key: 'err_duplicate_file', message: errorMessage });\r\n        }\r\n      }\r\n\r\n      return;\r\n    }\r\n\r\n    // else create buckets and sort files into buckets\r\n    var buckets = {};\r\n\r\n    for (var f in files) {\r\n      var file = files[f];\r\n\r\n      var key = null;\r\n\r\n      if (cvIndex == 0) {\r\n        key = file.formatExtension;\r\n      } else if (cvIndex == 1) {\r\n        key = file.compression;\r\n      } else {\r\n        key = file.contentVariants[this.contentVariants[cvIndex - 2].id];\r\n      }\r\n\r\n      if (key == undefined || key == '') {\r\n        key = '$_none$';\r\n      }\r\n\r\n      if (buckets[key] == undefined) {\r\n        buckets[key] = [];\r\n      }\r\n\r\n      buckets[key].push(file);\r\n    }\r\n\r\n    // iterate buckets and call recursively\r\n    for (var b in buckets) {\r\n      this.cvSplit(buckets[b], cvIndex + 1);\r\n    }\r\n  }\r\n\r\n  onEditContentVariant(index) {\r\n    this.editContentVariant = this.contentVariants[index];\r\n  }\r\n\r\n}\r\n\r\nmodule.exports = VersionHandler;\r\n\n\n//# sourceURL=webpack://databus-webapp/./js/publish/version-handler.js?");

/***/ }),

/***/ "./js/query-builder/query-builder.js":
/*!*******************************************!*\
  !*** ./js/query-builder/query-builder.js ***!
  \*******************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("const QueryNode = __webpack_require__(/*! ./query-node */ \"./js/query-builder/query-node.js\");\n\nclass QueryBuilder {\n\n  static build(config) {\n    var builder = new QueryBuilder();\n    return builder.createQuery(config.node, config.template, config.resourceBaseUrl, config.root);\n  }\n\n\n  isValidHttpUrl(string) {\n    let url;\n\n    try {\n      url = new URL(string);\n    } catch (_) {\n      return false;\n    }\n\n    return url.protocol === \"http:\" || url.protocol === \"https:\";\n  }\n\n  uniqueList(arr) {\n    var u = {}, a = [];\n    for (var i = 0, l = arr.length; i < l; ++i) {\n      if (!u.hasOwnProperty(arr[i])) {\n        a.push(arr[i]);\n        u[arr[i]] = 1;\n      }\n    }\n    return a;\n  }\n\n  createQuery(node, template, resourceBaseUrl, root) {\n\n    this.result = '';\n    this.baseNode = node;\n    this.root = root != undefined ? root : node;\n    this.cvCounter = 0;\n    this.resourceBaseUrl = resourceBaseUrl;\n    this.select = template.select;\n    this.template = template.body;\n    this.templateInsertionKey = template.placeholder != undefined ? template.placeholder : `%QUERY%`;\n    this.prefixes = template.prefixes;\n    this.aggregate = template.aggregate;\n    this.stringSuffix = '';\n\n    this.appendLine(this.select, 0);\n    this.appendLine(`{`, 0);\n    this.createNodeSubquery(node, template.indent, false);\n    this.appendLine(`}`, 0);\n\n    if (this.aggregate != undefined) {\n      this.appendLine(this.aggregate, 0);\n    }\n\n    this.prependPrefixes();\n    return this.result;\n  }\n\n  removeAndCollectPrefixes(query) {\n    var lines = query.split('\\n');\n    var result = \"\";\n\n    for (var line of lines) {\n      if (line.toLowerCase().startsWith('prefix')) {\n        this.prefixes.push(line);\n      } else {\n        result += line + '\\n';\n      }\n    }\n\n    return result.substring(0, result.length - 1);\n  }\n\n  prependPrefixes() {\n\n    this.prefixes = this.uniqueList(this.prefixes);\n\n    for (var line of this.prefixes) {\n      this.prependLine(line, 0);\n    }\n  }\n\n  appendTemplateHeader(indent) {\n    for (var line of this.template) {\n\n      if (line == this.templateInsertionKey) {\n        break;\n      }\n\n      this.appendLine(line, indent);\n    }\n  }\n\n  appendTemplateFooter(indent) {\n    var write = false;\n\n    for (var line of this.template) {\n\n      if (write) {\n        this.appendLine(line, indent);\n      }\n\n      if (line == this.templateInsertionKey) {\n        write = true;\n      }\n    }\n  }\n\n  appendTemplate(node, indent) {\n\n    this.appendTemplateHeader(indent);\n    this.createNodeSubquery(node, indent + 1, true);\n\n    if (node.property == null && node.childNodes.length == 0) {\n      this.appendLine(`?distribution a dataid:Nonsense .`, indent + 1)\n    }\n\n    this.appendTemplateFooter(indent);\n  }\n\n  /**\n   * Create a subquery for any query node. The subquery consist of the node facets and\n   * a UNION of child node queries (this function is called revursively on the child nodes)\n   * @param {*} node \n   */\n  createNodeSubquery(node, indent, hasService) {\n    // Initialize empty result\n\n    if (hasService == undefined) {\n      hasService = false;\n    }\n\n    // Get source...\n    var sourceUri = this.findSourceUri(node);\n\n    if (!hasService && sourceUri != null) {\n\n      if (sourceUri != this.resourceBaseUrl) {\n        this.appendLine(`SERVICE <${sourceUri}/sparql>`, indent);\n        this.appendLine(`{`, indent);\n\n        this.appendTemplate(node, indent + 1);\n        this.appendLine(`}`, indent);\n\n      } else {\n        this.appendTemplate(node, indent);\n      }\n\n      return;\n    }\n\n    if (node.uri != null) {\n\n      if (!this.isValidHttpUrl(node.uri)) {\n\n        // Custom query node\n        var query = this.removeAndCollectPrefixes(node.property);\n        var lines = query.split('\\n');\n        for (var line of lines) {\n          this.appendLine(line, indent);\n        }\n\n        return;\n      }\n    }\n\n    // If a node property was set, add it as a restriction\n    if (node.property != undefined) {\n      this.appendLine(`?dataset ${node.property} <${node.uri}> .`, indent);\n      // If no property was set, we are dealing with a source node\n    } else {\n\n    }\n\n    // Create the node facets sub query \n    this.createNodeFacetsSubquery(node, indent);\n\n    // Call recursively on the children and UNION the results\n\n    var k = 0;\n\n    for (var i in node.childNodes) {\n      if (k > 0) this.appendLine('UNION', indent);\n\n      if (node.childNodes[i].childNodes == null) {\n        return;\n      }\n\n      if (node.childNodes[i].property == undefined && node.childNodes[i].childNodes.length == 0) {\n        continue;\n      }\n\n      this.appendLine('{', indent);\n      this.createNodeSubquery(node.childNodes[i], indent + 1, hasService);\n      this.appendLine('}', indent);\n      k++\n    }\n\n    return this.result;\n  }\n\n  findSourceUri(node) {\n    if (node.uri == null) {\n      return null;\n    }\n\n    if (!this.isValidHttpUrl(node.uri)) {\n      return null;\n    }\n\n    var url = new URL(node.uri);\n    return url.origin;\n  }\n\n  /**\n   * Create restrictions that only occur on this node and none of its children\n   * Added restriction have to be enriched with their parent node settings\n   * @param {*} groupNode \n   */\n  createNodeFacetsSubquery(node, indent) {\n\n    var facetUris = this.findAllNodeFacets(node);\n\n    // Iterate over all the facet settings of the node\n    for (var i in facetUris) {\n\n      var facetUri = facetUris[i];\n\n      // We only add facets to the node if the facet is not overriden by any child nodes\n      if (!this.hasFacetOverride(node, facetUri)) {\n\n        // We create the subquery while merging the facet settings from this node to the root of the query tree\n        this.createFacetSubquery(node, facetUri, indent);\n      }\n    }\n  }\n\n  // Check whether any child node of the passed node overrides a specific facet\n  hasFacetOverride(node, facetUri) {\n\n    // If we don't have any children, there are no overrides\n    if (node.childNodes.length == 0) {\n      return false;\n    }\n\n    // ======= SPECIAL TREATMENT OF VERSION/LATEST =======\n    // Treat as if overriden (leaf nodes already excluded)\n    // ===================================================\n    if (facetUri == 'http://purl.org/dc/terms/hasVersion') {\n      for (var i in node.facetSettings[facetUri]) {\n        if (node.facetSettings[facetUri][i].value == '$latest') {\n          return true;\n        }\n      }\n    }\n\n    // Iterate through the child nodes\n    for (var i in node.childNodes) {\n      var childNode = node.childNodes[i];\n\n      // If the child node overrides the facet then yes, we have an override\n      if (childNode.facetSettings[facetUri] != undefined) {\n        return true;\n      }\n\n      // If any of the child node's children has an override, we have an override\n      if (this.hasFacetOverride(childNode, facetUri)) {\n        return true;\n      }\n    }\n\n    // Nothing found in the children? No override!\n    return false;\n  }\n\n  /**\n   * Generates the sub query for a specific node and facet\n   * @param {*} node \n   * @param {*} facetUri \n   */\n  createFacetSubquery(node, facetUri, indent) {\n    var first = true;\n\n\n    // If we add a facet setting, we have to include the facets of all the ancestor nodes\n    var settings = this.createEnrichedSettings(node, facetUri);\n    settings = settings.filter(function (s) {\n      return s.checked;\n    });\n\n    if (settings.length == 1) {\n      var facetSettingEntry = settings[0];\n      if (!facetSettingEntry.checked) return;\n\n      if (facetSettingEntry.value == '$latest' && facetUri == 'http://purl.org/dc/terms/hasVersion') {\n        // Add the special latest version facet value restriction.\n        this.appendLine('{', indent);\n        this.appendLine('?distribution dct:hasVersion ?version {', indent + 1);\n        this.appendLine('SELECT (?v as ?version) { ', indent + 2);\n        this.appendLine('GRAPH ?g2 { ', indent + 3);\n        this.appendLine(`?dataset ${node.property} <${node.uri}> . `, indent + 4);\n        this.appendLine('?dataset dct:hasVersion ?v . ', indent + 4);\n        this.appendLine('}', indent + 3);\n        this.appendLine('} ORDER BY DESC (STR(?version)) LIMIT 1 ', indent + 2);\n        this.appendLine('}', indent + 1);\n        this.appendLine('}', indent);\n      }\n      else {\n        // Add the facet value restriction\n        this.appendLine(`{ ?distribution <${facetUri}> '${facetSettingEntry.value}'${this.stringSuffix} . }`, indent);\n      }\n    }\n    else if (settings.length > 1) {\n\n      // More than one value for this facet\n\n      if (facetUri == 'http://purl.org/dc/terms/hasVersion') {\n\n        // Iterate..\n        for (var i in settings) {\n\n          var facetSettingEntry = settings[i];\n          if (!facetSettingEntry.checked) continue;\n\n          if (!first) this.appendLine(\"UNION\", indent);\n\n          if (facetSettingEntry.value == '$latest' && facetUri == 'http://purl.org/dc/terms/hasVersion') {\n            // Add the special latest version facet value restriction.\n            this.appendLine('{', indent);\n            this.appendLine('?distribution dct:hasVersion ?version {', indent + 1);\n            this.appendLine('SELECT (?v as ?version) { ', indent + 2);\n            this.appendLine('GRAPH ?g2 { ', indent + 3);\n            this.appendLine(`?dataset ${node.property} <${node.uri}> . `, indent + 4);\n            this.appendLine('?dataset dct:hasVersion ?v . ', indent + 4);\n            this.appendLine('}', indent + 3);\n            this.appendLine('} ORDER BY DESC (STR(?version)) LIMIT 1 ', indent + 2);\n            this.appendLine('}', indent + 1);\n            this.appendLine('}', indent);\n          }\n          else {\n            // Add the facet value restriction\n            this.appendLine(`{ ?distribution <${facetUri}> '${facetSettingEntry.value}'${this.stringSuffix} . }`, indent);\n          }\n\n          // If we have more than one value for this facet we need a UNION\n          first = false;\n        }\n\n      } else {\n        this.appendLine('{', indent);\n        this.appendLine(`?distribution <${facetUri}> ?c${this.cvCounter} .`, indent + 1);\n        this.appendLine(`VALUES ?c${this.cvCounter} {`, indent + 1);\n\n        for (var i in settings) {\n          var facetSettingEntry = settings[i];\n          if (!facetSettingEntry.checked) continue;\n          this.appendLine(`'${facetSettingEntry.value}'${this.stringSuffix}`, indent + 2);\n        }\n        this.appendLine(`}`, indent + 1);\n        this.appendLine(`}`, indent);\n        this.cvCounter++;\n      }\n    }\n  }\n\n  /**\n   * Create a list of all the node facets and all overriden ancestor facets that might not be explicitly\n   * included in the node facet list\n   * @param {*} node \n   */\n  findAllNodeFacets(node) {\n    var facetUris = [];\n\n    for (var facetUri in node.facetSettings) {\n      facetUris.push(facetUri);\n    }\n\n    var parentNode = QueryNode.findParentNodeRecursive(this.root, node); // node.parent;\n\n    while (parentNode != undefined) {\n\n      for (var facetUri in parentNode.facetSettings) {\n\n        // check the base node -> if current node is the base, include all parent facets\n        // on the way too the root\n        if (node != this.baseNode && !this.hasFacetOverride(parentNode, facetUri)) {\n          continue;\n        }\n\n\n        if (facetUris.includes(facetUri)) {\n          continue;\n        }\n\n        facetUris.push(facetUri);\n      }\n\n      parentNode = QueryNode.findParentNodeRecursive(this.root, parentNode); // parentNode.parent;\n    }\n\n    return facetUris;\n  }\n\n  /**\n   * For a given facet, add up all the active settings up to the root node of the\n   * query tree. Node settings override ancestor node settings.\n   * @param {*} node \n   * @param {*} facetUri \n   */\n  createEnrichedSettings(node, facetUri) {\n    var result = [];\n    for (var i in node.facetSettings[facetUri]) {\n      result.push(node.facetSettings[facetUri][i]);\n    }\n\n    var parentNode = QueryNode.findParentNodeRecursive(this.root, node); // node.parent;\n\n    while (parentNode != undefined) {\n\n      for (var i in parentNode.facetSettings[facetUri]) {\n        var parentSetting = parentNode.facetSettings[facetUri][i];\n        var hasSetting = false;\n        for (var j in result) {\n          if (result[j].value == parentSetting.value) {\n            hasSetting = true;\n            break;\n          }\n        }\n\n        if (!hasSetting) {\n          result.push(parentSetting);\n        }\n      }\n\n      parentNode = QueryNode.findParentNodeRecursive(this.root, parentNode); //parentNode.parent;\n    }\n\n\n    return result;\n  }\n\n  /**\n   * Appens a line to the global result prepending a specified number of tab characters\n   * @param {*} line \n   * @param {*} indent \n   */\n  appendLine(line, indent) {\n    for (var i = 0; i < indent; i++) this.result += '\\t';\n    this.result += line;\n    this.result += '\\n';\n  }\n\n  /**\n   * Appens a line to the global result prepending a specified number of tab characters\n   * @param {*} line \n   * @param {*} indent \n   */\n  prependLine(line, indent) {\n    var text = '';\n    for (var i = 0; i < indent; i++) text += '\\t';\n    text += line;\n    this.result = text + '\\n' + this.result;\n  }\n}\n\nmodule.exports = QueryBuilder;\n\n\n//# sourceURL=webpack://databus-webapp/./js/query-builder/query-builder.js?");

/***/ }),

/***/ "./js/query-builder/query-node.js":
/*!****************************************!*\
  !*** ./js/query-builder/query-node.js ***!
  \****************************************/
/***/ ((module) => {

eval("/**\n * A query node is a node in a query tree. A query tree can be built for any hierarchical selection\n * on the databus, such as publishers, groups, artifacts and collections.\n * Each node may declare a range of restrictions. Restrictions can then be overriden again by\n * any child node in the hierarchy.\n * \n * EXAMPLE: Group node says: Select everything in English. One specific artifact child node of the\n * group node then states: I don't want to select English, I will select German. \n * \n * A query tree can then be translated into a SPARQL query that tries to use as few statements as possible\n * to fetch the desired data\n */\nclass QueryNode {\n\n  /**\n   * Creates a new QueryNode with a resource URI and a property. The property will be added to the\n   * query as a forced and non-overrideable restriction\n   * @param {*} uri \n   * @param {*} property \n   */\n  constructor(uri, property) {\n    this.uri = uri;\n    this.property = property;\n    this.childNodes = [];\n    this.facetSettings = {};\n  }\n\n  // Set or unset a facet of the query node\n  setFacet(key, value, checked) {\n\n    var list = this.facetSettings[key];\n\n    if(list == undefined) {\n      this.facetSettings[key] = [];\n      list = this.facetSettings[key];\n    }\n\n    if(!this.isOverride(key, value, checked)) {\n      \n      for(var i = 0; i < list.length; i++) {\n        if(list[i].value == value) {\n          list.splice(i, 1);\n        }\n      }\n\n      if(list.length == 0) {\n        delete this.facetSettings[key];\n      }\n      \n      return;\n    }\n\n    for(var i in list) {\n      if(list[i].value == value) {\n        list[i].checked = checked;\n        return;\n      }\n    }\n   \n    list.push({ value : value, checked : checked });\n  }\n\n  \n\n  /**\n   * Check whether a certain facet setting is an override in the hierarchy\n   * @param {*} key \n   * @param {*} value \n   * @param {*} checked \n   */\n  isOverride(key, value, checked) {\n\n    if(checked == undefined) {\n      var setting = QueryNode.findFacetSetting(this, key, value);\n      checked = setting != null ? setting.checked : false;\n    }\n\n    var parentSetting = QueryNode.findInheritedSetting(this.parent, key, value);\n\n    if(parentSetting == undefined) {\n      return checked;\n    }\n\n    return parentSetting.checked != checked;\n  }\n\n  /**\n   * Add a child node to this node\n   * @param {*} node \n   */\n  addChild(node) {\n    this.childNodes.push(node);\n    // node.parent = this;\n  }\n\n  static removeChildByUri(node, uri) {\n    for(var i = 0; i < node.childNodes.length; i++) {\n      if(node.childNodes[i].uri == uri) {\n        node.childNodes.splice(i, 1);\n        return;\n      }\n\n      QueryNode.removeChildByUri(node.childNodes[i], uri);\n    }\n  }\n\n  static findChildByUri(node, uri) {\n    for(let i = 0; i < node.childNodes.length; i++) {\n      if(node.childNodes[i].uri === uri) {\n        node.childNodes[i] = QueryNode.createFrom(node.childNodes[i]);\n        return node.childNodes[i];\n      }\n\n      let result = QueryNode.findChildByUri(node.childNodes[i], uri);\n\n      if(result != null) {\n        return result;\n      }\n    }\n\n    return null;  \n  }\n\n  hasFacetSetting(key, value) {\n    for(var i in this.facetSettings[key]) {\n\n      var setting = this.facetSettings[key][i];\n\n      if(setting.value == value) {\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n   /**\n   * Create a settings object with all the facet settings active for this node (inluding inherited settings)\n   * @param {*} node \n   */\n  createFullFacetSettings() {\n    \n    var fullSettings = {};\n\n    for(var facetUri in this.facetSettings) {\n      fullSettings[facetUri] = JSON.parse(JSON.stringify(this.facetSettings[facetUri]));\n    }\n\n    var parentNode = this.parent;\n\n    while(parentNode != undefined) {\n\n      for(var facetUri in parentNode.facetSettings) {\n\n        if(fullSettings[facetUri] == undefined) {\n          fullSettings[facetUri] = [];\n        }\n        \n        for(var i in parentNode.facetSettings[facetUri]) {\n\n          var parentSetting = parentNode.facetSettings[facetUri][i];\n\n          if(!this.hasFacetSetting(facetUri, parentSetting.value)) {\n            fullSettings[facetUri].push(JSON.parse(JSON.stringify(parentSetting)));\n          }\n        }\n      }\n\n      parentNode = parentNode.parent;\n    }\n\n    return fullSettings;\n  }\n\n  static serialize(queryNode) {\n    // QueryNode.clearParents(queryNode);\n    var result = JSON.stringify(queryNode);\n    // QueryNode.assignParents(queryNode);\n    return result;\n  }\n\n\n  static addChild(node, child) {\n    node.childNodes.push(child);\n    // child.parent = node;\n  }\n\n  static mergeAddChild(root, child) {\n    var existingNode = QueryNode.findChildByUri(root, child.uri);\n\n    if(existingNode == null) {\n      QueryNode.addChild(root, child); \n      return true;\n    }\n\n    if(child.childNodes.length == 0) {\n      return false;\n    }\n\n    for(var i in child.childNodes) {\n      QueryNode.mergeAddChild(existingNode, child.childNodes[i]);\n    }\n  }\n\n  /*\n  static clearParents(queryNode) {\n    queryNode.parent = null;\n    for(var i = 0; i < queryNode.childNodes.length; i++) {\n      QueryNode.clearParents(queryNode.childNodes[i]);\n    }\n  }\n\n  static assignParents(queryNode) {\n    for(var i = 0; i < queryNode.childNodes.length; i++) {\n      queryNode.childNodes[i].parent = queryNode;\n      QueryNode.assignParents(queryNode.childNodes[i]);\n    }\n  }\n*/\n\n  static expandAll(queryNode) {\n    queryNode.expanded = true;\n    for(var i = 0; i < queryNode.childNodes.length; i++) {\n      QueryNode.expandAll(queryNode.childNodes[i]);\n    }\n  }\n\n  static findParentNodeRecursive(parent, node) {\n\n    if(node.uri == null) {\n      return null;\n    }\n    \n    if(parent.childNodes == null || parent.childNodes.length == 0) {\n      return null;\n    }\n\n    for(var child of parent.childNodes) {\n      if(child.uri == node.uri) {\n        return parent;\n      }\n    }     \n    \n    for(var child of parent.childNodes) {\n      var recParent = QueryNode.findParentNodeRecursive(child, node);\n\n      if(recParent != null) {\n        return recParent;\n      }\n    }\n\n    return null;\n  }\n\n  /**\n   * Copy constructor to use the QueryNode class inside of angular components\n   * @param {*} obj \n   */\n  static createFrom(obj) {\n    var tmpNode = new QueryNode(obj.uri, obj.property);\n    tmpNode.childNodes = obj.childNodes;\n    tmpNode.facetSettings = obj.facetSettings;\n    // tmpNode.parent = obj.parent;\n    tmpNode.files = obj.files;\n    return tmpNode;\n  }\n\n  static createSubTree(obj) {\n    var node = QueryNode.createFrom(obj);\n    node.facetSettings = node.createFullFacetSettings();\n    // node.parent = null;\n    return node;\n  }\n\n  /**\n   * Search a specific node for a certain facet setting\n   * @param {*} node \n   * @param {*} key \n   * @param {*} value \n   */\n  static findFacetSetting(node, key, value) {\n    if(node == undefined || node.facetSettings == undefined) {\n      return undefined;\n    }\n\n    var settingsList = node.facetSettings[key];\n\n    if(settingsList == undefined) {\n      return undefined;\n    }\n\n    for(var i in settingsList) {\n      var setting = settingsList[i];\n\n      if(setting.value == value) {\n        return setting;\n      }\n    }\n\n    return undefined;\n  }\n\n  static findInheritedSetting(node, key, value) {\n    \n    if(node == null) {\n      return undefined;\n    }\n\n    var setting = QueryNode.findFacetSetting(node, key, value);\n\n    if(setting == undefined) {\n      return QueryNode.findInheritedSetting(node.parent, key, value);\n    }\n\n    return setting;\n  }\n}\n\nmodule.exports = QueryNode;\n\n\n//# sourceURL=webpack://databus-webapp/./js/query-builder/query-node.js?");

/***/ }),

/***/ "./js/query-builder/query-templates.js":
/*!*********************************************!*\
  !*** ./js/query-builder/query-templates.js ***!
  \*********************************************/
/***/ ((module) => {

eval("/**\n * Query Templates can be defined as object with the fields:\n * > select\n * > body\n * > aggregate\n * \n * The select is a SPARQL select statement. The body is an array of strings with each string being a line of a \n * SPARQL query. The string %QUERY% can be used to insert the query generated by the QueryBuilder. The aggregate\n * is a SPARQL aggregate statement.\n */\n class QueryTemplates {\n\n  static DEFAULT_PREFIXES = [\n    `PREFIX databus: <https://dataid.dbpedia.org/databus#>`,\n    `PREFIX dcv: <https://dataid.dbpedia.org/databus-cv#>`,\n    `PREFIX dct:    <http://purl.org/dc/terms/>`,\n    `PREFIX dcat:   <http://www.w3.org/ns/dcat#>`,\n    `PREFIX rdf:    <http://www.w3.org/1999/02/22-rdf-syntax-ns#>`,\n    `PREFIX rdfs:   <http://www.w3.org/2000/01/rdf-schema#>`\n  ];\n\n  static COLLECTION_TABLE_ROW_QUERY = `\nPREFIX databus: <https://dataid.dbpedia.org/databus#>\nPREFIX dcv: <https://dataid.dbpedia.org/databus-cv#>\nPREFIX dct:    <http://purl.org/dc/terms/>\nPREFIX dcat:   <http://www.w3.org/ns/dcat#>\nPREFIX rdf:    <http://www.w3.org/1999/02/22-rdf-syntax-ns#>\nPREFIX rdfs:   <http://www.w3.org/2000/01/rdf-schema#>\n\nSELECT ?file SAMPLE(?version) SAMPLE(?title) SAMPLE(?abstract) SAMPLE(?license) SAMPLE(?size) SAMPLE(?format) SAMPLE(?compression) (GROUP_CONCAT(DISTINCT ?var; SEPARATOR=', ') AS ?variant) WHERE {\n  <%DISTRIBUTION%> databus:file ?file .\n  <%DISTRIBUTION%> databus:formatExtension ?format .\n  <%DISTRIBUTION%> databus:compression ?compression .\n  <%DISTRIBUTION%> dcat:byteSize ?size .\n  ?version dcat:distribution <%DISTRIBUTION%> .\n  ?version dct:title ?title .\n  ?version dct:abstract ?abstract.\n  ?version dct:license ?license .\n\n  OPTIONAL { <%DISTRIBUTION%> ?p  ?var. ?p rdfs:subPropertyOf databus:contentVariant . }\n} GROUP BY ?file\n`;\n\nstatic COLLECTION_TABLE_QUERY = `\nPREFIX databus: <https://dataid.dbpedia.org/databus#>\nPREFIX dcv: <https://dataid.dbpedia.org/databus-cv#>\nPREFIX dct:    <http://purl.org/dc/terms/>\nPREFIX dcat:   <http://www.w3.org/ns/dcat#>\nPREFIX rdf:    <http://www.w3.org/1999/02/22-rdf-syntax-ns#>\nPREFIX rdfs:   <http://www.w3.org/2000/01/rdf-schema#>\n\nSELECT ?distribution SAMPLE(?file) AS ?file SAMPLE(?version) AS ?version SAMPLE(?title) AS ?title SAMPLE(?abstract) AS ?abstract SAMPLE(?license) AS ?license SAMPLE(?size) AS ?size SAMPLE(?format) AS ?format SAMPLE(?compression) AS ?compression (GROUP_CONCAT(DISTINCT ?var; SEPARATOR=', ') AS ?variant) WHERE {\n  VALUES ?distribution {\n    %DISTRIBUTIONS%\n  }\n  ?distribution databus:file ?file .\n  ?distribution databus:formatExtension ?format .\n  ?distribution databus:compression ?compression .\n  ?distribution dcat:byteSize ?size .\n  ?version dcat:distribution ?distribution .\n  ?version dct:title ?title .\n  ?version dct:abstract ?abstract.\n  ?version dct:license ?license .\n  OPTIONAL { ?distribution ?p  ?var. ?p rdfs:subPropertyOf databus:contentVariant . }\n} GROUP BY ?distribution\n`;\n\n  static COLLECTION_STATISTICS_TEMPLATE = {\n    indent: 1,\n    prefixes: QueryTemplates.DEFAULT_PREFIXES,\n    select: `SELECT DISTINCT ?dataset ?file ?license ?size WHERE`,\n    body: [\n      `GRAPH ?g`,\n      `{`,\n      `%QUERY%`,\n      `\\t?dataset dcat:distribution ?distribution .`,\n      `\\t?distribution databus:file ?file .`,\n      `\\tOPTIONAL { ?dataset dct:license ?license . }`,\n      `\\tOPTIONAL { ?distribution dcat:byteSize ?size . }`,\n      `}`\n    ]\n  };\n\n  static COLLECTION_FILES_TEMPLATE = {\n    prefixes: QueryTemplates.DEFAULT_PREFIXES,\n    indent: 1,\n    select: `SELECT DISTINCT ?version ?dataset ?distribution ?title ?description (GROUP_CONCAT(DISTINCT ?file; SEPARATOR=\", \") AS ?files) ?license ?size ?format (GROUP_CONCAT(DISTINCT ?var; SEPARATOR=', ') AS ?variant) WHERE`,\n    body: [\n      `GRAPH ?g`,\n      `{`,\n      `%QUERY%`,\n      `\\t?distribution databus:file ?file .`,\n      `\\t?distribution databus:formatExtension ?format .`,\n      `\\tOPTIONAL { ?distribution ?p  ?var. ?p rdfs:subPropertyOf databus:contentVariant . }`,\n      `\\tOPTIONAL { ?dataset dct:license ?license . }`,\n      `\\tOPTIONAL { ?distribution dcat:byteSize ?size . }`,\n      `\\t?dataset dcat:distribution ?distribution .`,\n      `\\t?dataset dct:hasVersion ?version .`,\n      `\\t?dataset dct:title ?title .`,\n      `\\t?dataset dct:description ?description.`,\n      `}`\n    ],\n    aggregate: `GROUP BY ?version ?dataset ?distribution ?title ?description ?license ?size ?format`\n  };\n\n  /**\n   * Selects files with additional information for group pages\n   */\n   static GROUP_PAGE_FILE_BROWSER_TEMPLATE = {\n    prefixes: QueryTemplates.DEFAULT_PREFIXES,\n    indent: 1,\n    select: `SELECT DISTINCT ?file ?version ?artifact ?license ?size ?format ?compression (GROUP_CONCAT(DISTINCT ?var; SEPARATOR=', ') AS ?variant) WHERE`,\n    body: [\n\n      `GRAPH ?g`,\n      `{`,\n      `%QUERY%`,\n      `\\t?dataset dcat:distribution ?distribution .`,\n      `\\t?distribution databus:file ?file .`,\n      `\\t?distribution databus:formatExtension ?format .`,\n      `\\t?distribution databus:compression ?compression .`,\n      `\\t?dataset dct:license ?license .`,\n      `\\t?dataset dct:hasVersion ?version .`,\n      `\\t?dataset databus:artifact ?artifact .`,\n      `\\tOPTIONAL { ?distribution ?p ?var. ?p rdfs:subPropertyOf databus:contentVariant . }`,\n      `\\tOPTIONAL { ?distribution dcat:byteSize ?size . }`,\n      `}`\n    ],\n    aggregate: `GROUP BY ?file ?version ?artifact ?license ?size ?format ?compression`\n  };\n\n  /**\n   * Selects files with additional information\n   */\n  static NODE_FILE_TEMPLATE = {\n    prefixes: QueryTemplates.DEFAULT_PREFIXES,\n    indent: 1,\n    select: `SELECT DISTINCT ?file ?license ?size ?format ?compression (GROUP_CONCAT(DISTINCT ?var; SEPARATOR=', ') AS ?variant) WHERE`,\n    body: [\n\n      `GRAPH ?g`,\n      `{`,\n      `%QUERY%`,\n      `\\t?dataset dcat:distribution ?distribution .`,\n      `\\t?distribution databus:file ?file .`,\n      `\\t?distribution databus:formatExtension ?format .`,\n      `\\t?distribution databus:compression ?compression .`,\n      `\\t?dataset dct:license ?license .`,\n      `\\tOPTIONAL { ?distribution ?p ?var. ?p rdfs:subPropertyOf databus:contentVariant . }`,\n      `\\tOPTIONAL { ?distribution dcat:byteSize ?size . }`,\n      `}`\n    ],\n    aggregate: `GROUP BY ?file ?license ?size ?format ?compression`\n  };\n\n  /**\n   * The default selection (only file)\n   */\n  static DEFAULT_FILE_TEMPLATE = {\n    prefixes: QueryTemplates.DEFAULT_PREFIXES,\n    indent: 1,\n    select: `SELECT ?file WHERE`,\n    body: [\n      `GRAPH ?g`,\n      `{`,\n      `%QUERY%`,\n      `\\t?dataset dcat:distribution ?distribution .`,\n      `\\t?distribution databus:file ?file .`,\n      `}`,\n    ]\n  };\n\n  static DISTRIBUTIONS_TEMPLATE = {\n    prefixes: QueryTemplates.DEFAULT_PREFIXES,\n    indent: 1,\n    select: `SELECT ?distribution WHERE`,\n    body: [\n      `GRAPH ?g`,\n      `{`,\n      `%QUERY%`,\n      `\\t?dataset dcat:distribution ?distribution .`,\n      `}`,\n    ]\n  };\n\n  /**\n   * The default selection (only file)\n   */\n   static CUSTOM_QUERY_FILE_TEMPLATE = {\n    prefixes: QueryTemplates.DEFAULT_PREFIXES,\n    indent: 1,\n    select: `SELECT ?file WHERE`,\n    body: [\n      `{`,\n      `%QUERY%`,\n      `}`,\n    ]\n  };\n}\n\nmodule.exports = QueryTemplates;\n\n//# sourceURL=webpack://databus-webapp/./js/query-builder/query-templates.js?");

/***/ }),

/***/ "./js/search/search-adapter.js":
/*!*************************************!*\
  !*** ./js/search/search-adapter.js ***!
  \*************************************/
/***/ ((module) => {

eval("\n\n\n\nclass SearchAdapter {\n\n    static list = [\n        { \n            name: 'lookup',\n            label: 'Lookup',\n            factory: this.lookup\n        }\n        /*\n        {\n            name: 'virtuoso',\n            label: 'Virtuoso SPARQL',\n            factory: this.virtuoso\n        }\n        */\n    ];\n\n    constructor($http, endpoint, queryFormatter, resultFormatter) {\n        this.http = $http;\n        this.endpoint = endpoint;\n        this.queryFormatter = queryFormatter;\n        this.resultFormatter = resultFormatter;\n    }\n\n    static inferResourceTypes(docs) {\n        // TODO:\n    }\n    \n\n    static lookup($http, endpoint) {\n        return new SearchAdapter($http, endpoint, function(query) {\n            return `?query=${query}&format=json`;\n        }, function(response) {\n            var docs = response.data.docs;\n            SearchAdapter.inferResourceTypes(docs);\n            return docs;\n        });\n    }\n\n    static virtuoso($http, endpoint) {\n        var virtuosoAdapter = new SearchAdapter($http, endpoint, function (query) {\n            var querySelector = /(?<=\\?|&)query=[^(&#)]*/;\n\n            // TODO: get the query input from the query\n        }, function (results) {\n            // TODO: format virtuoso search results\n        });\n\n        return virtuosoAdapter;\n    }\n\n   \n\n    async search(query) {\n        try {\n            if (this.queryFormatter != null) {\n                query = this.queryFormatter(query);\n            }\n\n            var results = await this.http.get(`${this.endpoint}${query}`);\n\n            if (this.resultFormatter != null) {\n                return this.resultFormatter(results);\n            }\n\n            return results;\n        } catch (err) {\n            console.log(err);\n            return null;\n        }\n    }\n}\n\nmodule.exports = SearchAdapter;\n\n//# sourceURL=webpack://databus-webapp/./js/search/search-adapter.js?");

/***/ }),

/***/ "./js/search/search-manager.js":
/*!*************************************!*\
  !*** ./js/search/search-manager.js ***!
  \*************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("const AppJsonFormatter = __webpack_require__(/*! ../utils/app-json-formatter */ \"./js/utils/app-json-formatter.js\");\nconst SearchAdapter = __webpack_require__(/*! ./search-adapter */ \"./js/search/search-adapter.js\");\n\nclass SearchManager {\n\n    constructor($http, $interval) {\n        this.http = $http;\n        this.searchExtensions = [];\n\n        this.baseAdapter = SearchAdapter.lookup(this.http, `/api/search`);\n        this.searchExtensions.push({\n            endpointUri: `/api/search`,\n            adapterName: `lookup`,\n            adapter: this.baseAdapter\n        });\n    }\n\n    mergeResults(results, documents) {\n        for(var document of documents) {\n            results.push(document);\n        }\n\n        return results;\n    }\n\n    async search(queryUrl, documentFilter) {\n\n        var results = [];\n\n        for (var searchExtension of this.searchExtensions) {\n\n            try {\n\n                var documents = await searchExtension.adapter.search(queryUrl);\n\n                if(documentFilter != undefined) {\n                    documents = documents.filter(documentFilter);\n                }\n                \n                results = this.mergeResults(results, documents);\n\n            } catch(err) {\n\n            }\n        }\n\n        return results;\n    }\n\n    async initialize() {\n\n        var auth = data.auth;\n\n        if (!auth.authenticated) {\n            return;\n        }\n\n        if(auth.info.accountName == undefined) {\n            return;\n        }\n\n        /*\n\n        var options = {\n            method: 'GET',\n            url: `/${ auth.info.accountName }`,\n            headers: {\n                'Accept': 'application/ld+json',\n                'X-Jsonld-Formatting': 'flatten',\n                'Cache-Control': 'no-cache',\n                'Pragma': 'no-cache'\n            }\n        }\n\n        var response = await this.http(options);\n        var accountData = AppJsonFormatter.formatAccountData(response.data);\n        var extensions = JSON.parse(JSON.stringify(accountData.searchExtensions));\n\n        for (var searchExtension of extensions) {\n\n            switch (searchExtension.adapterName) {\n                case 'lookup':\n                    searchExtension.adapter = SearchAdapter.lookup(this.http, searchExtension.endpointUri);\n                    break;\n            }\n\n            this.searchExtensions.push(searchExtension);\n\n        })*/\n    }\n}\n\nmodule.exports = SearchManager;\n\n\n//# sourceURL=webpack://databus-webapp/./js/search/search-manager.js?");

/***/ }),

/***/ "./js/utils/app-json-formatter.js":
/*!****************************************!*\
  !*** ./js/utils/app-json-formatter.js ***!
  \****************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("const DatabusConstants = __webpack_require__(/*! ./databus-constants */ \"./js/utils/databus-constants.js\");\r\nconst DatabusUris = __webpack_require__(/*! ./databus-uris */ \"./js/utils/databus-uris.js\");\r\nconst DatabusUtils = __webpack_require__(/*! ./databus-utils */ \"./js/utils/databus-utils.js\");\r\nconst JsonldUtils = __webpack_require__(/*! ./jsonld-utils */ \"./js/utils/jsonld-utils.js\");\r\n\r\n/**\r\n * Translates expanded jsonld into web-app compatible json\r\n */\r\nclass AppJsonFormatter {\r\n\r\n  static createAccountData(accountUri, accountLabel, accountStatus, accountImage) {\r\n\r\n    var personUri = `${accountUri}${DatabusConstants.WEBID_THIS}`;\r\n\r\n    var accountJsonLd = {};\r\n\r\n    var accountGraph = {};\r\n    accountGraph[DatabusUris.JSONLD_ID] = accountUri;\r\n    accountGraph[DatabusUris.JSONLD_TYPE] = DatabusUris.DATABUS_ACCOUNT;\r\n\r\n    var personGraph = {};\r\n    personGraph[DatabusUris.JSONLD_ID] = personUri;\r\n    personGraph[DatabusUris.JSONLD_TYPE] = DatabusUris.FOAF_PERSON;\r\n    personGraph[DatabusUris.FOAF_NAME] = accountLabel;\r\n    personGraph[DatabusUris.FOAF_ACCOUNT] = JsonldUtils.refTo(accountUri);\r\n\r\n    if (accountStatus != null) {\r\n      personGraph[DatabusUris.FOAF_STATUS] = accountStatus;\r\n    }\r\n\r\n    if (accountImage != null) {\r\n      personGraph[DatabusUris.FOAF_IMG] = JsonldUtils.refTo(accountImage);\r\n    }\r\n\r\n\r\n    return [\r\n      accountGraph,\r\n      personGraph\r\n    ];\r\n  }\r\n\r\n  static formatGroupData(graphs) {\r\n    var result = {};\r\n\r\n    // ?uri ?title ?abstract ?description\r\n    var groupGraph = JsonldUtils.getTypedGraph(graphs, DatabusUris.DATABUS_GROUP);\r\n\r\n    result.uri = groupGraph[DatabusUris.JSONLD_ID];\r\n    result.title = JsonldUtils.getProperty(groupGraph, DatabusUris.DCT_TITLE);\r\n    result.abstract = JsonldUtils.getProperty(groupGraph, DatabusUris.DCT_ABSTRACT);\r\n    result.description = JsonldUtils.getProperty(groupGraph, DatabusUris.DCT_DESCRIPTION);\r\n    result.name = DatabusUtils.uriToResourceName(result.uri);\r\n    return result;\r\n  }\r\n\r\n  static formatArtifactData(graphs) {\r\n    var result = {};\r\n    // ?uri ?title ?abstract ?description\r\n    var artifactGraph = JsonldUtils.getTypedGraph(graphs, DatabusUris.DATABUS_ARTIFACT);\r\n\r\n    result.uri = artifactGraph[DatabusUris.JSONLD_ID];\r\n    result.title = JsonldUtils.getProperty(artifactGraph, DatabusUris.DCT_TITLE);\r\n    result.abstract = JsonldUtils.getProperty(artifactGraph, DatabusUris.DCT_ABSTRACT);\r\n    result.description = JsonldUtils.getProperty(artifactGraph, DatabusUris.DCT_DESCRIPTION);\r\n    result.name = DatabusUtils.uriToResourceName(result.uri);\r\n    return result;\r\n\r\n\r\n  }\r\n\r\n  static formatAccountData(graphs) {\r\n    var result = {};\r\n\r\n    var accountGraph = JsonldUtils.getTypedGraph(graphs, DatabusUris.DATABUS_ACCOUNT);\r\n    var personGraph = JsonldUtils.getTypedGraph(graphs, DatabusUris.FOAF_PERSON);\r\n\r\n    result.uri = accountGraph[DatabusUris.JSONLD_ID];\r\n    result.accountName = DatabusUtils.uriToResourceName(result.uri);\r\n    result.label = JsonldUtils.getFirstProperty(personGraph, DatabusUris.FOAF_NAME);\r\n    result.imageUrl = JsonldUtils.getFirstProperty(personGraph, DatabusUris.FOAF_IMG);\r\n    result.about = JsonldUtils.getFirstProperty(personGraph, DatabusUris.FOAF_STATUS);\r\n    result.webIds = [];\r\n    result.searchExtensions = [];\r\n\r\n    var extensionGraphs = JsonldUtils.getTypedGraphs(graphs, DatabusUris.DATABUS_SEARCH_EXTENSION);\r\n\r\n    for (var extensionGraph of extensionGraphs) {\r\n      result.searchExtensions.push({\r\n        endpointUri: JsonldUtils.getProperty(extensionGraph, DatabusUris.DATABUS_SEARCH_EXTENSION_ENDPOINT),\r\n        adapterName: JsonldUtils.getProperty(extensionGraph, DatabusUris.DATABUS_SEARCH_EXTENSION_ADAPTER),\r\n      });\r\n    }\r\n\r\n    for (var graph of graphs) {\r\n\r\n      if (graph[DatabusUris.JSONLD_ID] == personGraph[DatabusUris.JSONLD_ID]) {\r\n        continue;\r\n      }\r\n\r\n      if (graph[DatabusUris.FOAF_ACCOUNT] != undefined) {\r\n        result.webIds.push(graph[DatabusUris.JSONLD_ID]);\r\n      }\r\n    }\r\n\r\n    return result;\r\n  }\r\n\r\n  static formatVersionData(versionGraph) {\r\n\r\n\r\n    var version = {};\r\n    version.uri = versionGraph[DatabusUris.JSONLD_ID];\r\n    version.title = JsonldUtils.getProperty(versionGraph, DatabusUris.DCT_TITLE);\r\n    version.abstract = JsonldUtils.getProperty(versionGraph, DatabusUris.DCT_ABSTRACT);\r\n    version.description = JsonldUtils.getProperty(versionGraph, DatabusUris.DCT_DESCRIPTION);\r\n    version.artifact = JsonldUtils.getProperty(versionGraph, DatabusUris.DATABUS_ARTIFACT_PROPERTY);\r\n    version.license = JsonldUtils.getProperty(versionGraph, DatabusUris.DCT_LICENSE);\r\n    version.attribution = JsonldUtils.getProperty(versionGraph, DatabusUris.DATABUS_ATTRIBUTION);\r\n    version.wasDerivedFrom = JsonldUtils.getProperty(versionGraph, DatabusUris.PROV_WAS_DERIVED_FROM);\r\n    version.issued = JsonldUtils.getProperty(versionGraph, DatabusUris.DCT_ISSUED);\r\n    version.name = JsonldUtils.getProperty(versionGraph, DatabusUris.DCT_HAS_VERSION);\r\n\r\n    return version;\r\n  }\r\n\r\n  static formatCollectionData(graphs) {\r\n    var collectionGraph = JsonldUtils.getTypedGraph(graphs, DatabusUris.DATABUS_COLLECTION);\r\n\r\n    var result = {};\r\n\r\n    result.uri = collectionGraph[DatabusUris.JSONLD_ID];\r\n    result.title = JsonldUtils.getProperty(collectionGraph, DatabusUris.DCT_TITLE);\r\n    result.abstract = JsonldUtils.getProperty(collectionGraph, DatabusUris.DCT_ABSTRACT);\r\n    result.description = JsonldUtils.getProperty(collectionGraph, DatabusUris.DCT_DESCRIPTION);\r\n    result.issued = JsonldUtils.getProperty(collectionGraph, DatabusUris.DCT_ISSUED);\r\n    result.publisher = JsonldUtils.getProperty(collectionGraph, DatabusUris.DCT_PUBLISHER);\r\n    result.account = JsonldUtils.getProperty(collectionGraph, DatabusUris.DATABUS_ACCOUNT_PROPERTY);\r\n\r\n    var content = JsonldUtils.getProperty(collectionGraph, DatabusUris.DATABUS_COLLECTION_CONTENT)\r\n    result.content = DatabusUtils.tryParseJson(unescape(content));\r\n\r\n    return result;\r\n  }\r\n}\r\n\r\nmodule.exports = AppJsonFormatter;\r\n\n\n//# sourceURL=webpack://databus-webapp/./js/utils/app-json-formatter.js?");

/***/ }),

/***/ "./js/utils/databus-constants.js":
/*!***************************************!*\
  !*** ./js/utils/databus-constants.js ***!
  \***************************************/
/***/ ((module) => {

eval("\n\nclass DatabusConstants {\n    static FACET_DEFAULT_SUBQUERY =\n        \"\\n\\t{ \" +\n        \"\\n\\t\\t?distribution <%FACET%> '%VALUE%'^^<http://www.w3.org/2001/XMLSchema#string> . \" +\n        \"\\n\\t} \";\n\n    static FACET_DEFAULT_SUBQUERY_PLACEHOLDER_FACET = \"%FACET%\";\n    static FACET_DEFAULT_SUBQUERY_PLACEHOLDER_VALUE = \"%VALUE%\";\n    static FACET_LATEST_VERSION_VALUE = \"$latest\";\n    static FACET_LATEST_VERSION_LABEL = \"Latest Version\";\n\n    static WEBID_THIS = \"#this\";\n    static WEBID_DOCUMENT = \"#doc\";\n    static WEBID_SHARED_PUBLIC_KEY_LABEL = \"Shared Databus Public Key\";\n\n    static FACET_LASTEST_ARTIFACT_VERSION_SUBQUERY =\n        \"\\n\\t{\" +\n        \"\\n\\t\\t?distribution dct:hasVersion ?latestVersion \" +\n        \"\\n\\t\\t{\" +\n        \"\\n\\t\\t\\tSELECT (?version as ?latestVersion) WHERE { \" +\n        \"\\n\\t\\t\\t\\t?dataset databus:artifact <%ARTIFACT_URI%> . \" +\n        \"\\n\\t\\t\\t\\t?dataset dct:hasVersion ?version . \" +\n        \"\\n\\t\\t\\t} ORDER BY DESC (?version) LIMIT 1 \" +\n        \"\\n\\t\\t} \" +\n        \"\\n\\t}\";\n\n    static FACET_LASTEST_GROUP_VERSION_SUBQUERY =\n        \"\\n\\t{\" +\n        \"\\n\\t\\t?distribution dct:hasVersion ?latestVersion \" +\n        \"\\n\\t\\t{\" +\n        \"\\n\\t\\t\\tSELECT (?version as ?latestVersion) WHERE { \" +\n        \"\\n\\t\\t\\t\\t?dataset databus:group <%ARTIFACT_URI%> . \" +\n        \"\\n\\t\\t\\t\\t?dataset dct:hasVersion ?version . \" +\n        \"\\n\\t\\t\\t} ORDER BY DESC (?version) LIMIT 1 \" +\n        \"\\n\\t\\t} \" +\n        \"\\n\\t}\";\n\n    static FACET_SUBQUERY_UNION = \"\\n\\tUNION\";\n    static DATABUS_SPARQL_ENDPOINT_URL = \"/sparql\";\n}\n\nmodule.exports = DatabusConstants;\n\n//# sourceURL=webpack://databus-webapp/./js/utils/databus-constants.js?");

/***/ }),

/***/ "./js/utils/databus-facets-cache.js":
/*!******************************************!*\
  !*** ./js/utils/databus-facets-cache.js ***!
  \******************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("const { DATABUS_CONTENT_VARIANT_PREFIX } = __webpack_require__(/*! ./databus-uris */ \"./js/utils/databus-uris.js\");\nconst DatabusUris = __webpack_require__(/*! ./databus-uris */ \"./js/utils/databus-uris.js\");\nconst DatabusUtils = __webpack_require__(/*! ./databus-utils */ \"./js/utils/databus-utils.js\");\n\nclass DatabusFacetsCache {\n\n  constructor($http) {\n    this._facets = {};\n    this._http = $http;\n    this._regex = new RegExp('%RESOURCE_URI%', \"g\");\n\n    this.pathLengthToQueryMap = {\n      2: DatabusFacetsCache.GET_GROUP_FACETS,\n      3: DatabusFacetsCache.GET_ARTIFACT_FACETS\n    }\n\n    this._facetMetadata = {};\n    \n    this._facetMetadata[DatabusUris.DCT_HAS_VERSION] = \"Version\";\n    this._facetMetadata[DatabusUris.DATABUS_FORMAT_EXTENSION] = \"Format\";\n    this._facetMetadata[DatabusUris.DATABUS_CONTENT_VARIANT_PREFIX + \"lang\"] = \"Language\";\n    this._facetMetadata[DatabusUris.DATABUS_CONTENT_VARIANT_PREFIX + \"domain\"] = \"Domain\";\n    this._facetMetadata[DatabusUris.DATABUS_CONTENT_VARIANT_PREFIX + \"tag\"] = \"Tag\";\n    this._facetMetadata[DatabusUris.DATABUS_COMPRESSION] = \"Compression\";\n    \n  }\n\n  async get(resource) {\n\n    if (this._facets[resource] != undefined) {\n      return {\n        uri : resource,\n        facets: this._facets[resource]\n      };\n    }\n\n    var url = new URL(resource);\n    var origin = url.origin;\n    var pathLength = DatabusUtils.getResourcePathLength(resource);\n\n    var query = this.pathLengthToQueryMap[pathLength];\n\n\n    if (query == undefined) {\n      return null;\n    }\n\n    query = query.replace(this._regex, resource);\n\n    var req = {\n      method: 'POST',\n      url: `${origin}/sparql?query=`,\n      data: `format=json&query=${encodeURIComponent(query)}`,\n      headers: {\n        \"Content-type\": \"application/x-www-form-urlencoded\"\n      },\n    }\n\n    var response = await this._http(req);\n\n    var result = {};\n\n    for (var binding of response.data.results.bindings) {\n\n      var property = binding.property.value;\n\n      if (result[property] == undefined) {\n        result[property] = {};\n\n        var label = this._facetMetadata[property] != undefined ? this._facetMetadata[property] : \n          DatabusUtils.uriToName(property);\n\n        result[binding.property.value].label = label;\n        result[binding.property.value].values = []\n      }\n\n      result[binding.property.value].values.push(binding.value.value);\n    }\n\n    this._facets[resource] = result;\n    \n    return {\n      uri : resource,\n      facets: this._facets[resource]\n    };\n  }\n\n\n  static GET_GROUP_FACETS = `\n  PREFIX databus: <https://dataid.dbpedia.org/databus#>\n  PREFIX dcv: <https://dataid.dbpedia.org/databus-cv#>\n  PREFIX dct: <http://purl.org/dc/terms/>\n  PREFIX dcat:  <http://www.w3.org/ns/dcat#>\n  PREFIX rdfs:  <http://www.w3.org/2000/01/rdf-schema#>\n  \n  SELECT DISTINCT ?property ?value WHERE {\n    {\n      GRAPH ?g {\n        ?dataset databus:group <%RESOURCE_URI%> .\n        ?dataset dcat:distribution ?distribution . \n        ?distribution dct:hasVersion ?value .\n        BIND(dct:hasVersion AS ?property)\n      }\n    }\n    UNION\n    {\n      GRAPH ?g {\n        ?dataset databus:group <%RESOURCE_URI%> .\n        ?dataset dcat:distribution ?distribution . \n        ?distribution databus:formatExtension ?value .\n        BIND(databus:formatExtension AS ?property)\n      }\n    }\n    UNION\n    {\n      GRAPH ?g {\n        ?dataset databus:group <%RESOURCE_URI%> .\n        ?dataset dcat:distribution ?distribution . \n        ?distribution databus:compression ?value .\n        BIND(databus:compression AS ?property)\n      }\n    }\n    UNION\n    {\n      GRAPH ?g {\n        ?dataset databus:group <%RESOURCE_URI%> .\n        ?dataset dcat:distribution ?distribution . \n        ?distribution ?property ?value .\n        ?property rdfs:subPropertyOf databus:contentVariant .\n      }\n    }\n  }\n  `;\n\n  static GET_ARTIFACT_FACETS = `\n  PREFIX databus: <https://dataid.dbpedia.org/databus#>\n  PREFIX dcv: <https://dataid.dbpedia.org/databus-cv#>\n  PREFIX dct: <http://purl.org/dc/terms/>\n  PREFIX dcat:  <http://www.w3.org/ns/dcat#>\n  PREFIX rdfs:  <http://www.w3.org/2000/01/rdf-schema#>\n  \n  SELECT DISTINCT ?property ?value WHERE {\n    GRAPH ?g {\n    {\n        BIND(dct:hasVersion AS ?property)\n        ?dataset databus:artifact <%RESOURCE_URI%> .\n        ?dataset dcat:distribution ?distribution . \n        ?distribution dct:hasVersion ?value .\n    }\n    UNION\n    {\n        BIND(databus:formatExtension AS ?property)\n        ?dataset databus:artifact <%RESOURCE_URI%> .\n        ?dataset dcat:distribution ?distribution . \n        ?distribution databus:formatExtension ?value .\n    }\n    UNION\n    {\n        BIND(databus:compression AS ?property)\n        ?dataset databus:artifact <%RESOURCE_URI%> .\n        ?dataset dcat:distribution ?distribution . \n        ?distribution databus:compression ?value .\n    }\n    UNION\n    {\n        ?dataset databus:artifact <%RESOURCE_URI%> .\n        ?dataset dcat:distribution ?distribution . \n        ?distribution ?property ?value .\n        ?property rdfs:subPropertyOf databus:contentVariant .\n      }\n    }\n  }`;\n\n\n\n}\n\nmodule.exports = DatabusFacetsCache;\n\n//# sourceURL=webpack://databus-webapp/./js/utils/databus-facets-cache.js?");

/***/ }),

/***/ "./js/utils/databus-messages.js":
/*!**************************************!*\
  !*** ./js/utils/databus-messages.js ***!
  \**************************************/
/***/ ((module) => {

eval("\r\nclass DatabusMessages {\r\n\r\n  // Collection Editor\r\n  static CEDIT_INVALID_IDENTIFIER = 'The identifier must match the following regular expression: #REGEX#';\r\n  static CEDIT_INVALID_TITLE = 'The title must match the following regular expression: #REGEX#';\r\n  static CEDIT_INVALID_ABSTRACT = 'The abstract must match the following regular expression: #REGEX#';\r\n  static CEDIT_INVALID_DESCRIPTION = 'The description must match the following regular expression: #REGEX#';\r\n  static CEDIT_COLLECTION_IMPORT_FAILED = 'Failed to import the collection';\r\n  static CEDIT_COLLECTION_IMPORTED = 'Collection imported successfully';\r\n  static CEDIT_COLLECTION_SAVED = 'Collection saved successfully';\r\n  static CEDIT_COLLECTION_SAVE_FAILED = 'Failed to save the collection';\r\n  static CEDIT_COLLECTION_UNPUBLISHED = 'Collection unpublished successfully';\r\n  static CEDIT_LOCAL_CHANGES_DISCARDED = 'Local changes discarded';\r\n\r\n  // Generic\r\n  static GENERIC_COPIED_TO_CLIPBOARD = 'Copied to clipboard!';\r\n\r\n  // Account \r\n  static ACCOUT_PROFILE_SAVED = 'Profile changes have been saved';\r\n\r\n  static ACCOUNT_API_KEY_CREATED = 'API key created';\r\n\r\n  static ACCOUNT_WEBID_LINKED = 'External WebId has been linked to your profile';\r\n\r\n  \r\n}\r\n\r\n  module.exports = DatabusMessages;\r\n\n\n//# sourceURL=webpack://databus-webapp/./js/utils/databus-messages.js?");

/***/ }),

/***/ "./js/utils/databus-uris.js":
/*!**********************************!*\
  !*** ./js/utils/databus-uris.js ***!
  \**********************************/
/***/ ((module) => {

eval("\r\nclass DatabusUris {\r\n\r\n  // JSONLD\r\n  static JSONLD_TYPE = '@type';\r\n  static JSONLD_ID = '@id';\r\n  static JSONLD_VALUE = '@value';\r\n  static JSONLD_LANGUAGE = '@language';\r\n  static JSONLD_CONTEXT = '@context';\r\n  static JSONLD_GRAPH = '@graph';\r\n\r\n  // Databus\r\n  static DATABUS_DATABUS = 'https://dataid.dbpedia.org/databus#Databus';\r\n  static DATABUS_PART = 'https://dataid.dbpedia.org/databus#Part';\r\n  static DATABUS_VERSION = 'https://dataid.dbpedia.org/databus#Version';\r\n  static DATABUS_GROUP = 'https://dataid.dbpedia.org/databus#Group';\r\n  static DATABUS_ACCOUNT = 'https://dataid.dbpedia.org/databus#Account';\r\n  static DATABUS_ARTIFACT = 'https://dataid.dbpedia.org/databus#Artifact';\r\n  static DATABUS_VERSION_PROPERTY = 'https://dataid.dbpedia.org/databus#version';\r\n  static DATABUS_GROUP_PROPERTY = 'https://dataid.dbpedia.org/databus#group';\r\n  static DATABUS_ACCOUNT_PROPERTY = 'https://dataid.dbpedia.org/databus#account';\r\n  static DATABUS_NAME = 'https://dataid.dbpedia.org/databus#name';\r\n  \r\n  static DATABUS_SECRETARY_PROPERTY = 'https://dataid.dbpedia.org/databus#secretary';\r\n  static DATABUS_SECRETARY = 'https://dataid.dbpedia.org/databus#Secretary';\r\n  static DATABUS_HAS_WRITE_ACCESS_TO = 'https://dataid.dbpedia.org/databus#hasWriteAccessTo';\r\n\r\n  static DATABUS_ARTIFACT_PROPERTY = 'https://dataid.dbpedia.org/databus#artifact';\r\n  static DATABUS_FORMAT = 'https://dataid.dbpedia.org/databus#format';\r\n  static DATABUS_FORMAT_EXTENSION = 'https://dataid.dbpedia.org/databus#formatExtension';\r\n  static DATABUS_CONTENT_VARIANT = 'https://dataid.dbpedia.org/databus#contentVariant';\r\n  static DATABUS_CONTENT_VARIANT_PREFIX = 'https://dataid.dbpedia.org/databus-cv#';\r\n  static DATABUS_SHASUM = 'https://dataid.dbpedia.org/databus#sha256sum';\r\n  static DATABUS_COLLECTION = 'https://dataid.dbpedia.org/databus#Collection';\r\n  static DATABUS_FILE = 'https://dataid.dbpedia.org/databus#file';\r\n  static DATABUS_COMPRESSION = 'https://dataid.dbpedia.org/databus#compression';\r\n  static DATABUS_ATTRIBUTION = 'https://dataid.dbpedia.org/databus#attribution';\r\n  static DATABUS_PREVIEW = 'https://dataid.dbpedia.org/databus#preview';\r\n  static DATABUS_COLLECTION_CONTENT = 'https://dataid.dbpedia.org/databus#collectionContent';\r\n  static DATABUS_TRACTATE_V1 = 'https://dataid.dbpedia.org/databus#DatabusTractateV1';\r\n  static DATABUS_PLUGIN = 'https://dataid.dbpedia.org/databus#Plugin';\r\n  static DATABUS_SEARCH_EXTENSION = 'https://dataid.dbpedia.org/databus#SearchExtension';\r\n  static DATABUS_SEARCH_EXTENSION_ADAPTER = 'https://dataid.dbpedia.org/databus#searchExtensionAdapter';\r\n  static DATABUS_SEARCH_EXTENSION_ENDPOINT = 'https://dataid.dbpedia.org/databus#searchExtensionEndpoint';\r\n  static DATABUS_EXTENDS = 'https://dataid.dbpedia.org/databus#extends';\r\n  \r\n  // DCT\r\n  static DCT_PUBLISHER = 'http://purl.org/dc/terms/publisher';\r\n  static DCT_HAS_VERSION = 'http://purl.org/dc/terms/hasVersion';\r\n  static DCT_ISSUED = 'http://purl.org/dc/terms/issued';\r\n  static DCT_CREATED = 'http://purl.org/dc/terms/created';\r\n  static DCT_MODIFIED = 'http://purl.org/dc/terms/modified';\r\n  static DCT_DISTRIBUTION = 'http://purl.org/dc/terms/distribution';\r\n  static DCT_SUBJECT = 'http://purl.org/dc/terms/subject';\r\n  static DCT_CREATOR = 'http://purl.org/dc/terms/creator'\r\n  static DCT_TITLE = 'http://purl.org/dc/terms/title'\r\n  static DCT_ABSTRACT = 'http://purl.org/dc/terms/abstract'\r\n  static DCT_DESCRIPTION = 'http://purl.org/dc/terms/description'\r\n  static DCT_LICENSE = 'http://purl.org/dc/terms/license';\r\n\r\n  // DCAT\r\n  static DCAT_DOWNLOAD_URL = 'http://www.w3.org/ns/dcat#downloadURL';\r\n  static DCAT_BYTESIZE = 'http://www.w3.org/ns/dcat#byteSize';\r\n  static DCAT_DISTRIBUTION = 'http://www.w3.org/ns/dcat#distribution';\r\n\r\n\r\n  // SEC\r\n  static SEC_PROOF = 'https://w3id.org/security#proof';\r\n  static SEC_SIGNATURE = 'https://w3id.org/security#signature';\r\n\r\n  // RDF\r\n  static RDF_PROPERTY = 'http://www.w3.org/1999/02/22-rdf-syntax-ns#Property';\r\n\r\n  // RDFS\r\n  static RDFS_SUB_PROPERTY_OF = 'http://www.w3.org/2000/01/rdf-schema#subPropertyOf';\r\n  static RDFS_LABEL = 'http://www.w3.org/2000/01/rdf-schema#label';\r\n\r\n  // XSD\r\n  static XSD_DATE_TIME = 'http://www.w3.org/2001/XMLSchema#dateTime';\r\n  static XSD_DECIMAL = 'http://www.w3.org/2001/XMLSchema#decimal';\r\n  static XSD_STRING = 'http://www.w3.org/2001/XMLSchema#string';\r\n\r\n  // SHACL\r\n  static SHACL_VALIDATION_REPORT = 'http://www.w3.org/ns/shacl#ValidationReport';\r\n  static SHACL_VALIDATION_RESULT = 'http://www.w3.org/ns/shacl#ValidationResult';\r\n  static SHACL_CONFORMS = 'http://www.w3.org/ns/shacl#conforms';\r\n  static SHACL_RESULT_MESSAGE = 'http://www.w3.org/ns/shacl#resultMessage';\r\n\r\n  // FOAF\r\n  static FOAF_PERSONAL_PROFILE_DOCUMENT = 'http://xmlns.com/foaf/0.1/PersonalProfileDocument';\r\n  static FOAF_ACCOUNT = 'http://xmlns.com/foaf/0.1/account';\r\n  static FOAF_NAME = 'http://xmlns.com/foaf/0.1/name';\r\n  static FOAF_STATUS = 'http://xmlns.com/foaf/0.1/status';\r\n  static FOAF_PERSON = 'http://xmlns.com/foaf/0.1/Person';\r\n  static FOAF_PRIMARY_TOPIC = 'http://xmlns.com/foaf/0.1/primaryTopic';\r\n  static FOAF_MAKER = 'http://xmlns.com/foaf/0.1/maker';\r\n  static FOAF_ACCOUNT_NAME = 'http://xmlns.com/foaf/0.1/accountName';\r\n  static FOAF_IMG = 'http://xmlns.com/foaf/0.1/img';\r\n\r\n  // S4AC\r\n  static S4AC_ACCESS_POLICY = 'http://ns.inria.fr/s4ac/v2#AccessPolicy';\r\n  static S4AC_ACCESS_CREATE = 'http://ns.inria.fr/s4ac/v2#Create';\r\n  static S4AC_HAS_ACCESS_PRIVILEGE = 'http://ns.inria.fr/s4ac/v2#hasAccessPrivilege';\r\n\r\n  // CERT\r\n  static CERT_KEY = 'http://www.w3.org/ns/auth/cert#key';\r\n  static CERT_MODULUS = 'http://www.w3.org/ns/auth/cert#modulus';\r\n  static CERT_EXPONENT = 'http://www.w3.org/ns/auth/cert#exponent';\r\n  static CERT_RSA_PUBLIC_KEY = 'http://www.w3.org/ns/auth/cert#RSAPublicKey';\r\n\r\n  // PROV\r\n  static PROV_WAS_DERIVED_FROM = 'http://www.w3.org/ns/prov-o#wasDerivedFrom';\r\n\r\n  // DBP\r\n  static DBP_DBPEDIAN = 'http://dbpedia.org/ontology/DBpedian';\r\n}\r\n\r\nmodule.exports = DatabusUris;\r\n\n\n//# sourceURL=webpack://databus-webapp/./js/utils/databus-uris.js?");

/***/ }),

/***/ "./js/utils/databus-utils.js":
/*!***********************************!*\
  !*** ./js/utils/databus-utils.js ***!
  \***********************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("const DatabusCollectionUtils = __webpack_require__(/*! ../collections/databus-collection-utils */ \"./js/collections/databus-collection-utils.js\");\nvar markdownit = __webpack_require__(/*! markdown-it */ \"markdown-it\");\nconst moment = __webpack_require__(/*! moment/moment */ \"moment/moment\");\nconst DatabusUris = __webpack_require__(/*! ./databus-uris */ \"./js/utils/databus-uris.js\");\nconst ApiError = __webpack_require__(/*! ../../../server/app/common/utils/api-error */ \"../server/app/common/utils/api-error.js\");\n\nclass DatabusUtils {\n\n  static stringOrFallback(value, fallback) {\n    if (value != null && value.length > 0) {\n      return value;\n    }\n\n    return fallback;\n  }\n\n  static resemblesTrue(value) {\n    if (typeof value === 'boolean') {\n      return value;\n    }\n  \n    if (typeof value === 'string') {\n      const normalized = value.trim().toLowerCase();\n      return ['true', '1', 'yes', 'on'].includes(normalized);\n    }\n  \n    if (typeof value === 'number') {\n      return value === 1;\n    }\n  \n    return false;\n  }\n\n  static isValidResourceIdentifier(identifier, min) {\n    var identifierRegex = /^[a-z-]+$/;\n    return this.checkField(identifier, identifierRegex, min, 50);\n  }\n\n  static formatQuery(query, placeholderMappings) {\n\n    if (placeholderMappings == undefined) {\n       return query;\n    }\n \n    for (var placeholder in placeholderMappings) {\n       var re = new RegExp('%' + placeholder + '%', \"g\");\n       query = query.replace(re, placeholderMappings[placeholder]);\n    }\n \n    return query;\n }\n\n  static isValidVersionIdentifier(identifier) {\n    var labelRegex = /^[A-Za-z0-9_\\.\\-]*$/;\n    return this.checkField(identifier, labelRegex, 3, 50);\n  }\n\n  static isValidResourceText(value, min, max) {\n    var textRegex = /^[\\x00-\\x7F\\n]*$/;\n    return this.checkField(value, textRegex, min, max);\n  }\n\n  static isValidAccountName(identifier) {\n    var labelRegex = /^[a-z][0-9a-z_\\-]+[0-9a-z]$/;\n    return this.checkField(identifier, labelRegex, 3, 15);\n  }\n\n  static timeStringNow() {\n    return new Date(Date.now()).toISOString();\n  }\n\n  static isValidGroupName(name) {\n    var labelRegex = /[a-zA-Z0-9_\\-\\.]{3,50}$/;\n    return this.checkField(name, labelRegex, 3, 50);\n  }\n\n  static isValidArtifactName(name) {\n    var labelRegex = /[a-zA-Z0-9_\\-\\.]{3,50}$/;\n    return this.checkField(name, labelRegex, 3, 50);\n  }\n\n  static isValidUrl(value) {\n    var textRegex = /https?:\\/\\/(www\\.)?[-a-zA-Z0-9@:%._\\+~#=]{1,256}\\.[a-zA-Z0-9()]{1,6}\\b([-a-zA-Z0-9()@:%_\\+.~#?&//=]*)/g;\n    return textRegex.test(value);\n  }\n\n  static isValidResourceLabel(value, min, max) {\n    var labelRegex = /^[A-Za-z0-9\\s_()\\.\\,\\-]*$/;\n    return this.checkField(value, labelRegex, min, max);\n  }\n\n  static objSize(obj) {\n    var size = 0, key;\n    for (key in obj) {\n      if (obj.hasOwnProperty(key)) size++;\n    }\n    return size;\n  }\n\n  static uniqueList(arr) {\n    var u = {}, a = [];\n    for (var i = 0, l = arr.length; i < l; ++i) {\n      if (!u.hasOwnProperty(arr[i])) {\n        a.push(arr[i]);\n        u[arr[i]] = 1;\n      }\n    }\n    return a;\n  }\n\n\n  static formatFileSize(size) {\n    if (size == undefined) {\n      return '0 KB'\n    }\n\n    if (size < 1024) return size + \" B\";\n    else if (size < 1048576) return Math.round(size / 1024) + \" KB\";\n    else if (size < 1073741824) return (Math.round(10 * size / 1048576) / 10) + \" MB\";\n    else return (Math.round(100 * size / 1073741824) / 100) + \" GB\";\n  };\n\n  static checkField(value, regex, min, max) {\n    if (value == undefined) {\n      return false;\n    }\n\n    if (max > 0 && value.length > max) {\n      return false;\n    }\n\n    if (value.length < min) {\n      return false;\n    }\n\n    return regex.test(value);\n  }\n\n  // Creates a v4 uuid\n  static uuidv4() {\n    return '___xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n      var r = Math.random() * 16 | 0, v = c == 'x' ? r : (r & 0x3 | 0x8);\n      return v.toString(16);\n    });\n  }\n\n  static tryParseJson(str) {\n    return JSON.parse(str);\n  }\n\n  static uriToTitle(uri) {\n    if (uri == null) {\n      return null;\n    }\n\n    var result = uri.substr(uri.lastIndexOf('/') + 1);\n    result = result.substr(result.lastIndexOf('#') + 1);\n\n    return result.charAt(0).toUpperCase() + result.slice(1);\n  }\n\n  static uriToName(uri) {\n    if (uri == null) {\n      return null;\n    }\n\n    var result = uri.substr(uri.lastIndexOf('/') + 1);\n    result = result.substr(result.lastIndexOf('#') + 1);\n\n    if (result.includes('.')) {\n      result = result.substr(0, result.lastIndexOf('.'));\n    }\n\n    return result;\n  }\n\n  static uriToResourceName(uri) {\n    if (uri == null) {\n      return null;\n    }\n\n    var result = uri.substr(uri.lastIndexOf('/') + 1);\n\n    if(result.includes('#')) {\n      result = result.substr(0, result.indexOf('#'));\n    }\n\n    return result;\n  }\n\n  static isValidHttpUrl(string) {\n    let url;\n\n    try {\n      url = new URL(string);\n    } catch (_) {\n      return false;\n    }\n\n    return url.protocol === \"http:\" || url.protocol === \"https:\";\n  }\n\n  static isValidHttpsUrl(string) {\n    let url;\n\n    try {\n      url = new URL(string);\n    } catch (_) {\n      return false;\n    }\n\n    return url.protocol === \"https:\";\n  }\n\n\n  static navigateUp(uri, steps) {\n\n    if (steps == undefined) {\n      steps = 1;\n    }\n\n    for (var i = 0; i < steps; i++) {\n      uri = uri.substr(0, uri.lastIndexOf('/'));\n    }\n\n    if (uri.includes('#')) {\n      uri = uri.substr(0, uri.lastIndexOf('#'));\n    }\n\n    return uri;\n  }\n\n  static copyStringToClipboard(str) {\n    // Create new element\n    var el = document.createElement('textarea');\n    // Set value (string to be copied)\n    el.value = str;\n    // Set non-editable to avoid focus and move outside of view\n    el.setAttribute('readonly', '');\n    el.style = { position: 'absolute', left: '-9999px' };\n    document.body.appendChild(el);\n    // Select text inside element\n    el.select();\n    // Copy text to clipboard\n    document.execCommand('copy');\n    // Remove temporary element\n    document.body.removeChild(el);\n  }\n\n  static serialize(collectionObject, ignoreKeys) {\n\n    if (ignoreKeys == undefined) {\n      ignoreKeys = [\n        'parent',\n        '$$hashKey',\n        'expanded',\n        'files',\n        'eventListeners',\n        'hasLocalChanges',\n        'published'\n      ];\n    }\n\n    return JSON.stringify(collectionObject, function (key, value) {\n      if (ignoreKeys.includes(key)) {\n        return undefined;\n      }\n\n      return value;\n    });\n  }\n\n  static createCleanCopy(jsonData) {\n    var data = JSON.parse(DatabusCollectionUtils.serialize(jsonData));\n    return data;\n  }\n\n  static lineCount(text) {\n    return (text.match(/^\\s*\\S/gm) || \"\").length\n  }\n\n\n  static getResourcePathLength(uri) {\n    var parts = DatabusUtils.splitResourceUri(uri);\n\n    if (parts.length == 1 && parts[0] == \"\") {\n      return 0;\n    }\n\n    return parts.length;\n  }\n\n  static splitResourceUri(uri) {\n\n    var url = new URL(uri);\n    uri = url.pathname;\n\n    if (uri.startsWith('/')) {\n      uri = uri.substr(1);\n    }\n    if (uri.endsWith('/')) {\n      uri = uri.substr(0, uri.length - 1);\n    }\n\n    return uri.split('/');\n  }\n\n  static formatDate(date) {\n    return moment(date).format('MMM Do YYYY') + \" (\" + moment(date).fromNow() + \")\";\n  }\n\n  static exportToJsonFile(jsonData) {\n\n    var ignoreKeys = [\n      'parent',\n      '$$hashKey',\n      'expanded',\n      'files',\n      'eventListeners',\n      'hasLocalChanges',\n      'published',\n      'uuid'\n    ];\n\n    let dataStr = DatabusCollectionUtils.serialize(jsonData, ignoreKeys);\n    let dataUri = 'data:application/json;charset=utf-8,' + encodeURIComponent(dataStr);\n\n    let exportFileDefaultName = 'data.json';\n\n    let linkElement = document.createElement('a');\n    linkElement.setAttribute('href', dataUri);\n    linkElement.setAttribute('download', exportFileDefaultName);\n    linkElement.click();\n  }\n\n  static async parseN3(data, maxQuads) {\n    return new Promise((resolve, reject) => {\n\n      const quads = [];\n      const prefixes = [];\n\n      const parser = new N3.Parser();\n\n      parser.parse(data, (e, q, p) => {\n        if (e) {\n          reject(e);\n          return;\n        }\n\n        if (quads.length > maxQuads || q == null) {\n          resolve({ quads: quads, prefixes: prefixes });\n        }\n\n        if (q) {\n          quads.push(q);\n        }\n      });\n    });\n  }\n\n  static async parseDatabusManifest(data) {\n\n    var parsedData = await DatabusUtils.parseN3(data, 100);\n\n    for (var quad of parsedData.quads) {\n\n      if (quad.predicate.id == `http://www.w3.org/1999/02/22-rdf-syntax-ns#type`\n        && quad.object.id == DatabusUris.DATABUS_DATABUS) {\n\n        return {\n          uri: quad.subject.id\n        }\n      }\n    }\n\n    return undefined;\n  }\n\n  static parseMarkdown(markdown) {\n\n    if(markdown == null) {\n      return null;\n    }\n\n    var markdownParser = markdownit();\n    return markdownParser.parse(markdown);\n  }\n\n  static renderMarkdown(markdown) {\n\n    if(markdown == null) {\n      return null;\n    }\n\n    var markdownParser = markdownit();\n    return markdownParser.render(markdown);\n  }\n\n  /**\n   * Create a dct:abstract from the content of a dct:description\n   * @param {*} description \n   */\n  static createAbstractFromDescription(description) {\n\n    if(description == null) {\n      return null;\n    }\n\n    try {\n      var tokens = this.parseMarkdown(description);\n\n     \n      var paragraphFound = false;\n      var result = \"\";\n\n      if(tokens == null) {\n       return result; \n      }\n\n      var firstParagraphText = null;\n\n      for (var i = 0; i < tokens.length; i++) {\n\n        var token = tokens[i];\n        var appendText = null;\n\n        if (token.type == 'inline' && tokens[i - 1].type == 'paragraph_open' && token.level == 1) {\n          result = token.content;\n          break;\n        }\n\n      }\n\n      return result;\n\n    } catch (err) {\n      console.log(err);\n      return undefined;\n    }\n  }\n\n  /**\n   * Find groups files that are not distinguishable\n   * @param {Array of file URIs} files \n   * @param {Array of content variant names} contentVariants \n   * @param {Index in the array of content variants} index \n   * @returns \n   */\n  static cvSplit(distributionGraphs, contentVariantUris, contentVariantIndex) {\n\n    var errorList = [];\n\n    if (distributionGraphs.length <= 1) {\n      return errorList;\n    }\n\n    if (contentVariantIndex >= contentVariantUris.length) {\n\n      // Check buckets for double entries if (files.length > 1) {\n      if (distributionGraphs.length > 1) {\n\n        var error = {};\n        error.downloadURLs = [];\n\n        for (var distribution of distributionGraphs) {\n\n          error.downloadURLs.push(distribution[DatabusUris.DCAT_DOWNLOAD_URL][0][DatabusUris.JSONLD_ID]);\n        }\n\n        error[DatabusUris.DATABUS_FORMAT_EXTENSION] =\n          distributionGraphs[0][DatabusUris.DATABUS_FORMAT_EXTENSION][0][DatabusUris.JSONLD_VALUE];\n\n        error[DatabusUris.DATABUS_COMPRESSION] =\n          distributionGraphs[0][DatabusUris.DATABUS_COMPRESSION][0][DatabusUris.JSONLD_VALUE];\n\n        for (var contentVariantUri of contentVariantUris) {\n          error[contentVariantUri] = distributionGraphs[0][contentVariantUri] != null ?\n            distributionGraphs[0][contentVariantUri][0][DatabusUris.JSONLD_VALUE] : 'none'\n        }\n\n        errorList.push(error);\n      }\n    } else {\n\n      var contentVariantUri = contentVariantUris[contentVariantIndex];\n\n      // else create buckets and sort files into buckets\n      var buckets = {};\n\n      for (var distribution of distributionGraphs) {\n\n        var variantValue = distribution[contentVariantUri];\n\n        if (variantValue != undefined) {\n          variantValue = variantValue[0]['@value'];\n        }\n\n        if (variantValue == undefined || variantValue == '') {\n          variantValue = '$_none$';\n        }\n\n        if (buckets[variantValue] == undefined) {\n          buckets[variantValue] = [];\n        }\n\n        buckets[variantValue].push(distribution);\n      }\n\n\n      // iterate buckets and call recursively\n      for (var b in buckets) {\n\n        for (var error of DatabusUtils.cvSplit(buckets[b],\n          contentVariantUris, contentVariantIndex + 1, errorList)) {\n          errorList.push(error);\n        }\n      }\n    }\n\n    return errorList;\n  }\n\n}\n\nmodule.exports = DatabusUtils;\n\n\n//# sourceURL=webpack://databus-webapp/./js/utils/databus-utils.js?");

/***/ }),

/***/ "./js/utils/databus-webapp-utils.js":
/*!******************************************!*\
  !*** ./js/utils/databus-webapp-utils.js ***!
  \******************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("const DatabusAlert = __webpack_require__(/*! ../components/databus-alert/databus-alert */ \"./js/components/databus-alert/databus-alert.js\");\r\nconst DatabusUtils = __webpack_require__(/*! ../utils/databus-utils */ \"./js/utils/databus-utils.js\");\r\nconst DatabusMessages = __webpack_require__(/*! ./databus-messages */ \"./js/utils/databus-messages.js\");\r\n\r\nclass DatabusWebappUtils {\r\n\r\n  constructor($scope, $sce) {\r\n    this.scope = $scope;\r\n    this.sce = $sce;\r\n  }\r\n\r\n  goTo(page) {\r\n    window.location = page;\r\n  }\r\n  \r\n  createAccount() {\r\n    window.location = '/app/account';\r\n  }\r\n\r\n  \r\n  getAccountName() {\r\n\r\n    let accountName = window.location.pathname.split('/')[1];\r\n\r\n    if(accountName.length < 4) {\r\n      return null;\r\n    }\r\n\r\n    return this.getOwnedAccountName(accountName);\r\n  }\r\n\r\n  getOwnedAccountName(accountName) {\r\n    if(!this.scope.auth.authenticated || this.scope.auth.info == null) {\r\n      return null;\r\n    }\r\n\r\n    let userInfo = this.scope.auth.info;\r\n\r\n    if(!Array.isArray(userInfo.accounts) || userInfo.accounts.length == 0) {\r\n      return null;\r\n    }\r\n\r\n    let account = userInfo.accounts.find(a => a.accountName == accountName);\r\n\r\n    if(account == null) {\r\n      return null;\r\n    }\r\n\r\n    return account.accountName;\r\n  }\r\n\r\n  login() {\r\n    window.location = '/app/login?redirectUrl=' + encodeURIComponent(window.location);\r\n  }\r\n\r\n  logout() {\r\n    window.location = '/app/logout?redirectUrl=' + encodeURIComponent(window.location);\r\n  }\r\n\r\n  formatDateFromNow(date) {\r\n    return moment(date).fromNow();\r\n  }\r\n\r\n  markdownToHtml(markdown) {\r\n\r\n    if(this.sce == null) {\r\n      return markdown;\r\n    }\r\n\r\n    var markdown = DatabusUtils.renderMarkdown(markdown);\r\n\r\n    return this.sce.trustAsHtml(markdown);\r\n  };\r\n\r\n  formatDate(date) {\r\n    return DatabusUtils.formatDate(date); // moment(date).format('MMM Do YYYY') + \" (\" + moment(date).fromNow() + \")\";\r\n  }\r\n\r\n  formatLongDate(longString) {\r\n    var number = new Number(longString);\r\n    var dateTime = new Date(number);\r\n    return this.formatDate(dateTime);\r\n  }\r\n\r\n  formatFileSize (size) {\r\n    return DatabusUtils.formatFileSize(size);\r\n  }\r\n\r\n  getPathname(uri) {\r\n    var url = new URL(uri);\r\n    return url.pathname;\r\n  }\r\n\r\n  objSize(obj) {\r\n    return DatabusUtils.objSize(obj);\r\n  }\r\n\r\n  navigateUp(uri) {\r\n    return DatabusUtils.navigateUp(uri);\r\n  }\r\n\r\n  uriToName(uri) {\r\n    return DatabusUtils.uriToName(uri); \r\n  }\r\n\r\n  uriToResourceName(uri) {\r\n    return DatabusUtils.uriToResourceName(uri);\r\n  }\r\n\r\n  isValidHttpsUrl(url) {\r\n    return DatabusUtils.isValidHttpsUrl(url);\r\n  }\r\n\r\n  copyToClipboard(str) {\r\n\r\n    if(typeof str === 'object') {\r\n      str = JSON.stringify(str, null, 3);\r\n    }\r\n\r\n    // Create new element\r\n    var el = document.createElement('textarea');\r\n    // Set value (string to be copied)\r\n    el.value = str;\r\n    // Set non-editable to avoid focus and move outside of view\r\n    el.setAttribute('readonly', '');\r\n    el.style = { position: 'absolute', left: '-9999px' };\r\n    document.body.appendChild(el);\r\n    // Select text inside element\r\n    el.select();\r\n    // Copy text to clipboard\r\n    document.execCommand('copy');\r\n    // Remove temporary element\r\n    document.body.removeChild(el);\r\n\r\n    DatabusAlert.alert(this.scope, true, DatabusMessages.GENERIC_COPIED_TO_CLIPBOARD);\r\n  }\r\n}\r\n\r\nmodule.exports = DatabusWebappUtils;\r\n\n\n//# sourceURL=webpack://databus-webapp/./js/utils/databus-webapp-utils.js?");

/***/ }),

/***/ "./js/utils/jsonld-utils.js":
/*!**********************************!*\
  !*** ./js/utils/jsonld-utils.js ***!
  \**********************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("/* module decorator */ module = __webpack_require__.nmd(module);\nconst DatabusUris = __webpack_require__(/*! ./databus-uris */ \"./js/utils/databus-uris.js\");\r\n\r\n\r\nclass JsonldUtils {\r\n\r\n  static refTo(uri) {\r\n    var result = {};\r\n    result[DatabusUris.JSONLD_ID] = uri;\r\n    return result;\r\n  }\r\n\r\n  static getTypedGraph(graphs, graphType) {\r\n\r\n    for (var g in graphs) {\r\n      var graph = graphs[g];\r\n\r\n      if (graph[DatabusUris.JSONLD_TYPE] != undefined && graph[DatabusUris.JSONLD_TYPE].includes(graphType)) {\r\n        return graph;\r\n      }\r\n    }\r\n\r\n    return null;\r\n  }\r\n\r\n  static setLiteral(graph, property, type, value) {\r\n    graph[property] = [];\r\n\r\n    var entry = {};\r\n    entry[DatabusUris.JSONLD_TYPE] = type;\r\n    entry[DatabusUris.JSONLD_VALUE] = value;\r\n\r\n    graph[property].push(entry);\r\n  }\r\n\r\n  static setLink(graph, property, uri) {\r\n    graph[property] = [];\r\n\r\n    var entry = {};\r\n    entry[DatabusUris.JSONLD_ID] = uri;\r\n\r\n    graph[property].push(entry);\r\n  }\r\n\r\n  static getGraphById = function (graphs, id) {\r\n    return graphs.find(g => g[DatabusUris.JSONLD_ID] === id);\r\n  };\r\n\r\n  static getRefArrayProperty = function (graph, propertyUri) {\r\n    const val = graph[propertyUri];\r\n    if (!val) return [];\r\n    return val.map(v => v[DatabusUris.JSONLD_ID]);\r\n  };\r\n\r\n  static getProperty(graph, property) {\r\n    if (graph[property] == undefined) {\r\n      return null;\r\n    }\r\n\r\n    if (graph[property].length == 1) {\r\n      var value = graph[property][0];\r\n\r\n      if (value[DatabusUris.JSONLD_VALUE] != null) {\r\n        return value[DatabusUris.JSONLD_VALUE];\r\n      }\r\n\r\n      if (value[DatabusUris.JSONLD_ID] != null) {\r\n        return value[DatabusUris.JSONLD_ID];\r\n      }\r\n\r\n      return null;\r\n    } else {\r\n      var result = [];\r\n\r\n      for (var value of graph[property]) {\r\n\r\n        if (value[DatabusUris.JSONLD_VALUE] != null) {\r\n          result.push(value[DatabusUris.JSONLD_VALUE]);\r\n        }\r\n\r\n        if (value[DatabusUris.JSONLD_ID] != null) {\r\n          result.push(value[DatabusUris.JSONLD_ID]);\r\n        }\r\n      }\r\n\r\n      if (result.length > 0) {\r\n        return result;\r\n      }\r\n    }\r\n\r\n    return null;\r\n  }\r\n\r\n  static getFirstProperty(graph, property) {\r\n    if (graph[property] == undefined) {\r\n      return null;\r\n    }\r\n\r\n    const values = graph[property];\r\n\r\n    if (values.length === 0) {\r\n      return null;\r\n    }\r\n\r\n    if (values.length === 1) {\r\n      const value = values[0];\r\n\r\n      if (value[DatabusUris.JSONLD_VALUE] != null) {\r\n        return value[DatabusUris.JSONLD_VALUE];\r\n      }\r\n\r\n      if (value[DatabusUris.JSONLD_ID] != null) {\r\n        return value[DatabusUris.JSONLD_ID];\r\n      }\r\n\r\n      return null;\r\n    }\r\n\r\n    for (const value of values) {\r\n      if (value[DatabusUris.JSONLD_VALUE] != null) {\r\n        return value[DatabusUris.JSONLD_VALUE];\r\n      }\r\n\r\n      if (value[DatabusUris.JSONLD_ID] != null) {\r\n        return value[DatabusUris.JSONLD_ID];\r\n      }\r\n    }\r\n\r\n    return null;\r\n  }\r\n\r\n\r\n  static getGraphById(graphs, id) {\r\n    for (var g in graphs) {\r\n      var graph = graphs[g];\r\n\r\n      if (graph[DatabusUris.JSONLD_ID] != undefined && graph[DatabusUris.JSONLD_ID] == id) {\r\n        return graph;\r\n      }\r\n    }\r\n\r\n    return null;\r\n  }\r\n\r\n  static getTypedGraphs(graphs, graphType) {\r\n    var result = [];\r\n\r\n    for (var g in graphs) {\r\n      var graph = graphs[g];\r\n\r\n      if (graph[DatabusUris.JSONLD_TYPE] != undefined &&\r\n        graph[DatabusUris.JSONLD_TYPE].includes(graphType)) {\r\n        result.push(graph);\r\n      }\r\n    }\r\n\r\n    return result;\r\n  }\r\n\r\n  static getSubPropertyGraphs(graphs, propertyUri) {\r\n\r\n    var result = [];\r\n\r\n    for (var graph of graphs) {\r\n      if (graph[DatabusUris.RDFS_SUB_PROPERTY_OF] == undefined) {\r\n        continue;\r\n      }\r\n\r\n      for (var property of graph[DatabusUris.RDFS_SUB_PROPERTY_OF]) {\r\n        if (property[DatabusUris.JSONLD_ID] == propertyUri) {\r\n          result.push(graph);\r\n        }\r\n      }\r\n    }\r\n\r\n    return result;\r\n  }\r\n\r\n\r\n  static getFirstObject(graph, key) {\r\n    var obj = graph[key];\r\n\r\n    if (obj == undefined || obj.length < 1) {\r\n      return null;\r\n    }\r\n\r\n    return obj[0];\r\n  }\r\n\r\n  static getFirstObjectUri(graph, property) {\r\n    // Get the object    \r\n    const obj = graph[property];\r\n\r\n    // Not found -> null\r\n    if (!obj) {\r\n      return null;\r\n    }\r\n\r\n    // If it is an array...\r\n    if (Array.isArray(obj)) {\r\n      for (const item of obj) {\r\n        if (item && typeof item === 'object' && DatabusUris.JSONLD_ID in item) {\r\n          return item[DatabusUris.JSONLD_ID];\r\n        }\r\n      }\r\n    } else if (typeof obj === 'object' && DatabusUris.JSONLD_ID in obj) {\r\n      return obj[DatabusUris.JSONLD_ID];\r\n    }\r\n\r\n    return null;\r\n  }\r\n}\r\n\r\n\r\n\r\nif ( true && module && module.exports)\r\n  module.exports = JsonldUtils;\n\n//# sourceURL=webpack://databus-webapp/./js/utils/jsonld-utils.js?");

/***/ }),

/***/ "./js/utils/messages.js":
/*!******************************!*\
  !*** ./js/utils/messages.js ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DatabusMsg: () => (/* binding */ DatabusMsg)\n/* harmony export */ });\nclass DatabusMsg {\r\n  static messages = {\r\n    err_invalid_group_name: \"Please enter between 3 to 50 characters. \\nRegex: [a-zA-Z0-9_\\\\-\\\\.]{3,50}$\",\r\n    err_no_group_selected: \"Please select a group\",\r\n    err_no_artifact_selected: \"Please select an artifact\",\r\n    \r\n    err_invalid_artifact_name: \"Please enter between 3 to 50 characters. \\nRegex: [a-zA-Z0-9_\\\\-\\\\.]{3,50}$\",\r\n    err_invalid_version_name: \"Please enter between 3 to 50 characters. \\nRegex: [a-zA-Z0-9_\\\\-\\\\.]{3,50}$\",\r\n    err_invalid_version_title: \"The version title is missing.\",\r\n    err_invalid_version_abstract: \"The version abstract is missing.\",\r\n    err_invalid_version_description: \"The version description is missing.\",\r\n    err_invalid_version_license: \"The license is invalid. Please enter a license URI.\",\r\n    err_no_files: \"You have to upload at least one file.\",\r\n    err_not_analyzed: \"This file has not been analzyed yet.\",\r\n    warning_group_exists: \"A group with this name already exists. Publishing will overwrite its metadata.\",\r\n    warning_artifact_exists: \"An artifact with this name already exists. Publishing will overwrite its metadata.\",\r\n    warning_version_exists: \"A version with this name already exists. Publishing will overwrite its metadata. This is not recommended, as other users might use your version identifier as a data dependency.\"\r\n  };\r\n\r\n  static get(key) {\r\n    return this.messages[key] || \"Unknown validation key.\";\r\n  }\r\n}\r\n\n\n//# sourceURL=webpack://databus-webapp/./js/utils/messages.js?");

/***/ }),

/***/ "./js/utils/sparql-examples.js":
/*!*************************************!*\
  !*** ./js/utils/sparql-examples.js ***!
  \*************************************/
/***/ ((module) => {

eval("/**\n * Query Templates can be defined as object with the fields:\n * > select\n * > body\n * > aggregate\n * \n * The select is a SPARQL select statement. The body is an array of strings with each string being a line of a \n * SPARQL query. The string %QUERY% can be used to insert the query generated by the QueryBuilder. The aggregate\n * is a SPARQL aggregate statement.\n */\nclass SparqlExamples {\n\n  static LIST = `PREFIX databus: <https://dataid.dbpedia.org/databus#>\nSELECT DISTINCT * WHERE {\n  ?s a databus:Artifact .\n}`;\n}\n\nmodule.exports = SparqlExamples;\n\n//# sourceURL=webpack://databus-webapp/./js/utils/sparql-examples.js?");

/***/ }),

/***/ "./js/utils/tab-navigation.js":
/*!************************************!*\
  !*** ./js/utils/tab-navigation.js ***!
  \************************************/
/***/ ((module) => {

eval("\r\nclass TabNavigation {\r\n\r\n  constructor($scope, $location, tabKeys, onNavigateCallback) {\r\n    this.location = $location;\r\n    this.tabKeys = tabKeys;\r\n    this.activeTab = 0;\r\n    this.onNavigateCallback = onNavigateCallback;\r\n\r\n    var self = this;\r\n    // Watch the location hash and tell the tabnavigation that it changed\r\n    $scope.$watch(function () {\r\n      return $location.hash();\r\n    }, function (newVal, oldVal) {\r\n      self.onLocationHashChanged(newVal, oldVal)\r\n    }, false);\r\n  }\r\n\r\n\r\n  onLocationHashChanged(value, oldVal) {\r\n    for (var i in this.tabKeys) {\r\n      var tabKey = this.tabKeys[i];\r\n      if (value == tabKey) {\r\n        this.activeTab = i;\r\n\r\n        if(this.onNavigateCallback != null) {\r\n          this.onNavigateCallback(this.activeTab);\r\n        }\r\n        return;\r\n      }\r\n    }\r\n\r\n    this.activeTab = 0;\r\n    if(this.onNavigateCallback != null) {\r\n      this.onNavigateCallback(this.activeTab);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Change the tab - set location hash and scroll up\r\n   * @param {*} value \r\n   */\r\n  navigateTo(value, scrollToTop) {\r\n    this.location.hash(value);\r\n\r\n    if(scrollToTop == true) {\r\n      window.scrollTo(0, 0);\r\n    }\r\n  }\r\n\r\n}\r\n\r\nmodule.exports = TabNavigation;\n\n//# sourceURL=webpack://databus-webapp/./js/utils/tab-navigation.js?");

/***/ }),

/***/ "../server/app/common/utils/api-error.js":
/*!***********************************************!*\
  !*** ../server/app/common/utils/api-error.js ***!
  \***********************************************/
/***/ ((module) => {

eval("class ApiError extends Error {\r\n    constructor(statusCode, resource, message, body) {\r\n        super(message);\r\n        this.name = \"ApiError\";\r\n        this.statusCode = statusCode;\r\n        this.resource = resource;\r\n        this.body = body;\r\n    }\r\n}\r\n\r\nmodule.exports = ApiError;\n\n//# sourceURL=webpack://databus-webapp/../server/app/common/utils/api-error.js?");

/***/ }),

/***/ "markdown-it":
/*!*****************************!*\
  !*** external "markdownit" ***!
  \*****************************/
/***/ ((module) => {

"use strict";
module.exports = self["markdownit"];

/***/ }),

/***/ "moment/moment":
/*!*************************!*\
  !*** external "moment" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = self["moment"];

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			id: moduleId,
/******/ 			loaded: false,
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Flag the module as loaded
/******/ 		module.loaded = true;
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/node module decorator */
/******/ 	(() => {
/******/ 		__webpack_require__.nmd = (module) => {
/******/ 			module.paths = [];
/******/ 			if (!module.children) module.children = [];
/******/ 			return module;
/******/ 		};
/******/ 	})();
/******/ 	
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module can't be inlined because the eval devtool is used.
/******/ 	var __webpack_exports__ = __webpack_require__("./js/angular-application.js");
/******/ 	
/******/ })()
;